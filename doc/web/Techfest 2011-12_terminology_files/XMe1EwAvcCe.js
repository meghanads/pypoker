/*1327996444,169776065*/

if (window.CavalryLogger) { CavalryLogger.start_js(["fbhRl"]); }

window.__DEV__=window.__DEV__||0;if(!window.skipDomainLower&&document.domain.toLowerCase().match(/(^|\.)facebook\..*/))document.domain=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1');function bagofholding(){}function bagof(a){return function(){return a;};}if(!Date.now)Date.now=function now(){return new Date().getTime();};if(!Array.isArray)Array.isArray=function(a){return Object.prototype.toString.call(a)=='[object Array]';};Env=window.Env||{};Env.start=Env.start||Date.now();document.documentElement.className=document.documentElement.className.replace('no_js','');
window.require||(function(){var za={},y={},p=0,z=this,k=1,n=2,l='special',e='exports',c='dependencies',i='module',o='waiting',f='factory',m=undefined,b='define',g='global',j='require',h='requireLazy',d='requireDynamic',a='context';function zb(zk){var zm=za[zk],zf,zj;if(zm[o]&&zm[l]&n)s();if(!zm[e]){var zh=zm[e]={},zi=zm[f];if(Object.prototype.toString.call(zi)==='[object Function]'){var ze=[],zg=zm[c],zl=zg.length;if(zm[l]&n)zl=Math.min(zl,zi.length);for(zj=0;zj<zl;zj++){zf=zg[zj];ze.push(zf===i?zm:(zf===e?zh:zb(zf)));}var zn=zi.apply(zm[a]||z,ze);if(zn)zm[e]=zn;}else zm[e]=zi;}return zm[e];}function w(zi,zg,zh,zf,ze){if(zg===m){zg=[];zh=zi;zi=u();}else if(zh===m){zh=zg;zg=zi;zi=u();}if(za[zi])return;var zj={id:zi};zj[f]=zh;zj[c]=zg;zj[a]=ze;zj[l]=zf;za[zi]=zj;q(zi);}function zc(zf,zg,ze){w(zf,zg,m,k,ze);}function s(){var zf={},ze;for(ze in y)if(za[ze]&&!zf[ze]&&za[ze][l]&n)t({},ze,zf);}function t(zh,ze,zi){zi[ze]=1;var zg=y[ze],zf;if(!zg)return;zh[ze]=1;for(zf in zg){if(!za[zf][l]&n)continue;if(zh[zf]){delete zg[zf];za[zf][o]--;if(!za[zf][o])v(zf);}else t(zh,zf,zi);}zh[ze]=0;}function u(){return '__mod__'+p++;}function q(zg){var zh=za[zg];var zi=0;for(var zf=0;zf<zh[c].length;zf++){var ze=zh[c][zf];if(!za[ze]||za[ze][o]){y[ze]||(y[ze]={});y[ze][zg]=1;zi++;}}zh[o]=zi;if(!zi)v(zg);}function v(zf){var zg=za[zf];if(zg[l]&k)zb(zf);var zh=y[zf];if(zh){delete y[zf];for(var ze in zh)if(!--za[ze][o])v(ze);}}function r(zf,ze){za[zf]={id:zf};za[zf][e]=ze;}r(i,0);r(e,0);r(b,w);r(g,z);r(j,zb);r(d,zb);r(h,zc);w.amd={};z[b]=w;z[j]=zb;z[d]=zb;z[h]=zc;zb.ensure=zc;var zd=false;var x=function(zh,zf,zg,ze){w(zh,zf,zg,ze||n);if(za[zh][o]&&!zd)zd=setTimeout(function(){s();zd=false;},9);};z.__d=function(zh,zf,zg,ze){zf=[g,j,h,i,e].concat(zf);x(zh,zf,zg,ze);};z.__e=function(zh,zf,zg,ze){zf=[g,j,d,h,i,e].concat(zf);x(zh,zf,zg,ze);};})();
__e("hasArrayNature",[],function(b,e,f,g,d,a){function c(h){return (!!h&&(typeof h=='object'||typeof h=='function')&&('length' in h)&&!('setInterval' in h)&&(Object.prototype.toString.call(h)==="[object Array]"||('callee' in h)||('item' in h)));}d.exports=c;});
__e("ArrayUtils",["hasArrayNature"],function(c,f,g,h,e,b){var d=f("hasArrayNature");var a={createFrom:function(j){if(!d(j))return [j];if(j.item){var i=j.length,k=new Array(i);while(i--)k[i]=j[i];return k;}return Array.prototype.slice.call(j);}};e.exports=a;});
__e("copyProperties",[],function(c,e,f,g,d,b){function a(i,j){i=i||{};j=j||{};for(var h in j)i[h]=j[h];if(j.hasOwnProperty&&j.hasOwnProperty('toString')&&(typeof j.toString!='undefined')&&(i.toString!==j.toString))i.toString=j.toString;return i;}d.exports=a;});
__e("array-extensions",["copyProperties"],function(c,f,g,h,d,b){var a=f('copyProperties');function e(i){return function(){if(this===c)throw new TypeError();return i.apply(this,arguments);};}a(Array.prototype,{map:function(j,i){if(this===c||typeof j!='function')throw new TypeError();var k;var l=this.length;var m=new Array(l);for(k=0;k<l;++k)if(k in this)m[k]=j.call(i,this[k],k,this);return m;},forEach:function(j,i){this.map(j,i);},filter:e(function(j,i){if(typeof j!='function')throw new TypeError();var k,n,l=this.length,m=[];for(k=0;k<l;++k)if(k in this){n=this[k];if(j.call(i,n,k,this))m.push(n);}return m;}),every:e(function(j,i){if(typeof j!=='function')throw new TypeError();var m=new Object(this);var l=m.length;for(var k=0;k<l;k++)if(k in m)if(!j.call(i,m[k],k,m))return false;return true;}),some:e(function(j,i){if(typeof j!=='function')throw new TypeError();var m=new Object(this);var l=m.length;for(var k=0;k<l;k++)if(k in m)if(j.call(i,m[k],k,m))return true;return false;}),reduce:null,reduceRight:null,sort:e(Array.prototype.sort),reverse:e(Array.prototype.reverse),concat:e(Array.prototype.concat),slice:e(Array.prototype.slice),indexOf:e(Array.prototype.indexOf||function(k,i){var j=this.length;i|=0;if(i<0)i+=j;for(;i<j;i++)if(i in this&&this[i]===k)return i;return -1;}),contains:function(i){return this.indexOf(i)!=-1;},remove:function(j){var i=this.indexOf(j);if(i!=-1)this.splice(i,1);}});Array.prototype.each=Array.prototype.forEach;},3);
__e("Util",[],function(b,d,e,f,c,a){if(typeof console=='undefined')b.console={log:bagofholding,info:bagofholding,warn:bagofholding,debug:bagofholding,dir:bagofholding,error:bagofholding};c.exports=b.console;});
__e("Arbiter",["array-extensions","ArrayUtils","Util","copyProperties","hasArrayNature"],function(g,j,k,l,i,f){j("array-extensions");var b=j("ArrayUtils");var c=j("Util");var e=j("copyProperties");var h=j("hasArrayNature");var d=null;function m(n){d=n;}if(!window.async_callback)window.async_callback=function(n,o){return n;};function a(){e(this,{_listeners:[],_events:{},_callbacks:{},_last_id:1,_listen:{},_index:{}});e(this,a);delete this.setErrorHandler;}e(a,{SUBSCRIBE_NEW:'new',SUBSCRIBE_ALL:'all',BEHAVIOR_EVENT:'event',BEHAVIOR_PERSISTENT:'persistent',BEHAVIOR_STATE:'state',LIVEMESSAGE:'livemessage',BOOTLOAD:'bootload',FUNCTION_EXTENSION:'function_ext',setErrorHandler:m,subscribe:function(y,p,t){y=b.createFrom(y);var o=y.some(function(z){return !z||typeof(z)!='string';});if(o)return null;t=t||a.SUBSCRIBE_ALL;var n=a._getInstance(this);n._listeners.push({callback:p,types:y});var v=n._listeners.length-1;for(var r=0;r<y.length;r++){var x=y[r];if(!n._index[x])n._index[x]=[];n._index[x].push(v);if(t==a.SUBSCRIBE_ALL)if(x in n._events)for(var s=0;s<n._events[x].length;s++){var q=n._events[x][s];var u=n._fireCallback(p,x,q);if(u===false){n._events[x].splice(s,1);s--;}}}var w={subscriberID:v};return w;},unsubscribe:function(r){var n=a._getInstance(this);var p=n._listeners[r.subscriberID];if(!p)return;for(var q=0;q<p.types.length;q++){var s=p.types[q];if(n._index[s])for(var o=0;o<n._index[s].length;o++)if(n._index[s][o]==r.subscriberID){n._index[s].splice(o,1);if(n._index[s].length==0)delete n._index[s];break;}}delete n._listeners[r.subscriberID];},inform:function(y,p,o){var z=h(y);y=b.createFrom(y);var n=a._getInstance(this);var v={};o=o||a.BEHAVIOR_EVENT;for(var r=0;r<y.length;r++){var w=y[r],q=null;if(o==a.BEHAVIOR_PERSISTENT){q=n._events.length;if(!(w in n._events))n._events[w]=[];n._events[w].push(p);n._events[w]._stateful=false;}else if(o==a.BEHAVIOR_STATE){q=0;n._events[w]=[p];n._events[w]._stateful=true;}else if(w in n._events)n._events[w]._stateful=false;window.ArbiterMonitor&&ArbiterMonitor.record('event',w,p,n);var u;if(n._index[w]){var x=b.createFrom(n._index[w]);for(var s=0;s<x.length;s++){var t=n._listeners[x[s]];if(t){u=n._fireCallback(t.callback,w,p);if(u===false){if(q!==null)n._events[w].splice(q,1);break;}}}}n._updateCallbacks(w,p);window.ArbiterMonitor&&ArbiterMonitor.record('done',w,p,n);v[w]=u;}return z?v:v[y[0]];},query:function(o){var n=a._getInstance(this);if(!(o in n._events))return null;if(n._events[o].length)return n._events[o][0];return null;},_instance:null,_getInstance:function(n){if(n instanceof a)return n;if(!a._instance)a._instance=new a();return a._instance;},registerCallback:function(o,q){var u,p=0,n=a._getInstance(this),t=false;if(typeof o=='function'){u=n._last_id;n._last_id++;t=true;}else{if(!n._callbacks[o])return null;u=o;}if(h(q)){var v={};for(var s=0;s<q.length;s++)v[q[s]]=1;q=v;}for(var w in q){try{if(n.query(w))continue;}catch(r){}p+=q[w];if(n._listen[w]===undefined)n._listen[w]={};n._listen[w][u]=(n._listen[w][u]||0)+q[w];}if(p==0&&t){n._fireCallback(o);return null;}if(!t){n._callbacks[u].depnum+=p;}else n._callbacks[u]={callback:async_callback(o,'arbiter'),depnum:p};return u;},_updateCallbacks:function(q,p){if(p===null||!this._listen[q])return;for(var o in this._listen[q]){this._listen[q][o]--;if(this._listen[q][o]<=0)delete this._listen[q][o];this._callbacks[o].depnum--;if(this._callbacks[o].depnum<=0){var n=this._callbacks[o].callback;delete this._callbacks[o];this._fireCallback(n);}}},_fireCallback:function(o){var n=Array.prototype.slice.call(arguments,1);if(/nocatch/.test(location.search))return o.apply(null,n);try{return o.apply(null,n);}catch(p){if(d)d(p);}}});i.exports=a;});
__e("mixins",["Arbiter"],function(d,f,g,h,e,c){var a=f('Arbiter');var b={Arbiter:{_getArbiterInstance:function(){return this._arbiter||(this._arbiter=new a());},inform:function(k,j,i){return this._getArbiterInstance().inform(k,j,i);},subscribe:function(k,i,j){return this._getArbiterInstance().subscribe(k,i,j);},unsubscribe:function(i){this._getArbiterInstance().unsubscribe(i);}}};d.Mixins=e.exports=b;},3);
__e("bind",[],function(c,e,f,g,d,b){function a(k,j){var h=Array.prototype.slice.call(arguments,2);function i(){var m=k||(this==window?false:this),l=h.concat(Array.prototype.slice.call(arguments));if(typeof(j)=="string"){if(m[j])return m[j].apply(m,l);}else return j.apply(m,l);}i.toString=function(){if(typeof(j)=="string")return "bound lazily: "+k[j];return "bound: "+j;};return i;}d.exports=a;c.bind=a;},3);
__e("function-extensions",["ArrayUtils","mixins","bind","copyProperties"],function(f,h,i,j,g,e){var a=h('ArrayUtils');var b=h('mixins');var c=h('bind');var d=h('copyProperties');Function.mixin=function(){for(var l=1,k=arguments.length;l<k;++l)d(arguments[0],b[arguments[l]]||arguments[l]);};Function.prototype.bind=function(l){var k=[l,this].concat(Array.prototype.slice.call(arguments,1));return c.apply(null,k);};Function.prototype.curry=Function.prototype.bind.bind(null,null);Function.prototype.shield=function(l){if(typeof this!='function')throw new TypeException();var k=this.bind.apply(this,a.createFrom(arguments));return function(){return k();};};Function.prototype.defer=function(l,k){if(typeof this!='function')throw new TypeError();l=l||0;return setTimeout(this,l,k);};},3);
__e("isEmpty",[],function(b,e,f,g,d,a){function c(i){if(i instanceof Array){return i.length===0;}else if(i instanceof Object){for(var h in i)return false;return true;}else return !i;}d.exports=c;});
__e("CSSLoader",["function-extensions","Util","isEmpty"],function(p,s,t,u,r,o){s("function-extensions");var d=s("Util");var q=s("isEmpty");var b=20;var c=5000;var i;var n;var l={};var h=[];var g;var e={};function f(w){var v=Array.prototype.slice(arguments,1);for(var x=0;x<w.length;x++)w[x].apply(null,v);}function m(v){if(n)return;n=true;var w=document.createElement('link');w.onload=function(){i=true;w.parentNode.removeChild(w);};w.rel='stylesheet';w.href='data:text/css;base64,';v.appendChild(w);}function j(){var y;var v=[];var w=[];if(Date.now()>=g){for(y in e){w.push(e[y].signal);v.push(e[y].error);}e={};}else for(y in e){var z=e[y].signal;var za=window.getComputedStyle?getComputedStyle(z,null):z.currentStyle;if(za&&parseInt(za.height,10)>1){v.push(e[y].load);w.push(z);delete e[y];}}for(var x=0;x<w.length;x++)w[x].parentNode.removeChild(w[x]);if(!q(v)){f(v);g=Date.now()+c;}return q(e);}function k(y,w,za,z){var zb=document.createElement('meta');zb.id='bootloader_'+y.replace(/[^a-z0-9]/ig,'_');w.appendChild(zb);var v=!q(e);g=Date.now()+c;e[y]={signal:zb,load:za,error:z};if(!v)var x=setInterval(function _pollCSS(){if(j())clearInterval(x);},b,false);}var a={loadStyleSheet:function(y,zc,v,za,z){if(l[y])throw new Error('CSS component '+y+' has already been requested.');if(document.createStyleSheet){var zb;for(var w=0;w<h.length;w++)if(h[w].imports.length<31){zb=w;break;}if(zb===undefined){h.push(document.createStyleSheet());zb=h.length-1;}h[zb].addImport(zc);l[y]={styleSheet:h[zb],uri:zc};k(y,v,za,z);return;}var x=document.createElement('link');x.rel='stylesheet';x.type='text/css';x.href=zc;l[y]={link:x};if(i){x.onload=function(){x.onload=x.onerror=null;za();};x.onerror=function(){x.onload=x.onerror=null;z();};}else{k(y,v,za,z);if(i===undefined)m(v);}v.appendChild(x);},registerLoadedStyleSheet:function(w,v){if(l[w])throw new Error('CSS component '+w+' has already been requested.');l[w]={link:v};},unloadStyleSheet:function(y){if(!y in l)return;var w=l[y];var x=w.link;if(x){x.onload=x.onerror=null;x.parentNode.removeChild(x);}else{var z=w.styleSheet;for(var v=0;v<z.imports.length;v++)if(z.imports[v].href==w.uri){z.removeImport(v);break;}}delete e[y];delete l[y];}};r.exports=a;});
__e("bootloader",["ArrayUtils","Arbiter","CSSLoader","Util","isEmpty"],function(r,u,v,w,t,q){var b=u('ArrayUtils');var a=u('Arbiter');var d=u('CSSLoader');var e=u('Util');var s=u('isEmpty');var m={};var k={};var g={};var i=null;var n={};var h={};var f=false;var p=[];function l(zc,zb,z,y){var x=c.done.curry([z],zc=='css');if(zc=='js'){var za=document.createElement('script');za.src=zb;za.type='text/javascript';za.async=true;za.onload=za.onerror=x;za.onreadystatechange=function(){if(this.readyState in {loaded:1,complete:1})x();};y.appendChild(za);}else if(zc=='css')d.loadStyleSheet(z,zb,y,x,function(){x();});}function o(x){if(!n[x])return;if(n[x].type=='css'){d.unloadStyleSheet(x);delete m[x];a.inform(a.BOOTLOAD+'/'+x,null,a.BEHAVIOR_STATE);}}function j(z,x){if(!f){p.push([z,x]);return;}z=b.createFrom(z);var zc=[];for(var za=0;za<z.length;++za){if(!z[za])continue;var y=g[z[za]];if(!!y)for(var zb=0;zb<y.length;++zb)zc.push(y[zb]);}c.loadResources(zc,x);}var c={configurePage:function(x){var zd={};var zc=c.resolveResources(x);var y;for(y=0;y<zc.length;y++){zd[zc[y].src]=zc[y];c.requested(zc[y].name);}var za=document.getElementsByTagName('link');for(y=0;y<za.length;++y){if(za[y].rel!='stylesheet')continue;for(var z in zd)if(za[y].href.indexOf(z)!==-1){var zb=zd[z].name;if(zd[z].permanent)k[zb]=true;delete zd[z];d.registerLoadedStyleSheet(zb,za[y]);c.done([zb],true);break;}}},loadComponents:function(y,x){y=b.createFrom(y);var zb=[];for(var z=0;z<y.length;z++){var zc=g[y[z]];if(zc&&!zc.module)continue;var za='legacy:'+y[z];if(g[za]){y[z]=za;}else if(zc&&zc.module)zb.push(y[z]);}zb.length;j(y,x);},loadResources:function(zg,y,zf,zj){var zb;zg=c.resolveResources(b.createFrom(zg));if(zf){var zd={};for(zb=0;zb<zg.length;++zb)zd[zg[zb].name]=true;for(var zc in m)if(!(zc in k)&&!(zc in zd)&&!(zc in h))o(zc);h={};}var zk=[];var ze=[];for(zb=0;zb<zg.length;++zb){var zh=zg[zb];if(zh.permanent)k[zh.name]=true;var zi=a.BOOTLOAD+'/'+zh.name;if(a.query(zi)!==null)continue;if(!zh.nonblocking)ze.push(zi);if(!m[zh.name]){c.requested(zh.name);zk.push(zh);window.CavalryLogger&&CavalryLogger.getInstance().measureResources(zh,zj);}}if(y)y=a.registerCallback(y,ze);var za=document.documentMode||+(/MSIE.(\d+)/.exec(navigator.userAgent)||[])[1];var z=c.getHardpoint();var x=za?z:document.createDocumentFragment();for(zb=0;zb<zk.length;++zb)l(zk[zb].type,zk[zb].src,zk[zb].name,x);if(z!==x)z.appendChild(x);return y;},requestResource:function(za,z,y){var x=c.getHardpoint();l(za,z,y,x);},done:function(zb,y){c.requested(zb);if(!y){var za={sender:this};a.inform(a.BOOTLOAD,za,a.BEHAVIOR_EVENT);}for(var x=0;x<zb.length;++x){var z=zb[x];a.inform(a.BOOTLOAD+'/'+z,true,a.BEHAVIOR_STATE);}},requested:function(y){y=b.createFrom(y);for(var x=0;x<y.length;++x)m[y[x]]=true;},enableBootload:function(y){for(var z in y)if(!g[z])g[z]=y[z];if(!f){f=true;for(var x=0;x<p.length;x++)c.loadComponents.apply(null,p[x]);p=[];}},getHardpoint:function(){if(!i){var x=document.getElementsByTagName('head');i=x.length&&x[0]||document.body;}return i;},setResourceMap:function(y){if(!y)return;for(var x in y){if(!y[x].name)y[x].name=x;n[x]=y[x];}},resolveResources:function(z){if(!z)return [];var y=[];for(var x=0;x<z.length;++x)if(typeof z[x]=='string'){if(z[x] in n)y.push(n[z[x]]);}else y.push(z[x]);return y;},loadEarlyResources:function(z){var x;c.setResourceMap(z);var y=[];for(x in z)y.push(n[x]);c.loadResources(y);for(x in z){var za=n[x];if(!za.permanent)h[za.name]=za;}},isDisplayJS:function(x){if(typeof x=='string')x=n[x];return x.displayjs;}};r.Bootloader=t.exports=c;},3);
__e("Env",["copyProperties"],function(d,f,g,h,e,c){var b=f("copyProperties");var a={start:Date.now()};if(d.Env){b(a,d.Env);d.Env=undefined;}e.exports=a;});
__e("onload",["Arbiter","copyProperties"],function(l,u,v,w,m,k){var a=u('Arbiter');var c=a.BEHAVIOR_STATE;var h=function(x){window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp(x);};var b={ONLOAD:'onload/onload',ONLOAD_CALLBACK:'onload/onload_callback',ONLOAD_DOMCONTENT:'onload/dom_content_ready',ONLOAD_DOMCONTENT_CALLBACK:'onload/domcontent_callback',ONBEFOREUNLOAD:'onload/beforeunload',ONUNLOAD:'onload/unload'};function g(){return !window.loading_page_chrome;}function q(x){if(window.loaded&&typeof _runHook!='undefined'){_runHook(x,'onlateloadhooks');}else d('onloadhooks',x);}function n(x){if(window.afterloaded&&typeof _runHook!='undefined'){setTimeout(function(){_runHook(x,'onlateafterloadhooks');},0);}else d('onafterloadhooks',x);}function o(x,y){if(y===undefined)y=g();y?d('onbeforeleavehooks',x):d('onbeforeunloadhooks',x);}function s(x){if(!window.onunload)window.onunload=function(){a.inform(b.ONUNLOAD,true,c);};d('onunloadhooks',x);}function p(x){d('onleavehooks',x);}function d(y,x){window[y]=(window[y]||[]).concat(x);}function t(x){window[x]=[];}function f(){a.inform(b.ONLOAD_DOMCONTENT,true,c);}function e(){var x=document,zb=window;if(x.addEventListener){var zc=/AppleWebKit.(\d+)/.exec(navigator.userAgent);if(zc&&zc[1]<525){var za=setInterval(function(){if(/loaded|complete/.test(x.readyState)){f();clearInterval(za);}},10);}else x.addEventListener("DOMContentLoaded",f,true);}else{var z='javascript:void(0)';if(zb.location.protocol=='https:')z='//:';x.write('<script onreadystatechange="if (this.readyState==\'complete\') {'+'this.parentNode.removeChild(this);_domcontentready();}" '+'defer="defer" src="'+z+'"><\/script\>');}var y=zb.onload;zb.onload=function(){h('t_layout');y&&y();a.inform(b.ONLOAD,true,c);};zb.onbeforeunload=function(){var zd={};a.inform(b.ONBEFOREUNLOAD,zd,c);if(!zd.warn)a.inform('onload/exit',true);return zd.warn;};}var r=a.registerCallback(function(){h('t_onload');a.inform(b.ONLOAD_CALLBACK,true,c);},[b.ONLOAD]);var j=a.registerCallback(function(){h('t_domcontent');a.inform(b.ONLOAD_DOMCONTENT_CALLBACK,true,c);},[b.ONLOAD_DOMCONTENT]);e();m.exports={Event:b,runOnload:q,runAfterload:n,runOnleave:p,runBeforeUnload:o,runOnUnload:s};var i=u('copyProperties');i(l,{OnloadEvent:b,onloadRegister:q,onafterloadRegister:n,onleaveRegister:p,onbeforeunloadRegister:o,onunloadRegister:s,domcontent_callback:j,onload_callback:r,_domcontentready:f,removeHook:t,_addHook:d});},3);
__e("EagleEye",["Arbiter","bootloader","Env","onload","Util"],function(p,w,x,y,t,o){var a=w('Arbiter');var c=w('bootloader');var e=w('Env');var f=w('onload');var h=w('Util');var j=e.eagleEyeConfig||{};var zb='_e_';var zd=(window.name||'').toString();if(zd.length==7&&zd.substr(0,3)==zb){zd=zd.substr(3);}else{zd=j.seed;if(window==window.top)window.name=zb+zd;}var z=(window.location.protocol=='https:'&&document.cookie.match(/\bcsm=1/))?'; secure':'';var u=zb+zd+'_';var n=new Date(Date.now()+604800000).toGMTString();var l=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1');var m='; expires='+n+';path=/; domain='+l+z;var k=0;var v;var zc=j.sessionStorage&&p.sessionStorage;var r=document.cookie.length;var s=false;var za=Date.now();function q(zh){var ze=2166136261;for(var zf=0,zg=zh.length;zf<zg;++zf)ze=(ze^zh.charCodeAt(zf))*16777619;ze+=ze<<13;ze^=ze>>7;ze+=ze<<3;ze^=ze>>17;ze+=ze<<5;return (ze|0)+2147483648;}function i(ze){return u+(k++)+'='+encodeURIComponent(ze)+m;}function b(){var ze=[];var zh=false;var zg=0;var zf=0;this.isEmpty=function(){return !ze.length;};this.enqueue=function(zj,zi){if(zi){ze.unshift(zj);}else ze.push(zj);};this.dequeue=function(){ze.shift();};this.peek=function(){return ze[0];};this.clear=function(zk){r=Math.min(r,document.cookie.length);if(!s&&(new Date()-za>60000))s=true;var zi=!zk&&(document.cookie.search(zb)>=0);var zu=!!e.cookie_header_limit;var zp=e.cookie_count_limit||19;var zq=e.cookie_header_limit||3950;var zn=zp-5;var zo=zq-1000;while(!this.isEmpty()){var zj=i(this.peek());if(zu&&(zj.length>zq||(s&&zj.length+r>zq))){this.dequeue();continue;}if((zi||zu)&&((document.cookie.length+zj.length>zq)||(document.cookie.split(';').length>zp)))break;document.cookie=zj;zi=true;this.dequeue();}var zr=Date.now();if(zk||!zh&&zi&&((zf>0)&&(Math.min(10*Math.pow(2,zf-1),60000)+zg<zr))&&a.query(f.Event.ONLOAD)&&(!this.isEmpty()||(document.cookie.length>zo)||(document.cookie.split(';').length>zn))){var zt=new Image();var zs=this;var zl=e.tracking_domain||'';zh=true;zt.onload=function _EagleEye_logged(){zh=false;zf=0;zs.clear();};zt.onerror=zt.onabort=function _EagleEye_error(){zh=false;zg=Date.now();zf++;};var zm=e.fb_isb?'&fb_isb='+e.fb_isb:'';var zv='&__user='+e.user;zt.src=zl+'/ajax/nectar.php?asyncSignal='+(Math.floor(Math.random()*10000)+1)+zm+zv+'&'+(!zk?'':'s=')+zr;}};}v=new b();if(zc){var g=function(){var zg=0;var zi=zg;function zf(){var zk=sessionStorage.getItem('_e_ids');if(zk){var zj=(zk+'').split(';');if(zj.length==2){zg=parseInt(zj[0],10);zi=parseInt(zj[1],10);}}}function zh(){var zj=zg+';'+zi;sessionStorage.setItem('_e_ids',zj);}function ze(zj){return '_e_'+((zj!==undefined)?zj:zg++);}this.isEmpty=function(){return zi===zg;};this.enqueue=function(zl,zj){var zk=zj?ze(--zi):ze();sessionStorage.setItem(zk,zl);zh();};this.dequeue=function(){this.isEmpty();sessionStorage.removeItem(ze(zi));zi++;zh();};this.peek=function(){var zj=sessionStorage.getItem(ze(zi));return zj?(zj+''):zj;};this.clear=v.clear;zf();};v=new g();}var d={log:function(zh,ze,zf){if(e.no_cookies)return;var zi=[zd,Date.now(),zh].concat(ze);zi.push(zi.length);function zg(){var zk=JSON.stringify(zi);try{v.enqueue(zk,!!zf);v.clear(!!zf);}catch(zj){if(zc&&(zj.code===1000)){v=new b();zc=false;zg();}}}if(p.JSON){zg();}else c.loadComponents('json',zg);},createLogger:function(zg,ze){ze=(ze===undefined)?1:ze;var zf=function(zh,zi){if(zf.enabled)d.log(zg,zh,zi);};zf.enabled=false;zf._key=(e.user||Math.random())+zg;zf.enabled=(q(zf._key)%65535/65535)<=ze;return zf;},getSessionID:function(){return zd;}};p.EagleEye=t.exports=d;},3);
__e("setUECookie",["Env"],function(c,e,f,g,d,b){var a=e("Env");function h(j){if(!a.no_cookies){var i=0;if(c.afterloaded){i=2;}else if(c.loaded)i=1;document.cookie="act="+encodeURIComponent(j+":"+i)+"; path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}}d.exports=h;});
__e("json",[],function(global,require,requireDynamic,requireLazy,module,exports){if(!this.JSON)this.JSON={};(function(){function f(n){return n<10?'0'+n:n;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function')value=value.toJSON(key);if(typeof rep==='function')value=rep.call(holder,key,value);switch(typeof value){case 'string':return quote(value);case 'number':return isFinite(value)?String(value):'null';case 'boolean':case 'null':return String(value);case 'object':if(!value)return 'null';gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1)partial[i]=str(i,value)||'null';v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v)partial.push(quote(k)+(gap?': ':':')+v);}}}else for(k in value)if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v)partial.push(quote(k)+(gap?': ':':')+v);}v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}if(typeof JSON.stringify!=='function')JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1)indent+=' ';}else if(typeof space==='string')indent=space;rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number'))throw new Error('JSON.stringify');return str('',{'':value});};if(typeof JSON.parse!=='function')JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object')for(k in value)if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else delete value[k];}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return '\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}throw new SyntaxError('JSON.parse');};JSON.stringify=function(old){return function(){var s=old.apply(this,arguments);return s?s.replace(/[%\u2028\u2029]/g,function(m){var s=m.charCodeAt(0).toString(16);return '\\u0000'.substring(0,6-s.length)+s;}):s;};}(JSON.stringify);}());if(!global.JSON)global.JSON=JSON;},3);
__e("collectDataAttributes",["json"],function(c,e,f,g,d,b){e("json");function a(l,p){var n={};var k={};var o=p.length;var m;for(m=0;m<o;++m){n[p[m]]={};k[p[m]]='data-'+p[m];}while(l){if(l.getAttribute)for(m=0;m<o;++m){var j=l.getAttribute(k[p[m]]);if(j){var i=JSON.parse(j);for(var h in i)if(n[p[m]][h]===undefined)n[p[m]][h]=i[h];}}l=l.parentNode;}return n;}d.exports=a;});
__e("ClickRef",["Arbiter","EagleEye","copyProperties","setUECookie","collectDataAttributes"],function(f,i,j,k,h,e){var a=i("Arbiter");var b=i("EagleEye");var d=i("copyProperties");var l=i("setUECookie");var c=i("collectDataAttributes");function g(){function o(t){if(!!t){var s={profile_minifeed:1,info_tab:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,navSearch:1};for(var r=t;r&&r!=document.body;r=r.parentNode){if(!r.id||typeof r.id!=='string')continue;if(r.id.substr(0,8)=='pagelet_')return r.id.substr(8);if(r.id.substr(0,8)=='box_app_')return r.id;if(s[r.id])return r.id;}}return '-';}function n(r){return (r.getAttribute&&(r.getAttribute('ajaxify')||r.getAttribute('data-endpoint'))||r.action||r.href||r.name);}function p(s){if(!ge('content'))return [0,0,0,0];var r=$('content');var t=window.Vector2?Vector2.getEventPosition(s):{x:0,y:0};return [t.x,t.y,r.offsetLeft,r.clientWidth];}function q(s,r){if(r=='FORCE')return true;if(r=='INDIRECT')return false;return (s&&n(s));}function m(zc,y,event,u){var za=(!window.ArbiterMonitor)?'r':'a',x=[0,0,0,0],zb,v,w;if(!!event){zb=event.type;if(zb=='click'&&ge('content'))x=p(event);var s=0;event.ctrlKey&&(s+=1);event.shiftKey&&(s+=2);event.altKey&&(s+=4);event.metaKey&&(s+=8);if(s)zb+=s;}if(!!y)v=n(y);var r=[];if(window.ArbiterMonitor){w=ArbiterMonitor.getInternRef(y);r=ArbiterMonitor.getActFields();}var t=c(y,['ft','gt']);d(t.ft,u.ft||{});d(t.gt,u.gt||{});if(t.gt.ua_id)zc.set_ua_id(t.gt.ua_id);if(typeof(t.ft.ei)==='string')delete t.ft.ei;var z=[zc._ue_ts,zc._ue_count,v||'-',zc._context,zb||'-',w||o(y),za,window.URI?URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,t].concat(x).concat(r);return z;}a.subscribe("UserAction/new",function(t,s){if(q(s.node,s.mode)){var r=m(s.ua,s.node,s.event,s.extra_data);l(s.ua.ue);b.log('act',r);}});}h.exports={init:g};});
__e("legacy:click-ref",["ClickRef"],function(a,b,c,d){b('ClickRef').init();},3);
__e("legacy:env",["Env"],function(b,c,d,e){var a=c('Env');b.Env=a;},3);
__e("dom-core",[],function(d,f,g,h,e,b){var a=function(i){return typeof i=='string'?document.getElementById(i):i;};var c=a;d.ge=b.ge=c;d.$=b.$=a;},3);
__e("css-core",["dom-core"],function(d,f,g,h,e,c){var a=f('dom-core').$;var b={hasClass:function(j,i){j=a(j);return (' '+j.className+' ').indexOf(' '+i+' ')>-1;},addClass:function(j,i){j=a(j);if(i&&!b.hasClass(j,i))j.className=j.className+' '+i;return j;},removeClass:function(j,i){j=a(j);if(b.hasClass(j,i))j.className=j.className.replace(new RegExp('(^|\\s)'+i+'(?:\\s|$)','g'),'$1').replace(/\s+/g,' ').replace(/^\s*|\s*$/g,'');return j;},toggleClass:function(j,i){return b.conditionClass(j,i,!b.hasClass(j,i));},conditionClass:function(k,j,i){return (i?b.addClass:b.removeClass)(k,j);},show:function(i){b.removeClass(i,'hidden_elem');},hide:function(i){b.addClass(i,'hidden_elem');},conditionShow:function(j,i){b.conditionClass(j,'hidden_elem',!i);}};d.CSS=e.exports=b;},3);
__e("Parent",["css-core"],function(d,f,g,h,e,c){var a=f("css-core");var b={byTag:function(i,j){j=j.toUpperCase();while(i&&i.nodeName!=j)i=i.parentNode;return i;},byClass:function(j,i){while(j&&!a.hasClass(j,i))j=j.parentNode;return j;},byAttribute:function(j,i){while(j&&(!j.getAttribute||!j.getAttribute(i)))j=j.parentNode;return j;}};e.exports=b;});
__e("legacy:parent",["Parent"],function(a,b,c,d){a.Parent=b('Parent');},3);
__e("trackReferrer",["Parent"],function(c,e,f,g,d,b){var a=e("Parent");function h(i,m){i=a.byAttribute(i,'data-referrer');if(i){var l=/^(?:(?:[^:\/?#]+):)?(?:\/\/(?:[^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/.exec(m)[1]||'';if(!l)return;var k=l+'|'+i.getAttribute('data-referrer');var j=new Date();j.setTime(Date.now()+1000);document.cookie="x-src="+encodeURIComponent(k)+"; "+"expires="+j.toGMTString()+";path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}return i;}d.exports=h;});
__e("legacy:referrer-tracker",["trackReferrer"],function(a,b,c,d){a.trackReferrer=b('trackReferrer');},3);
__e("UserNoOp",[],function(d,f,g,h,e,c){var a=function(){};var b=function(){return this;};a.prototype={add_event:b,add_data:b,set_ua_id:b,set_namespace:b};e.exports=a;});
__e("FunctionUtils",[],function(b,e,f,g,d,a){function c(k,m,i,h){var l;var j=function(){var n=arguments;var o=this;var p=function(){l=null;k.apply(o,n);};i&&j.reset();if(i||!l)l=setTimeout(p,m,h);};j.reset=function(){l&&clearTimeout(l);l=null;};return j;}d.exports={debounce:function(i,j,h){return c(i,j,true,h);},throttle:function(i,j,h){return c(i,j,false,h);}};});
__e("userAction",["function-extensions","Arbiter","EagleEye","FunctionUtils","copyProperties","hasArrayNature"],function(h,n,o,p,j,g){n("function-extensions");var a=n("Arbiter");var b=n("EagleEye");var c=n("FunctionUtils");var f=n("copyProperties");var i=n("hasArrayNature");function d(v,u,s){var t=v+'/'+u;f(this,{ue:t,_ua_id:null,_ts:v,_ns:null,_start_ts:v,_prev_event:'s',_ue_ts:v,_ue_count:u,_context:s,_data_version:1,_event_version:2,_info_version:1});if(d.enable.report)b.log('uan',[v,u]);this._report=c.debounce(function report(){if(!d.enable.report)return;var w=[this._info_version,this.ue,this._ns,this._ua_id];b.log('uai',w);}.bind(this),100);}var e=[];d.enable=function(t){if(!t)return;if(!i(t))t=[t];for(var s=0;s<t.length;s++)d.enable[t[s]]=true;};f(d.prototype,{set_ua_id:function(s){this._ua_id=s;this._report();return this;},set_namespace:function(s){this._ns=s;this._report();return this;},add_event:function(u,v){if(!d.enable.events)return this;v=v||0;var x=(Date.now()-v);var s=x-this._ts;var w=x-this._ue_ts;var t=[this._event_version,this.ue,this._ns,this._ua_id,this._prev_event,u,s,w];b.log('uae',t);this._ts=x;this._prev_event=u;return this;},add_data:function(s){if(!d.enable.data)return this;var t=[this._data_version,this.ue,s];b.log('uad',t);return this;}});var q=0;var m=0;var l=null;var k=null;function r(s,w,event,v,t){var z=Date.now();var y=z+'/'+q;t=t||{};if(!w&&event)w=event.getTarget();var u=50;if(w&&l)if(z-m<u&&w==l&&v!="FORCE")return e[e.length-1];if(!window.addEventListener&&document.createEventObject)event=document.createEventObject(event);l=w;k=event;var x=new d(z,q,s);e.push(x);while(e.length>10)e.shift();a.inform("UserAction/new",{ua:x,node:w,mode:v,event:event,extra_data:t});m=z;q++;return x;}a.subscribe("UserAction/enable",function(t,s){d.enable(s);});j.exports=r;});
__e("legacy:UserAction",["UserNoOp","userAction"],function(a,b,c,d){a.UserNoOp=b('UserNoOp');a.user_action=a.user_action||b('userAction');a.report_data=a.report_data||function(e,f){user_action(e,null,null,'FORCE',f);};},3);
!function(){if(window.__primer)return;window.__primer=true;var a=null;var c=/async(?:-post)?|dialog(?:-pipe|-post)?|theater|toggle/;document.documentElement.onclick=function(f){f=f||window.event;a=f.target||f.srcElement;var g=Parent.byTag(a,'A');if(!g)return;var d=g.getAttribute('ajaxify');var h=g.href;var m=d||h;if(m){var l=user_action('a',g,f).set_namespace('primer');if(window.ArbiterMonitor)ArbiterMonitor.initUA(l,[g]);}if(d&&h&&!(/#$/).test(h)){var i=f.which&&f.which!=1;var j=f.altKey||f.ctrlKey||f.metaKey||f.shiftKey;if(i||j)return;}trackReferrer(g,m);var e=['dialog'];var k=g.rel&&g.rel.match(c);k=k&&k[0];switch(k){case 'dialog-pipe':e.push('ajaxpipe');case 'dialog':case 'dialog-post':Bootloader.loadComponents(e,function(){Dialog.bootstrap(m,null,k=='dialog',null,null,g);});break;case 'async':case 'async-post':Bootloader.loadComponents('async',function(){AsyncRequest.bootstrap(m,g);});break;case 'theater':if(window.Env&&Env.snowlift){Bootloader.loadComponents('PhotoSnowlift',function(){PhotoSnowlift.bootstrap(m,g);});}else Bootloader.loadComponents('PhotoSnowbox',function(){PhotoSnowbox.bootstrap(m,g);});break;case 'toggle':CSS.toggleClass(g.parentNode,'openToggler');Bootloader.loadComponents('Toggler',function(){Toggler.bootstrap(g);});break;default:return;}return false;};document.documentElement.onsubmit=function(d){d=d||window.event;var e=d.target||d.srcElement;if(e&&e.nodeName=='FORM'&&e.getAttribute('rel')=='async'){var g=user_action('f',e,d).set_namespace('primer');if(window.ArbiterMonitor)ArbiterMonitor.initUA(g,[e]);var f=a;Bootloader.loadComponents('dom-form',function(){Form.bootstrap(e,f);});return false;}};var b=null;document.documentElement.onmouseover=function(d){d=d||window.event;b=d.target||d.srcElement;var e=Parent.byAttribute(b,'data-hover');if(!e)return;switch(e.getAttribute('data-hover')){case 'tooltip':Bootloader.loadComponents('Tooltip',function(){Tooltip.process(e,b);});break;}};}();
__e("Class",["function-extensions","Arbiter","bind"],function(n,p,q,r,o,m){p('function-extensions');var a=p('Arbiter');var l=p('bind');var h={};var d=null;var b={extend:function(s,t){if(!d)d=a.subscribe(a.BOOTLOAD,j);if(typeof t=='string'){i(s,t);}else c(s,t);},mixin:function(u,t){var s=Array.prototype.slice.call(arguments);s[0]=s[0].prototype;Function.mixin.apply(Function,s);}};function i(t,u){t.__class_extending=true;var s=a.registerCallback(l(null,c,t,u),[a.FUNCTION_EXTENSION+'/'+u,a.BOOTLOAD]);if(s!==null)h[u]=true;}function j(){for(var s in h)if(!!n[s]){delete h[s];if(!n[s].__class_extending){a.inform(a.FUNCTION_EXTENSION+'/'+s,true,a.BEHAVIOR_STATE);}else n[s].__class_name=s;}}function c(s,u){delete s.__class_extending;u=typeof u=='string'?n[u]:u;var v=g(u,0);var t=g(s,v.prototype.__level+1);t.parent=v;if(!!s.__class_name)a.inform(a.FUNCTION_EXTENSION+'/'+s.__class_name,true,a.BEHAVIOR_STATE);}function g(u,s){if(u._metaprototype)return u._metaprototype;var t=new Function();t.construct=e;t.prototype.construct=k(u,s,true);t.prototype.__level=s;t.base=u;u.prototype.parent=t;u._metaprototype=t;return t;}function e(s){f(s.parent);var v=[];var u=s;while(u.parent){var t=new u.parent();v.push(t);t.__instance=s;u=u.parent;}s.parent=v[1];v.reverse();v.pop();s.__parents=v;s.__instance=s;return s.parent.construct.apply(s.parent,arguments);}function f(v){if(v.initialized)return;var s=v.base.prototype;if(v.parent){f(v.parent);var w=v.parent.prototype;for(var t in w)if(t!='__level'&&t!='construct'&&s[t]===undefined)s[t]=v.prototype[t]=w[t];}v.initialized=true;var u=v.prototype.__level;for(var t in s)if(t!='parent')s[t]=v.prototype[t]=k(s[t],u);}function k(u,t,v){if(typeof u!='function'||u.__prototyped)return u;var s=function(){var y=this.__instance;if(y){var z=y.parent;y.parent=t?y.__parents[t-1]:null;var w=arguments;if(v){w=[];for(var x=1;x<arguments.length;x++)w.push(arguments[x]);}var za=u.apply(y,w);y.parent=z;return za;}else return u.apply(this,arguments);};s.__prototyped=true;return s;}n.Class=o.exports=b;},3);
__e("legacy:arbiter",["Arbiter"],function(a,b,c,d){a.Arbiter=b('Arbiter');},3);
__e("event-form-bubbling",[],function(b,d,e,f,c,a){b.Event=b.Event||function(){};Event.__inlineSubmit=function(h,event){var g=Event.__getHandler&&Event.__getHandler(h,'submit');return g?null:Event.__bubbleSubmit(h,event);};Event.__bubbleSubmit=function(g,event){if(document.documentElement.attachEvent){var h;while(h!==false&&(g=g.parentNode))h=g.onsubmit?g.onsubmit(event):Event.__fire&&Event.__fire(g,'submit',event);return h;}};},3);
__e("DataStore",[],function(i,k,l,m,j,h){var f={};var c={};var g=1;var b=1;function d(n){var o;if(typeof n=='string'){o='str_'+n;}else{o='elem_'+(n.__FB_TOKEN||(n.__FB_TOKEN=[g++]))[0];c[o]=n;}return f[o]||(f[o]={});}function e(n){if(!n.nodeName)return false;try{if(null!=n.offsetParent)return false;}catch(o){}if(document.documentElement.contains){return !document.documentElement.contains(n);}else return (document.documentElement.compareDocumentPosition(n)&b);}var a={set:function(p,o,q){var n=d(p);n[o]=q;return p;},get:function(r,q,p){var o=d(r),s=o[q];if(typeof s==='undefined'&&r.getAttribute){var n=r.getAttribute('data-'+q);s=(null===n)?undefined:n;}if((p!==undefined)&&(s===undefined))s=o[q]=p;return s;},remove:function(p,o){var n=d(p),q=n[o];delete n[o];return q;},cleanup:function(){var o,n;for(o in c){n=c[o];if(e(n)){delete f[o];delete c[o];}}}};j.exports=a;});
__e("string-extensions",[],function(b,d,e,f,c,a){String.prototype.trim=function(){if(this==window)return null;return this.replace(/^\s*|\s*$/g,'');};a.trim=b.trim=function(h){try{return String(h.toString()).trim();}catch(g){return '';}};String.prototype.startsWith=function(g){if(this==window)return null;return this.substring(0,g.length)==g;};String.prototype.endsWith=function(g){if(this==window)return null;return this.length>=g.length&&this.substring(this.length-g.length)==g;};String.prototype.split=(function(g){return function(n,k){var h="";if(n===null||k===null){return [];}else if(typeof n=='string'){return g.call(this,n,k);}else if(n===undefined){return [this.toString()];}else if(n instanceof RegExp){if(!n._2||!n._1){h=n.toString().replace(/^[\S\s]+\//,"");if(!n._1)if(!n.global){n._1=new RegExp(n.source,"g"+h);}else n._1=1;}separator1=n._1===1?n:n._1;var o=(n._2?n._2:n._2=new RegExp("^"+separator1.source+"$",h));if(k===undefined||k<0){k=false;}else{k=Math.floor(k);if(!k)return [];}var l,m=[],j=0,i=0;while((k?i++<=k:true)&&(l=separator1.exec(this))){if((l[0].length===0)&&(separator1.lastIndex>l.index))separator1.lastIndex--;if(separator1.lastIndex>j){if(l.length>1)l[0].replace(o,function(){for(var p=1;p<arguments.length-2;p++)if(arguments[p]===undefined)l[p]=undefined;});m=m.concat(this.substring(j,l.index),(l.index===this.length?[]:l.slice(1)));j=separator1.lastIndex;}if(l[0].length===0)separator1.lastIndex++;}return (j===this.length)?(separator1.test("")?m:m.concat("")):(k?m:m.concat(this.substring(j)));}else return g.call(this,n,k);};})(String.prototype.split);},3);
__e("ua",[],function(b,d,e,f,c,a){var g={ie:function(){return g._populate()||this._ie;},ie64:function(){return g.ie()&&this._win64;},firefox:function(){return g._populate()||this._firefox;},opera:function(){return g._populate()||this._opera;},safari:function(){return g._populate()||this._safari;},chrome:function(){return g._populate()||this._chrome;},windows:function(){return g._populate()||this._windows;},osx:function(){return g._populate()||this._osx;},linux:function(){return g._populate()||this._linux;},iphone:function(){return g._populate()||this._iphone;},_populated:false,_populate:function(){if(g._populated)return;g._populated=true;var k=navigator.userAgent;var h=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(k);var j=/(Mac OS X)|(Windows)|(Linux)/.exec(k);var i=/\b(iPhone|iP[ao]d)/.exec(k);g._win64=!!(/Win64/.exec(k));if(h){g._ie=h[1]?parseFloat(h[1]):NaN;if(g._ie&&document.documentMode)g._ie=document.documentMode;g._firefox=h[2]?parseFloat(h[2]):NaN;g._opera=h[3]?parseFloat(h[3]):NaN;g._safari=h[4]?parseFloat(h[4]):NaN;if(g._safari){h=/(?:Chrome\/(\d+\.\d+))/.exec(k);g._chrome=h&&h[1]?parseFloat(h[1]):NaN;}else g._chrome=NaN;}else g._ie=g._firefox=g._opera=g._chrome=g._safari=NaN;if(j){if(j[1]){var l=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(k);g._osx=l?parseFloat(l[1].replace('_','.')):true;}else g._osx=false;g._windows=!!j[2];g._linux=!!j[3];}else g._osx=g._windows=g._linux=false;g._iphone=i;}};b.ua=c.exports=g;},3);
__e("evalGlobal",[],function(c,e,f,g,d,b){function a(j){if('string'!=typeof(j)){throw new Error('JS sent to eval_global is not a string.  Only strings '+'are permitted.');}else if(''==j)return;var k=document.createElement('script');k.type='text/javascript';try{k.appendChild(document.createTextNode(j));}catch(h){k.text=j;}var i=(document.getElementsByTagName("head")[0]||document.documentElement);i.appendChild(k);i.removeChild(k);}d.exports=a;});
__e("HTML",["function-extensions","string-extensions","ArrayUtils","ua","copyProperties","evalGlobal"],function(f,h,i,j,g,e){h("function-extensions");h("string-extensions");var a=h("ArrayUtils");var k=h("ua");var c=h("copyProperties");var d=h("evalGlobal");function b(l){if(l&&l.__html)l=l.__html;if(!(this instanceof b)){if(l instanceof b)return l;return new b(l);}this._content=l;this._defer=false;this._extra_action='';this._nodes=null;this._inline_js=bagofholding;this._ie_clone_bug=false;return this;}b.isHTML=function(l){return l&&(l instanceof b||l.__html!==undefined);};b.replaceJSONWrapper=function(l){return l&&l.__html!==undefined?new b(l.__html):l;};c(b.prototype,{toString:function(){var l=this._content||'';if(this._extra_action)l+='<script type="text/javascript">'+this._extra_action+'</scr'+'ipt>';return l;},setAction:function(l){this._extra_action=l;return this;},getAction:function(){this._fillCache();var l=function(){this._inline_js();d(this._extra_action);}.bind(this);if(this.getDeferred()){return l.defer.bind(l);}else return l;},setDeferred:function(l){this._defer=!!l;return this;},getDeferred:function(){return this._defer;},getContent:function(){return this._content;},getNodes:function(){this._fillCache();return this._nodes;},getRootNode:function(){return this.getNodes()[0];},ieCloneBug:function(){this._fillCache();return this._ie_clone_bug;},_fillCache:function(){if(null!==this._nodes)return;var o=this._content;if(!o){this._nodes=[];return;}o=o.replace(/(<(\w+)[^>]*?)\/>/g,function(w,x,y){return y.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?w:x+'></'+y+'>';});var s=o.trim().toLowerCase(),v=document.createElement('div'),m=false;var u=(!s.indexOf('<opt')&&[1,'<select multiple="multiple" class="__WRAPPER">','</select>'])||(!s.indexOf('<leg')&&[1,'<fieldset class="__WRAPPER">','</fieldset>'])||(s.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,'<table class="__WRAPPER">','</table>'])||(!s.indexOf('<tr')&&[2,'<table><tbody class="__WRAPPER">','</tbody></table>'])||((!s.indexOf('<td')||!s.indexOf('<th'))&&[3,'<table><tbody><tr class="__WRAPPER">','</tr></tbody></table>'])||(!s.indexOf('<col')&&[2,'<table><tbody></tbody><colgroup class="__WRAPPER">','</colgroup></table>'])||null;if(null===u){v.className='__WRAPPER';if(k.ie()){u=[0,'<span style="display:none">&nbsp;</span>',''];m=true;}else u=[0,'',''];}v.innerHTML=u[1]+o+u[2];while(u[0]--)v=v.lastChild;if(m)v.removeChild(v.firstChild);v.className!='__WRAPPER';if(0!==v.getElementsByTagName('option').length||0!==v.getElementsByTagName('object').length)this._ie_clone_bug=true;if(k.ie()){var t;if(!s.indexOf('<table')&&-1==s.indexOf('<tbody')){t=v.firstChild&&v.firstChild.childNodes;}else if(u[1]=='<table>'&&-1==s.indexOf('<tbody')){t=v.childNodes;}else t=[];for(var q=t.length-1;q>=0;--q)if(t[q].nodeName&&t[q].nodeName.toLowerCase()=='tbody'&&t[q].childNodes.length==0)t[q].parentNode.removeChild(t[q]);}var r=v.getElementsByTagName('script');var l=[];for(var p=0;p<r.length;p++)if(r[p].src){l.push(Bootloader.requestResource.bind(Bootloader,'js',r[p].src));}else l.push(d.bind(null,r[p].innerHTML));for(var p=r.length-1;p>=0;p--)r[p].parentNode.removeChild(r[p]);var n=function(){for(var w=0;w<l.length;w++)l[w]();};this._nodes=a.createFrom(v.childNodes);this._inline_js=n;}});g.exports=b;});
__e("ObjectUtils",["copyProperties","hasArrayNature"],function(d,g,h,i,f,c){var b=g("copyProperties");var e=g("hasArrayNature");var a={object:function(k){var j=new Function();j.prototype=k;return new j();},isScalar:function(j){return (/string|number|boolean/).test(typeof j);},getKeys:function(l){var k=[];for(var j in l)k.push(j);return k;},getValues:function(k){var l=[];for(var j in k)l.push(k[j]);return l;},countKeys:function(l){var j=0;for(var k in l)j++;return j;},areEqual:function(j,k){return JSON.stringify(j)==JSON.stringify(k);},merge:function(){var k={};for(var j=0;j<arguments.length;j++)b(k,arguments[j]);return k;},coalesce:function(){for(var j=0;j<arguments.length;++j)if(arguments[j]!=null)return arguments[j];return null;},createFrom:function(l,n){var m={};var k=e(n);if(typeof n=='undefined')n=true;for(var j=l.length;j--;)m[l[j]]=k?n[j]:n;return m;}};f.exports=a;});
__e("Intl",[],function(c,f,g,h,d,b){function a(i){if(typeof i!='string')return false;return i.match(new RegExp(a.punct_char_class+'['+')"'+"'"+'\u00BB'+'\u0F3B'+'\u0F3D'+'\u2019'+'\u201D'+'\u203A'+'\u3009'+'\u300B'+'\u300D'+'\u300F'+'\u3011'+'\u3015'+'\u3017'+'\u3019'+'\u301B'+'\u301E'+'\u301F'+'\uFD3F'+'\uFF07'+'\uFF09'+'\uFF3D'+'\s'+']*$'));}a.punct_char_class='['+'.!?'+'\u3002'+'\uFF01'+'\uFF1F'+'\u0964'+'\u2026'+'\u0EAF'+'\u1801'+'\u0E2F'+'\uFF0E'+']';function e(o){var m,l=o,n=window.intl_locale_rewrites,j,k;try{if(n){var pats=[],reps=[];for(var p in n.patterns){var pat=p,rep=n.patterns[p];for(j in n.meta){m=new RegExp(j.slice(1,-1),'g');pat=pat.replace(m,n.meta[j]);rep=rep.replace(m,n.meta[j]);}pats[pats.length]=pat;reps[reps.length]=rep;}for(var ii=0;ii<pats.length;ii++){m=new RegExp(pats[ii].slice(1,-1),'g');if(reps[ii]=='javascript'){k=o.match(m);j=k&&k[0];if(j)o=o.replace(m,j.slice(1).toLowerCase());}else o=o.replace(m,reps[ii]);}}}catch(i){o=l;}m=new RegExp('\x01','g');o=o.replace(m,'');return o;}d.exports={endsInPunct:a,phonologicalRules:e};});
__e("_tx",["Intl"],function(d,f,g,h,e,c){var a=f('Intl');function b(m,i){if(!i)return m;var l;for(var k in i){if(a.endsInPunct(i[k])){l=new RegExp('\\{'+k+'\\}'+a.endsInPunct.punct_char_class+'*','g');}else l=new RegExp('\\{'+k+'\\}','g');var j='\x01';m=m.replace(l,j+i[k]+j);}m=a.phonologicalRules(m);return m;}e.exports=b;});
__e("tx",["_tx"],function(c,e,f,g,d,b){var a=e('_tx');function h(j,i){if(typeof _string_table=='undefined')return;j=_string_table[j];return a(j,i);}h._=a;d.exports=h;});
__e("dom",["ArrayUtils","css-core","HTML","ObjectUtils","dom-core","copyProperties","ua","tx","_tx"],function(m,o,p,q,n,k){var c=o('ArrayUtils');var d=o('css-core');var f=o('HTML');var g=o('ObjectUtils');var a=o('dom-core').$;var j=o('copyProperties');var l=o('dom-core').ge;var s=o('ua');var r=o('tx');var h=o('_tx');function i(t){function u(v){return e.create('div',{},v).innerHTML;}return function(y,v){var w={};if(v)for(var x in v)w[x]=u(v[x]);return f(t(y,w));};}var e={find:function(t,v){var u=e.scry(t,v);return u[0];},scry:function(zc,zo){if(!zc||!zc.getElementsByTagName)return [];var zp=zo.split(' ');var w=[zc];var zb=!!zc.documentElement;for(var zf=0;zf<zp.length;zf++){if(w.length==0)break;if(zp[zf]=='')continue;var zn=zp[zf];var zl=[];var zw=false;if(zn.charAt(0)=='^')if(zf==0){zw=true;zn=zn.slice(1);}else return [];zn=zn.replace(/\./g,' .');zn=zn.replace(/\#/g,' #');zn=zn.replace(/\[/g,' [');var zs=zn.split(' ');var zt=zs[0]||'*';var zg=zs[1]&&zs[1].charAt(0)=='#';if(zg){var za=l(zs[1].slice(1),true);if(za&&('*'==zt||za.tagName.toLowerCase()==zt))for(var zj=0;zj<w.length;zj++)if(zw&&e.contains(za,w[zj])){zl=[za];break;}else if(document==w[zj]||e.contains(w[zj],za)){zl=[za];break;}}else{var zv=[];var v=w.length;for(var zh=0;zh<v;zh++){if(zw){var zd=[];var z=w[zh].parentNode;var t=zt=='*';while(e.isElementNode(z)){if(t||z.tagName.toLowerCase()==zt)zd.push(z);z=z.parentNode;}}else var zd=w[zh].getElementsByTagName(zt);var ze=zd.length;for(var zk=0;zk<ze;zk++)zv.push(zd[zk]);}for(var zq=1;zq<zs.length;zq++){var zr=zs[zq];var zi=zr.charAt(0)=='.';var x=zr.substring(1);for(var zh=0;zh<zv.length;zh++){var zu=zv[zh];if(!zu)continue;if(zi){if(!d.hasClass(zu,x))delete zv[zh];continue;}else{var y=zr.slice(1,zr.length-1);if(y.indexOf('=')==-1){if(zu.getAttribute(y)===null){delete zv[zh];continue;}}else{var zm=y.split('=');var u=zm[0];var zx=zm[1];zx=zx.slice(1,zx.length-1);if(zu.getAttribute(u)!=zx){delete zv[zh];continue;}}}}}for(var zh=0;zh<zv.length;zh++)if(zv[zh]){zl.push(zv[zh]);if(zw)break;}}w=zl;}return w;},getText:(function(){var t=document.createElement('div'),u=t.textContent!=null?'textContent':'innerText';return function(v){if(!v){return '';}else if(e.isTextNode(v)){return v.data;}else return v[u];};})(),getSelection:function(){var u=window.getSelection,t=document.selection;if(u){return u()+'';}else if(t)return t.createRange().text;return null;},create:function(v,t,u){v=document.createElement(v);if(t){t=j({},t);if(t.style){j(v.style,t.style);delete t.style;}for(var w in t)if(w.toLowerCase().indexOf('on')==0){if(!(typeof t[w]!='function'))if(window.Event&&Event.listen){Event.listen(v,w.substr(2),t[w]);}else v[w]=t[w];delete t[w];}j(v,t);}if(u!=undefined)e.setContent(v,u);return v;},prependContent:function(v,u){if(!e.isNode(v))throw new Error('DOM.prependContent: reference element is not a node');var t=function(w){if(v.firstChild){v.insertBefore(w,v.firstChild);}else v.appendChild(w);};return e._addContent(u,t,v);},insertAfter:function(v,u){if(!e.isNode(v)||!v.parentNode)throw new Error('DOM.insertAfter: reference element is not a node');var t=function(w){if(v.nextSibling){v.parentNode.insertBefore(w,v.nextSibling);}else v.parentNode.appendChild(w);};return e._addContent(u,t,v.parentNode);},insertBefore:function(u,v){if(!e.isNode(v)||!v.parentNode)throw new Error('DOM.insertBefore: reference element is not a node or '+'does not have a parent.');var t=function(w){v.parentNode.insertBefore(w,v);};return e._addContent(u,t,v.parentNode);},setContent:function(u,t){if(!e.isNode(u))throw new Error('DOM.setContent: reference element is not a node');e.empty(u);return e.appendContent(u,t);},appendContent:function(v,u){if(!e.isNode(v))throw new Error('DOM.appendContent: reference element is not a node');var t=function(w){v.appendChild(w);};return e._addContent(u,t,v);},replace:function(v,u){if(!e.isNode(v)||!v.parentNode)throw new Error('DOM.replace: reference element must be a node with a'+' parent');var t=function(w){v.parentNode.replaceChild(w,v);};return e._addContent(u,t,v.parentNode);},remove:function(t){t=a(t);if(t.parentNode)t.parentNode.removeChild(t);},empty:function(t){t=a(t);while(t.firstChild)e.remove(t.firstChild);},contains:function(u,t){u=l(u);t=l(t);if(!u||!t){return false;}else if(u===t){return true;}else if(e.isTextNode(u)){return false;}else if(e.isTextNode(t)){return e.contains(u,t.parentNode);}else if(u.contains){return u.contains(t);}else if(u.compareDocumentPosition){return !!(u.compareDocumentPosition(t)&16);}else return false;},getRootElement:function(){var t=null;if(window.Quickling&&Quickling.isActive())t=l('content');return t||document.body;},isNode:function(t){return !!(t&&(typeof Node=='object'?t instanceof Node:typeof t=="object"&&typeof t.nodeType=='number'&&typeof t.nodeName=='string'));},isNodeOfType:function(u,v){var w=c.createFrom(v).join('|').toUpperCase().split('|');var t=g.createFrom(w);return e.isNode(u)&&u.nodeName in t;},isElementNode:function(t){return e.isNode(t)&&t.nodeType==1;},isTextNode:function(t){return e.isNode(t)&&t.nodeType==3;},_addContent:function(w,t,zf){w=f.replaceJSONWrapper(w);if(w instanceof f&&-1==w.toString().indexOf('<scr'+'ipt')&&''==zf.innerHTML){var z=s.ie();if(!z||(z>7&&!e.isNodeOfType(zf,['table','tbody','thead','tfoot','tr','select','fieldset']))){var za=z?"<em style=\"display:none;\">&nbsp;</em>":"";zf.innerHTML=za+w;z&&zf.removeChild(zf.firstChild);return c.createFrom(zf.childNodes);}}else if(e.isTextNode(zf)){zf.data=w;return [w];}var zc,x=[],u=[];var y=document.createDocumentFragment();if(!(w instanceof Array))w=[w];for(var zb=0;zb<w.length;zb++){zc=f.replaceJSONWrapper(w[zb]);if(zc instanceof f){u.push(zc.getAction());var ze=zc.getNodes(),v;for(var zd=0;zd<ze.length;zd++){v=(s.safari()||(s.ie()&&zc.ieCloneBug()))?ze[zd]:ze[zd].cloneNode(true);x.push(v);y.appendChild(v);}}else if(g.isScalar(zc)){var zg=document.createTextNode(zc);x.push(zg);y.appendChild(zg);}else if(e.isNode(zc)){x.push(zc);y.appendChild(zc);}else if(!(zc instanceof Array))zc!==null;}t(y);for(var zb=0;zb<u.length;zb++)u[zb]();return x;},getDocumentScrollElement:function(t){t=t||document;if(d.hasClass(t.documentElement,'wrapped')){var u=t.getElementById('body');if(u)return u;}return !(s.chrome()||s.safari())&&t.compatMode==='CSS1Compat'?t.documentElement:t.body;},getDocumentBodyElement:function(t){t=t||document;if(d.hasClass(t.documentElement,'wrapped')){var u=t.getElementById('body');if(u)return u;}return t.body;}};e.tx=i(r);e.tx._=e._tx=i(h);function b(v,t,u){if(typeof t!='object'||e.isNode(t)||t instanceof Array||f.isHTML(t)){u=t;t=null;}return e.create(v,t,u);}m.$N=e.$N=b;m.DOM=n.exports=e;},3);
__e("SystemEvents",["Arbiter","Env","ua","Util","copyProperties"],function(s,w,x,y,u,r){var a=w('Arbiter');var c=w('Env');var za=w('ua');var e=w('Util');var q=w('copyProperties');var d=new a();var g=[],b=1000;setInterval(function(){for(var zb=0;zb<g.length;zb++)g[zb]();},b,false);function i(){return (/c_user=(\d+)/.test(document.cookie)&&RegExp.$1)||0;}var m=c.user;var l=navigator.onLine;g.push(function(){var zb=navigator.onLine;if(l!=zb){d.inform(d.ONLINE,zb);l=zb;}});var p=m;g.push(function(){var zb=i();if(p!=zb){d.inform(d.USER,zb);p=zb;}});var n=Date.now();function f(){var zd=Date.now();var zb=zd-n;var zc=zb<0||zb>10000;n=zd;if(zc)d.inform(d.TIME_TRAVEL,zb);return zc;}g.push(f);function v(zb){var zc=zb?{line:zb.lineNumber||zb.line,message:zb.message,name:zb.name,script:zb.fileName||zb.sourceURL,stack:zb.stackTrace||zb.stack}:{};if(za.chrome()&&zb.stack&&/(\w{3,5}:\/\/[^:]+):(\d+)/.test(zb.stack)){zc.script=RegExp.$1;zc.line=parseInt(RegExp.$2,10);}for(var zd in zc)if(zc[zd]==null)delete zc[zd];return zc;}var h=null;var o=false;function z(zc,zb){if(za.ie())return zc;if(/nocatch/.test(location.search))return zc;return function(){if(o)return zc.apply(this,arguments);try{o=true;var res=zc.apply(this,arguments);o=false;return res;}catch(zd){o=false;h=d.normalizeError(zd);if(zb)zb(h);throw zd;}};}function t(zb){if(zb instanceof Error)zb=v(zb);d.inform(d.ERROR,zb);}function j(zd,ze,zc){var zb=h||{message:zd,script:ze,line:zc};h=null;zb.script=zb.script||ze;zb.line=zb.line||zc;t(zb);}function k(){window.onerror=j;}a.setErrorHandler(d.informError);k();g.push(k);s.SystemEvents=u.exports=q(d,{USER:'SystemEvents/USER',ONLINE:'SystemEvents/ONLINE',TIME_TRAVEL:'SystemEvents/TIME_TRAVEL',ERROR:'SystemEvents/ERROR',trapError:z,normalizeError:v,informError:t,isPageOwner:function(zb){return zb||i()==m;},checkTimeTravel:f});},3);
__e("event-extensions",["event-form-bubbling","DataStore","dom","ObjectUtils","Parent","SystemEvents","ua","dom-core","copyProperties","userAction"],function(m,s,t,u,q,l){s('event-form-bubbling');var e=s('DataStore');var d=s('dom');var g=s('ObjectUtils');var h=s('Parent');var i=s('SystemEvents');var w=s('ua');var a=s('dom-core').$;var k=s('copyProperties');var x=s('userAction');Event.DATASTORE_KEY='Event.listeners';if(!Event.prototype)Event.prototype={};function c(z,za,y){this.target=z;this.type=za;this.data=y;}c.prototype={getData:function(){this.data=this.data||{};return this.data;},stop:function(){this.cancelBubble=true;this.stopPropagation&&this.stopPropagation();return this;},prevent:function(){this.returnValue=false;this.preventDefault&&this.preventDefault();return this;},kill:function(){this.stop().prevent();return false;},getTarget:function(){var y=this.target||this.srcElement;return y?a(y):null;}};function b(y){if(y instanceof c)return y;y=y||window.event||{};if(!y._inherits_from_prototype)for(var za in Event.prototype)try{y[za]=Event.prototype[za];}catch(z){}return y;}k(Event.prototype,{_inherits_from_prototype:true,getRelatedTarget:function(){var y=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return y?a(y):null;},getModifiers:function(){var y={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};y.access=w.osx()?y.control:y.alt;y.any=y.control||y.shift||y.alt||y.meta;return y;}});k(Event.prototype,c.prototype);k(Event,{listen:function(z,zj,zb,zf){if(typeof z=='string')z=a(z);if(typeof zf=='undefined')zf=Event.Priority.NORMAL;if(typeof zj=='object'){var za={};for(var zi in zj)za[zi]=Event.listen(z,zi,zj[zi],zf);return za;}if(zj.match(/^on/i))throw new TypeError("Bad event name `"+event+"': use `click', not `onclick'.");if(z.nodeName=='LABEL'&&zj=='click'){var ze=z.getElementsByTagName('input');z=ze.length==1?ze[0]:z;}else if(z===window&&zj==='scroll'){var zh=d.getDocumentScrollElement();if(zh!==document.documentElement&&zh!==document.body)z=zh;}var zc=e.get(z,n,{});if(v[zj]){var y=v[zj];zj=y.base;zb=y.wrap(zb);}j(z,zj);var zk=zc[zj];if(!(zf in zk))zk[zf]=[];var zd=zk[zf].length,zg=new f(zb,zk[zf],zd);zk[zf].push(zg);return zg;},stop:function(y){return b(y).stop();},prevent:function(y){return b(y).prevent();},kill:function(y){return b(y).kill();},getKeyCode:function(event){event=b(event);if(!event)return false;switch(event.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34;}if(event.shiftKey)switch(event.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null;}return event.keyCode;},getPriorities:function(){if(!r){var y=g.getValues(Event.Priority);y.sort(function(z,za){return z-za;});r=y;}return r;},fire:function(zb,zd,y){var z=new c(zb,zd,y);var zc;do{var za=Event.__getHandler(zb,zd);if(za)zc=za(z);zb=zb.parentNode;}while(zb&&zc!==false&&!z.cancelBubble);return zc!==false;},__fire:function(y,za,event){var z=Event.__getHandler(y,za);if(z)return z(b(event));},__getHandler:function(y,z){return e.get(y,Event.DATASTORE_KEY+z);}});var r=null,n=Event.DATASTORE_KEY;var o=function(y){return function(z){if(!d.contains(this,z.getRelatedTarget()))return y.call(this,z);};};var v={mouseenter:{base:'mouseover',wrap:o},mouseleave:{base:'mouseout',wrap:o}};var j=function(y,ze){var z='on'+ze;var zc=p.bind(y);var zb=e.get(y,n);if(ze in zb)return;zb[ze]={};if(y.addEventListener){y.addEventListener(ze,zc,false);}else if(y.attachEvent)y.attachEvent(z,zc);e.set(y,n+ze,zc);if(y[z]){var zd=y===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL;var za=y[z];y[z]=null;Event.listen(y,ze,za,zd);}if(y.nodeName==='FORM'&&ze==='submit')Event.listen(y,ze,Event.__bubbleSubmit.curry(y),Event.Priority._BUBBLE);};var p=function(event){event=b(event);var zf=event.type;if(!e.get(this,n))throw new Error("Bad listenHandler context.");var zg=e.get(this,n)[zf];if(!zg)throw new Error("No registered handlers for `"+zf+"'.");if(zf=='click'){var za=h.byTag(event.getTarget(),'a');var zh=x('click',za,event).set_namespace('evt_ext');if(window.ArbiterMonitor)ArbiterMonitor.initUA(zh,[za]);}var zc=Event.getPriorities();for(var zb=0;zb<zc.length;zb++){var zd=zc[zb];if(zd in zg){var y=zg[zd];for(var z=0;z<y.length;z++){if(!y[z])continue;var ze=y[z].fire(this,event);if(ze===false){return event.kill();}else if(event.cancelBubble)event.stop();}}}return event.returnValue;};Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1000};function f(z,y,za){this._handler=z;this._container=y;this._index=za;}f.prototype={remove:function(){delete this._handler;delete this._container[this._index];},fire:function(y,event){var z=i.trapError(this._handler,function(za){za.event_type=event.type;za.dom_element=y.name||y.id;za.category='eventhandler';});return z.call(y,event);}};m.$E=l.$E=b;});
__e("css",["dom","css-core","copyProperties"],function(e,g,h,i,f,d){var b=g('dom');var a=g('css-core');var c=g('copyProperties');c(a,{shown:function(j){return !a.hasClass(j,'hidden_elem');},toggle:function(j){a.conditionShow(j,!a.shown(j));},setClass:function(k,j){$(k).className=j||'';return k;},setStyle:function(j,k,l){switch(k){case 'opacity':j.style.opacity=l;j.style.filter=l!==''?'alpha(opacity='+l*100+')':'';break;case 'float':j.style.cssFloat=j.style.styleFloat=l;break;default:k=k.replace(/-(.)/g,function(m,n){return n.toUpperCase();});j.style[k]=l;}return j;},getStyle:function(k,m){k=$(k);m=m.replace(/-(.)/g,function(n,o){return o.toUpperCase();});function l(n){return n.replace(/([A-Z])/g,'-$1').toLowerCase();}if(window.getComputedStyle){var j=window.getComputedStyle(k,null);if(j)return j.getPropertyValue(l(m));}if(document.defaultView&&document.defaultView.getComputedStyle){var j=document.defaultView.getComputedStyle(k,null);if(j)return j.getPropertyValue(l(m));if(m=="display")return "none";}if(k.currentStyle)return k.currentStyle[m];return k.style&&k.style[m];},getStyleFloat:function(j,k){return parseFloat(a.getStyle(j,k),10);},getOpacity:function(j){j=$(j);var k=a.getStyle(j,'filter');var l=null;if(k&&(l=/(\d+(?:\.\d+)?)/.exec(k))){return parseFloat(l.pop())/100;}else if(k=a.getStyle(j,'opacity')){return parseFloat(k);}else return 1;},isFixed:function(j){while(j&&j!==document.documentElement){if(a.getStyle(j,'position')==='fixed')return true;j=j.parentNode;}return false;},getScrollParent:(function(){function j(k,m){var l=a.getStyle(k,m);return (l==='auto'||l==='scroll');}return function(k){if(!k)return null;while(k!==document.body){if(j(k,'overflow')||j(k,'overflowY')||j(k,'overflowX'))return k;k=k.parentNode;}return window;};})()});f.exports=a;},3);
__e("AsyncDOM",["css","dom","onload"],function(f,h,i,j,g,e){var b=h("css");var c=h("dom");var d=h("onload");var a={invoke:function(p,r){for(var n=0;n<p.length;++n){var o=p[n];var k=o[0];var s=o[1];var q=o[2];var l=o[3];var m=(q&&r)||null;if(s)m=c.scry(m||document.documentElement,s)[0];switch(k){case 'eval':(new Function(l)).apply(m);break;case 'hide':b.hide(m);break;case 'show':b.show(m);break;case 'setContent':c.setContent(m,l);break;case 'appendContent':c.appendContent(m,l);break;case 'prependContent':c.prependContent(m,l);break;case 'insertAfter':c.insertAfter(m,l);break;case 'insertBefore':c.insertBefore(l,m);break;case 'remove':c.remove(m);break;case 'replace':c.replace(m,l);break;default:}}}};g.exports=a;});
__e("AsyncResponse",["Env","copyProperties","tx"],function(e,g,h,i,f,d){var b=g("Env");var c=g("copyProperties");e.tx=g("tx");function a(k,j){c(this,{error:0,errorSummary:null,errorDescription:null,onload:null,replay:false,payload:j||null,request:k||null,silentError:false,is_last:true});return this;}c(a,{defaultErrorHandler:function(k){try{if(!k.silentError){a.verboseErrorHandler(k);}else k.logErrorByGroup('silent',10);}catch(j){alert(k);}},verboseErrorHandler:function(k){try{var summary=k.getErrorSummary();var desc=k.getErrorDescription();k.logErrorByGroup('popup',10);if(k.silentError&&desc=='')desc="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";Bootloader.loadComponents('dialog',function(){new Dialog().setTitle(summary).setBody(desc).setButtons([Dialog.OK]).setModal(true).setCausalElement(this.relativeTo).show();});}catch(j){alert(k);}}});c(a.prototype,{getRequest:function(){return this.request;},getPayload:function(){return this.payload;},getError:function(){return this.error;},getErrorSummary:function(){return this.errorSummary;},setErrorSummary:function(j){j=(j===undefined?null:j);this.errorSummary=j;return this;},getErrorDescription:function(){return this.errorDescription;},getErrorIsWarning:function(){return this.errorIsWarning;},logError:function(j,l){if(window.send_error_signal){var k={err_code:this.error,vip:(b.vip||'-')};if(l!==undefined){k.duration=l.duration;k.xfb_ip=l.xfb_ip;}var m=this.request.getURI();k.path=m||'-';k.aid=this.request.userActionID;if(m&&m.indexOf('scribe_endpoint.php')!=-1)j='async_error_double';send_error_signal(j,JSON.stringify(k));}},logErrorByGroup:function(k,j){if(Math.floor(Math.random()*j)==0)if(this.error==1357010||this.error<15000){this.logError('async_error_oops_'+k);}else this.logError('async_error_logic_'+k);}});f.exports=a;});
__e("Cookie",["Env"],function(d,f,g,h,e,c){var b=f("Env");var a={set:function(i,j,l,m,n){if(b.no_cookies&&i!='tpa')return;var k;if(l){var o=new Date();k=new Date();k.setTime(o.getTime()+l);}document.cookie=i+"="+encodeURIComponent(j)+"; "+(l?"expires="+k.toGMTString()+"; ":"")+"path="+(m||'/')+"; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1')+(n?"; secure":"");},clear:function(i){document.cookie=i+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; "+"path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');},get:function(l){var m=l+"=";var j=document.cookie.split(';');for(var k=0;k<j.length;k++){var i=j[k];while(i.charAt(0)==' ')i=i.substring(1,i.length);if(i.indexOf(m)===0)return decodeURIComponent(i.substring(m.length,i.length));}return null;}};e.exports=a;});
__e("JSCC",["array-extensions","Util","isEmpty"],function(f,k,l,m,j,d){k("array-extensions");var b=k("Util");var h=k("isEmpty");var e={};var i={};function c(o){var p;var n=false;return function(){if(!n){p=o();n=true;}return p;};}function g(n,p){if(h(n))return;for(var o in n){e[o]=c(n[o]);if(p){if(!i[p])i[p]=[];i[p].push(o);}}}var a={get:function(n){!e[n];return e[n]();},init:function(n){g(n);},initForPagelet:function(o,n){g(n,o);},clearForPagelet:function(p){if(i[p]){for(var n=0;n<i[p].length;n++){var o=i[p][n];delete e[o];}delete i[p];}}};j.exports=a;});
__e("URI",["copyProperties"],function(d,f,g,h,e,c){var b=f("copyProperties");function a(i){if(!(this instanceof a))return new a(i||window.location.href);this.parse(i||'');}b(a,{getRequestURI:function(i,j){i=i===undefined||i;if(i&&window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getCurrentURI(!!j).getQualifiedURI();}else return new a(window.location.href);},getMostRecentURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getMostRecentURI().getQualifiedURI();}else return new a(window.location.href);},getNextURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getNextURI().getQualifiedURI();}else return new a(window.location.href);},expression:/(((\w+):\/\/)([^\/:]*)(:(\d+))?)?([^#?]*)(\?([^#]*))?(#(.*))?/,arrayQueryExpression:/^(\w+)((?:\[\w*\])+)=?(.*)/,explodeQuery:function(o){if(!o)return {};var p={};o=o.replace(/%5B/ig,'[').replace(/%5D/ig,']');o=o.split('&');for(var j=0,l=o.length;j<l;j++){var m=o[j].match(a.arrayQueryExpression);if(!m){var r=o[j].split('=');p[a.decodeComponent(r[0])]=r[1]===undefined?null:a.decodeComponent(r[1]);}else{var k=m[2].split(/\]\[|\[|\]/).slice(0,-1);var n=m[1];var s=a.decodeComponent(m[3]||'');k[0]=n;var q=p;for(var i=0;i<k.length-1;i++)if(k[i]){if(q[k[i]]===undefined)if(k[i+1]&&!k[i+1].match(/^\d+$/)){q[k[i]]={};}else q[k[i]]=[];q=q[k[i]];}else{if(k[i+1]&&!k[i+1].match(/^\d+$/)){q.push({});}else q.push([]);q=q[q.length-1];}if(q instanceof Array&&k[k.length-1]===''){q.push(s);}else q[k[k.length-1]]=s;}}return p;},implodeQuery:function(n,m,i){m=m||'';if(i===undefined)i=true;var o=[];if(n===null||n===undefined){o.push(i?a.encodeComponent(m):m);}else if(n instanceof Array){for(var k=0;k<n.length;++k)try{if(n[k]!==undefined)o.push(a.implodeQuery(n[k],m?(m+'['+k+']'):k));}catch(j){}}else if(typeof(n)=='object'){if(('nodeName' in n)&&('nodeType' in n)){o.push('{node}');}else for(var l in n)try{if(n[l]!==undefined)o.push(a.implodeQuery(n[l],m?(m+'['+l+']'):l));}catch(j){}}else if(i){o.push(a.encodeComponent(m)+'='+a.encodeComponent(n));}else o.push(m+'='+n);return o.join('&');},encodeComponent:function(l){var k=String(l).split(/([\[\]])/);for(var i=0,j=k.length;i<j;i+=2)k[i]=encodeURIComponent(k[i]);return k.join('');},decodeComponent:function(i){return decodeURIComponent(i.replace(/\+/g,' '));},INVALID_DOMAIN:'invalid.invalid',sanitizeDomain:function(i){var j=new RegExp('[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f'+'\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF'+'\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]');if(j.test(i)){return a.INVALID_DOMAIN;}else return i;},fromJSON:function(i){return new a(i.url);}});b(a.prototype,{parse:function(j){var i=j.toString().match(a.expression);b(this,{protocol:i[3]||'',domain:a.sanitizeDomain(i[4]||''),port:i[6]||'',path:i[7]||'',query_s:i[9]||'',fragment:i[11]||''});return this;},setProtocol:function(i){this.protocol=i;return this;},getProtocol:function(){return this.protocol;},setQueryData:function(i){this.query_s=a.implodeQuery(i);return this;},addQueryData:function(i){return this.setQueryData(b(this.getQueryData(),i));},removeQueryData:function(j){if(!(j instanceof Array))j=[j];var l=this.getQueryData();for(var i=0,k=j.length;i<k;++i)delete l[j[i]];return this.setQueryData(l);},getQueryData:function(){return a.explodeQuery(this.query_s);},setFragment:function(i){this.fragment=i;return this;},getFragment:function(){return this.fragment;},setDomain:function(i){this.domain=a.sanitizeDomain(i);return this;},getDomain:function(){return this.domain;},setPort:function(i){this.port=i;return this;},getPort:function(){return this.port;},setPath:function(i){this.path=i;return this;},getPath:function(){return this.path.replace(/^\/+/,'/');},isEmpty:function(){return !(this.path||this.protocol||this.domain||this.port||this.query_s||this.fragment);},toString:function(){var i='';this.protocol&&(i+=this.protocol+'://');this.domain&&(i+=this.domain);this.port&&(i+=':'+this.port);if(this.domain&&!this.path)i+='/';this.path&&(i+=this.path);this.query_s&&(i+='?'+this.query_s);this.fragment&&(i+='#'+this.fragment);return i;},valueOf:function(){return this.toString();},isFacebookURI:function(){if(!a._facebookURIRegex)a._facebookURIRegex=new RegExp('(^|\\.)facebook\\.com([^.]*)$','i');return (!this.domain||a._facebookURIRegex.test(this.domain));},isQuicklingEnabled:function(){return window.Quickling&&Quickling.isActive()&&Quickling.isPageActive(this);},getRegisteredDomain:function(){if(!this.domain)return '';if(!this.isFacebookURI())return null;var j=this.domain.split('.');var i=j.indexOf('facebook');return j.slice(i).join('.');},getUnqualifiedURI:function(){return new a(this).setProtocol(null).setDomain(null).setPort(null);},getQualifiedURI:function(){var j=new a(this);if(!j.getDomain()){var i=a();j.setProtocol(i.getProtocol()).setDomain(i.getDomain()).setPort(i.getPort());}return j;},isSameOrigin:function(i){var j=i||window.location.href;if(!(j instanceof a))j=new a(j.toString());if(this.getProtocol()&&this.getProtocol()!=j.getProtocol())return false;if(this.getDomain()&&this.getDomain()!=j.getDomain())return false;return true;},go:function(i){goURI(this,i);},setSubdomain:function(j){var k=new a(this).getQualifiedURI();var i=k.getDomain().split('.');if(i.length<=2){i.unshift(j);}else i[0]=j;return k.setDomain(i.join('.'));},getSubdomain:function(){if(!this.getDomain())return '';var i=this.getDomain().split('.');if(i.length<=2){return '';}else return i[0];},setSecure:function(i){return this.setProtocol(i?'https':'http');},isSecure:function(){return this.getProtocol()=='https';}});e.exports=a;});
__e("goURI",[],function(b,e,f,g,d,a){function c(i,h){i=i.toString();if(!h&&b.PageTransitions&&PageTransitions.isInitialized()){PageTransitions.go(i);}else if(window.location.href==i){window.location.reload();}else window.location.href=i;}d.exports=c;});
__e("invokeCallbacks",[],function(b,e,f,g,d,a){function c(i,k){if(i)for(var j=0;j<i.length;j++)try{(new Function(i[j])).apply(k);}catch(h){}}d.exports=c;});
__e("AsyncRequest",["array-extensions","event-extensions","json","Arbiter","AsyncDOM","AsyncResponse","bootloader","Cookie","css-core","dom","Env","JSCC","Parent","URI","Util","bind","copyProperties","evalGlobal","goURI","invokeCallbacks","isEmpty"],function(global,require,requireDynamic,requireLazy,module,exports){require("array-extensions");require("event-extensions");require("json");var Arbiter=require("Arbiter");var AsyncDOM=require("AsyncDOM");var AsyncResponse=require("AsyncResponse");var Bootloader=require("bootloader");var Cookie=require("Cookie");var CSS=require("css-core");var DOM=require("dom");var Env=require("Env");var JSCC=require("JSCC");var Parent=require("Parent");var URI=require("URI");var Util=require("Util");var bind=require("bind");var copyProperties=require("copyProperties");var evalGlobal=require("evalGlobal");var goURI=require("goURI");var invokeCallbacks=require("invokeCallbacks");var isEmpty=require("isEmpty");function AsyncRequest(uri){var dispatchResponse=bind(this,function(asyncResponse){try{this.clearStatusIndicator();if(!this.isRelevant()){invokeErrorHandler(1010);return;}if(this.initialHandler(asyncResponse)!==false){clearTimeout(this.timer);if(asyncResponse.jscc_map){var jscc_map=eval(asyncResponse.jscc_map);JSCC.init(jscc_map);}if(this.handler)try{var suppress_onload=this.handler(asyncResponse);}catch(exception){asyncResponse.is_last&&this.finallyHandler(asyncResponse);throw exception;}if(suppress_onload!==AsyncRequest.suppressOnloadToken){var domOps=asyncResponse.domops;if(domOps)AsyncDOM.invoke(domOps,this.getRelativeTo());asyncResponse.jscalls&&invokeCallbacks([asyncResponse.jscalls]);var onload=asyncResponse.onload;if(onload)for(var ii=0;ii<onload.length;ii++)try{(new Function(onload[ii])).apply(this);}catch(exception){}if(this.lid)Arbiter.inform('tti_ajax',{s:this.lid,d:[this._sendTimeStamp||0,(this._sendTimeStamp&&this._responseTime)?(this._responseTime-this._sendTimeStamp):0]},Arbiter.BEHAVIOR_EVENT);var onafterload=asyncResponse.onafterload;if(onafterload)for(var ii=0;ii<onafterload.length;ii++)try{(new Function(onafterload[ii])).apply(this);}catch(exception){}}asyncResponse.is_last&&this.finallyHandler(asyncResponse);}}catch(exception){}});var dispatchErrorResponse=bind(this,function(asyncResponse,isTransport){try{this.clearStatusIndicator();var async_error=asyncResponse.getError();if(this._sendTimeStamp){var _duration=Date.now()-this._sendTimeStamp;var xfb_ip=this._xFbServer||'-';asyncResponse.logError('async_error',{duration:_duration,xfb_ip:xfb_ip});}else asyncResponse.logError('async_error');if((!this.isRelevant())||async_error===1010)return;if(async_error==1357008||async_error==1357007||async_error==1442002||async_error==1357001){var is_confirmation=false;if(async_error==1357008||async_error==1357007)is_confirmation=true;var payload=asyncResponse.getPayload();this._displayServerDialog(payload.__dialog,is_confirmation);}else if(this.initialHandler(asyncResponse)!==false){clearTimeout(this.timer);try{if(isTransport){this.transportErrorHandler(asyncResponse);}else this.errorHandler(asyncResponse);}catch(exception){this.finallyHandler(asyncResponse);throw exception;}this.finallyHandler(asyncResponse);}}catch(exception){}});var _interpretTransportResponse=bind(this,function(){if(this.getOption('suppressEvaluation')){var r=new AsyncResponse(this,this.transport);return {asyncResponse:r};}var _sendError=function(p,error_code,str){if(!window.send_error_signal)return;if(this._xFbServer){error_code='1008_'+error_code;}else error_code='1012_'+error_code;send_error_signal('async_xport_resp',error_code+':'+(this._xFbServer||'-')+':'+p.getURI()+':'+str.length+':'+str.substr(0,1600));};var shield="for (;;);";var shieldlen=shield.length;var text=this.transport.responseText;if(text.length<=shieldlen){_sendError(this,'empty',text);return {transportError:'Response too short on async to '+this.getURI()};}var offset=0;while(text.charAt(offset)==" "||text.charAt(offset)=="\n")offset++;offset&&text.substring(offset,offset+shieldlen)==shield;var safeResponse=text.substring(offset+shieldlen);try{var response=eval('('+safeResponse+')');}catch(exception){_sendError(this,'excep',text);return {transportError:'eval() failed on async to '+this.getURI()};}return interpretResponse(response);});var interpretResponse=bind(this,function(response){if(response.redirect)return {redirect:response.redirect};var r=new AsyncResponse(this);if(response.__ar!=1){r.payload=response;}else{copyProperties(r,response);if(response.tplts)if(window.DynaTemplate)DynaTemplate.registerTemplates(response.tplts);}return {asyncResponse:r};});var invokeResponseHandler=bind(this,function(interp){if(typeof(interp.redirect)!='undefined'){(function(){this.setURI(interp.redirect).send();}).bind(this).defer();return;}if(this.handler||this.errorHandler||this.transportErrorHandler)if(typeof(interp.asyncResponse)!='undefined'){var r=interp.asyncResponse;if(!this.isRelevant()){invokeErrorHandler(1010);return;}if(r.inlinejs)evalGlobal(r.inlinejs);if(r.lid){this._responseTime=Date.now();if(window.CavalryLogger)this.cavalry=CavalryLogger.getInstance(r.lid);this.lid=r.lid;}if(r.getError()&&!r.getErrorIsWarning()){var fn=dispatchErrorResponse;}else var fn=dispatchResponse;Bootloader.setResourceMap(r.resource_map);if(r.bootloadable)Bootloader.enableBootload(r.bootloadable);fn=fn.shield(null,r);fn=fn.defer.bind(fn);var is_transitional=false;if(this.preBootloadHandler)is_transitional=this.preBootloadHandler(r);r.css=r.css||[];r.js=r.js||[];Bootloader.loadResources(r.css.concat(r.js),fn,is_transitional,this.getURI());}else if(typeof(interp.transportError)!='undefined'){if(this._xFbServer){invokeErrorHandler(1008);}else invokeErrorHandler(1012);}else invokeErrorHandler(1007);});var invokeErrorHandler=bind(this,function(explicitError){try{if(!window.loaded&&!this.getOption('handleErrorAfterUnload'))return;}catch(ex){return;}var r=new AsyncResponse(this);var err;try{err=explicitError||this.transport.status||1004;}catch(ex){err=1005;}if(this._requestAborted)err=1011;try{if(this.responseText=='')err=1002;}catch(ignore){}if(this.transportErrorHandler){var desc,summary;var silent=true;if(false===navigator.onLine){summary="No Network Connection";desc="Your browser appears to be offline. Please check your internet connection and try again.";err=1006;}else if(err>=300&&err<=399){summary="Redirection";desc="Your access to Facebook was redirected or blocked by a third party at this time, please contact your ISP or reload. ";redir_url=this.transport.getResponseHeader("Location");if(redir_url)goURI(redir_url,true);silent=true;}else{summary="Oops!";desc="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";}!this.getOption('suppressErrorAlerts');copyProperties(r,{error:err,errorSummary:summary,errorDescription:desc,silentError:silent});dispatchErrorResponse(r,true);}});var handleResponse=function(response){var asyncResponse=this.interpretResponse(response);this.invokeResponseHandler(asyncResponse);};var onStateChange=function(){try{if(this.transport.readyState==4){AsyncRequest._inflightPurge();try{if(typeof(this.transport.getResponseHeader)!='undefined'&&this.transport.getResponseHeader('X-FB-Debug'))this._xFbServer=this.transport.getResponseHeader('X-FB-Debug');}catch(ex){}if(this.transport.status>=200&&this.transport.status<300){AsyncRequest.lastSuccessTime=Date.now();invokeResponseHandler(_interpretTransportResponse());}else if(ua.safari()&&(typeof(this.transport.status)=='undefined')){invokeErrorHandler(1002);}else if(window.Env&&window.Env.retry_ajax_on_network_error&&this.transport.status in {0:1,12029:1,12030:1,12031:1,12152:1}&&this.remainingRetries>0){--this.remainingRetries;delete this.transport;this.send(true);return;}else invokeErrorHandler();if(this.getOption('asynchronous')!==false)delete this.transport;}}catch(exception){try{if(!window.loaded)return;}catch(ex){return;}delete this.transport;if(this.remainingRetries>0){--this.remainingRetries;this.send(true);}else{!this.getOption('suppressErrorAlerts');if(window.send_error_signal)send_error_signal('async_xport_resp','1007:'+(this._xFbServer||'-')+':'+this.getURI()+':'+exception.message);invokeErrorHandler(1007);}}};var onJSONPResponse=function(data,more_chunked_response){var is_first=(this.is_first===undefined);this.is_first=is_first;if(this.transportIframe&&!more_chunked_response){if(this.cavalry)this.cavalry.collectBrowserTiming(this.transportIframe.contentWindow);(function(x){document.body.removeChild(x);}).bind(null,this.transportIframe).defer();}if(ua.ie()>=9&&window.JSON)data=window.JSON.parse(window.JSON.stringify(data));var r=this.interpretResponse(data);r.asyncResponse.is_first=is_first;r.asyncResponse.is_last=!more_chunked_response;this.invokeResponseHandler(r);return more_chunked_response;};copyProperties(this,{onstatechange:onStateChange,onjsonpresponse:onJSONPResponse,invokeResponseHandler:invokeResponseHandler,interpretResponse:interpretResponse,handleResponse:handleResponse,transport:null,method:'POST',uri:'',timeout:null,timer:null,initialHandler:bagofholding,handler:null,errorHandler:null,transportErrorHandler:null,timeoutHandler:null,finallyHandler:bagofholding,serverDialogCancelHandler:null,relativeTo:null,statusElement:null,statusClass:'',data:{},file:null,context:{},readOnly:false,writeRequiredParams:['post_form_id'],remainingRetries:0,option:{asynchronous:true,suppressErrorHandlerWarning:false,suppressEvaluation:false,suppressErrorAlerts:false,retries:0,jsonp:false,bundle:false,useIframeTransport:false,tfbEndpoint:true,handleErrorAfterUnload:false},userActionID:'-'});this.errorHandler=AsyncResponse.defaultErrorHandler;this.transportErrorHandler=bind(this,'errorHandler');if(uri!=undefined)this.setURI(uri);return this;}Arbiter.subscribe("page_transition",function(type,message){AsyncRequest._id_threshold=message.id;});copyProperties(AsyncRequest,{receiveJSONPResponse:function(id,data,more_chunked_response){if(this._JSONPReceivers[id]){if(!this._JSONPReceivers[id](data,more_chunked_response))delete this._JSONPReceivers[id];}else if(window.logJSError&&!more_chunked_response){var uri=(data.payload&&data.payload.uri)||'';logJSError('ajax',{error:'UnexpectedJsonResponse',extra:{id:id,uri:uri}});}},_bundleRequest:function(request){if(request.getOption('jsonp')||request.getOption('useIframeTransport')){request.setOption('bundle',false);return false;}else if(!request.uri.isFacebookURI()){request.setOption('bundle',false);return false;}else if(!request.getOption('asynchronous')){request.setOption('bundle',false);return false;}var path=request.uri.getPath();if(!AsyncRequest._bundleTimer)AsyncRequest._bundleTimer=setTimeout(function(){AsyncRequest._sendBundledRequests();},0);AsyncRequest._allBundledRequests.push([path,request]);return true;},_sendBundledRequests:function(){clearTimeout(AsyncRequest._bundleTimer);AsyncRequest._bundleTimer=null;var bundled_requests=AsyncRequest._allBundledRequests;AsyncRequest._allBundledRequests=[];if(bundled_requests.length==1){var request=bundled_requests[0][1];request.setOption('bundle',false).send();return request;}if(bundled_requests.length===0)return null;var data=[];for(var ii=0;ii<bundled_requests.length;ii++)data.push([bundled_requests[ii][0],URI.implodeQuery(bundled_requests[ii][1].data)]);var query_data={data:data};var request=new AsyncRequest();request.setURI('/ajax/proxy.php').setData(query_data).setMethod('POST').setInitialHandler(bagof(true)).setAllowCrossPageTransition(true).setHandler(function(r){var payload=r.getPayload();var responses=payload.responses;if(responses.length!=bundled_requests.length){return;}else for(var ii=0;ii<bundled_requests.length;ii++){var path=bundled_requests[ii][0];var request=bundled_requests[ii][1];request.id=this.id;if(responses[ii][0]!=path){request.invokeResponseHandler({transportError:'Wrong response order in bundled request to '+path});continue;}var asyncResponse=request.interpretResponse(responses[ii][1]);request.invokeResponseHandler(asyncResponse);}}).setTransportErrorHandler(function(response){var paths=[];var interp={transportError:response.errorDescription};for(var ii=0;ii<bundled_requests.length;ii++){var path=bundled_requests[ii][0];var request=bundled_requests[ii][1];paths.push(path);request.id=this.id;request.invokeResponseHandler(interp);}}).send();return request;},bootstrap:function(href,elem,is_post){var method='GET';var readonly=true;var data={};if(is_post||elem&&(elem.rel=='async-post'||elem.getAttribute&&elem.getAttribute('forcemethod')=='post')){method='POST';readonly=false;if(href){href=URI(href);data=href.getQueryData();href.setQueryData({});}}var status_elem=Parent.byClass(elem,'stat_elem')||elem;if(status_elem&&CSS.hasClass(status_elem,'async_saving'))return false;var async=new AsyncRequest(href).setReadOnly(readonly).setMethod(method).setData(data).setNectarModuleDataSafe(elem).setRelativeTo(elem).setHandler(function(response){Event.fire(elem,'success',{response:response});}).setErrorHandler(function(response){if(Event.fire(elem,'error',{response:response})!==false)AsyncResponse.defaultErrorHandler(response);});if(status_elem){async.setStatusElement(status_elem);var status_class=status_elem.getAttribute('data-status-class');status_class&&async.setStatusClass(status_class);}async.send();return false;},post:function(href,data){new AsyncRequest(href).setReadOnly(false).setMethod('POST').setData(data).send();return false;},getLastId:function(){return AsyncRequest._last_id;},_JSONPReceivers:{},_allBundledRequests:[],_bundleTimer:null,suppressOnloadToken:{},_last_id:2,_id_threshold:2,_inflight:[],_inflightAdd:bagofholding,_inflightPurge:bagofholding,_inflightEnable:function(){if(ua.ie()){copyProperties(AsyncRequest,{_inflightAdd:function(ar){this._inflight.push(ar);},_inflightPurge:function(){AsyncRequest._inflight=AsyncRequest._inflight.filter(function(ar){return ar.transport&&ar.transport.readyState<4;});}});onunloadRegister(function(){AsyncRequest._inflight.each(function(ar){if(ar.transport&&ar.transport.readyState<4){ar.transport.abort();delete ar.transport;}});});}}});copyProperties(AsyncRequest.prototype,{setMethod:function(m){this.method=m.toString().toUpperCase();return this;},getMethod:function(){return this.method;},setData:function(obj){this.data=obj;return this;},_setDataHash:function(){if(this.method!='POST'||!this.getOption('tfbEndpoint')||this.data.phstamp)return;var input_len=URI.implodeQuery(this.data).length;var numeric_csrf_value='';for(var ii=0;ii<this.data.fb_dtsg.length;ii++)numeric_csrf_value+=this.data.fb_dtsg.charCodeAt(ii);this.data.phstamp='1'+numeric_csrf_value+input_len;},setFile:function(file){this.file=file;return this;},getData:function(){return this.data;},setContextData:function(key,value,enabled){enabled=enabled===undefined?true:enabled;if(enabled)this.context['_log_'+key]=value;return this;},_setUserActionID:function(){var ue=window.ArbiterMonitor&&ArbiterMonitor.getUE()||'-';this.userActionID=(window.EagleEye&&EagleEye.getSessionID()||'-')+'/'+ue;},setURI:function(uri){var uri_obj=URI(uri);if(this.getOption('useIframeTransport')&&!uri_obj.isFacebookURI())return this;if(!this.getOption('jsonp')&&!this.getOption('useIframeTransport')&&!uri_obj.isSameOrigin())return this;this._setUserActionID();if(!uri||uri_obj.isEmpty()){if(window.send_error_signal&&window.get_error_stack){var data={err_code:1013,vip:'-',duration:0,xfb_ip:'-',path:window.location.href,aid:this.userActionID};send_error_signal('async_error',JSON.stringify(data));send_error_signal('async_xport_stack','1013:'+window.location.href+'::'+get_error_stack());}return this;}this.uri=uri_obj;return this;},getURI:function(){return this.uri.toString();},setInitialHandler:function(fn){this.initialHandler=fn;return this;},setHandler:function(fn){if(!(typeof(fn)!='function'))this.handler=fn;return this;},getHandler:function(){return this.handler;},setErrorHandler:function(fn){if(!(typeof(fn)!='function'))this.errorHandler=fn;return this;},setTransportErrorHandler:function(fn){this.transportErrorHandler=fn;return this;},getErrorHandler:function(){return this.errorHandler;},getTransportErrorHandler:function(){return this.transportErrorHandler;},setTimeoutHandler:function(timeout,fn){if(!(typeof(fn)!='function')){this.timeout=timeout;this.timeoutHandler=fn;}return this;},resetTimeout:function(timeout){if(!(this.timeoutHandler===null))if(timeout===null){this.timeout=null;clearTimeout(this.timer);this.timer=null;}else{var clear_on_quickling_event=!this._allowCrossPageTransition;this.timeout=timeout;clearTimeout(this.timer);this.timer=this._handleTimeout.bind(this).defer(this.timeout,clear_on_quickling_event);}return this;},_handleTimeout:function(){this.abandon();this.timeoutHandler(this);},setNewSerial:function(){this.id=++AsyncRequest._last_id;return this;},setFinallyHandler:function(fn){this.finallyHandler=fn;return this;},getServerDialogCancelHandler:function(){return this.serverDialogCancelHandler;},setServerDialogCancelHandler:function(fn){this.serverDialogCancelHandler=fn;return this;},setPreBootloadHandler:function(fn){this.preBootloadHandler=fn;return this;},setReadOnly:function(readOnly){if(!(typeof(readOnly)!='boolean'))this.readOnly=readOnly;return this;},setFBMLForm:function(){this.writeRequiredParams=["fb_sig"];return this;},getReadOnly:function(){return this.readOnly;},setRelativeTo:function(element){this.relativeTo=element;return this;},getRelativeTo:function(){return this.relativeTo;},setStatusClass:function(c){this.statusClass=c;return this;},setStatusElement:function(element){this.statusElement=element;return this;},getStatusElement:function(){return ge(this.statusElement);},isRelevant:function(){if(this._allowCrossPageTransition)return true;if(!this.id)return true;return this.id>AsyncRequest._id_threshold;},clearStatusIndicator:function(){var statusElem=this.getStatusElement();if(statusElem){CSS.removeClass(statusElem,'async_saving');CSS.removeClass(statusElem,this.statusClass);}},addStatusIndicator:function(){var statusElem=this.getStatusElement();if(statusElem){CSS.addClass(statusElem,'async_saving');CSS.addClass(statusElem,this.statusClass);}},specifiesWriteRequiredParams:function(){return this.writeRequiredParams.every(function(param){this.data[param]=this.data[param]||Env[param]||(ge(param)||{}).value;if(this.data[param]!==undefined)return true;return false;},this);},setOption:function(opt,v){if(typeof(this.option[opt])!='undefined')this.option[opt]=v;return this;},getOption:function(opt){typeof(this.option[opt])=='undefined';return this.option[opt];},abort:function(){if(this.transport){var old_handler=this.getTransportErrorHandler();this.setOption('suppressErrorAlerts',true);this.setTransportErrorHandler(bagofholding);this._requestAborted=1;this.transport.abort();this.setTransportErrorHandler(old_handler);}},abandon:function(){clearTimeout(this.timer);this.setOption('suppressErrorAlerts',true).setHandler(bagofholding).setErrorHandler(bagofholding).setTransportErrorHandler(bagofholding);if(this.transport){this._requestAborted=1;this.transport.abort();}},setNectarData:function(nctrParams){if(nctrParams){if(this.data.nctr===undefined)this.data.nctr={};copyProperties(this.data.nctr,nctrParams);}return this;},setNectarModuleDataSafe:function(elem){if(this.setNectarModuleData)this.setNectarModuleData(elem);return this;},setNectarImpressionIdSafe:function(){if(this.setNectarImpressionId)this.setNectarImpressionId();return this;},setAllowCrossPageTransition:function(allow){this._allowCrossPageTransition=!!allow;if(this.timer)this.resetTimeout(this.timeout);return this;},send:function(isRetry){isRetry=isRetry||false;if(!this.uri)return false;!this.errorHandler&&!this.getOption('suppressErrorHandlerWarning');if(this.getOption('jsonp')&&this.method!='GET')this.setMethod('GET');if(this.getOption('useIframeTransport')&&this.method!='GET')this.setMethod('GET');this.timeoutHandler!==null&&(this.getOption('jsonp')||this.getOption('useIframeTransport'));if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!='POST')return false;}if(this.method=='POST'&&this.getOption('tfbEndpoint')){this.data.fb_dtsg=Env.fb_dtsg;this.data.lsd=Cookie.get('lsd');}if(!isEmpty(this.context)&&this.getOption('tfbEndpoint')){copyProperties(this.data,this.context);this.data.ajax_log=1;}if(window.Env&&Env.force_param)copyProperties(this.data,Env.force_param);if(!this.getReadOnly()&&this.getOption('tfbEndpoint')&&this.method=='POST'&&this.data.post_form_id_source===undefined)this.data.post_form_id_source='AsyncRequest';if(window.Env)this.data.__user=Env.user;this._setUserActionID();if(this.getOption('bundle')&&AsyncRequest._bundleRequest(this))return true;this.setNewSerial();if(this.getOption('tfbEndpoint')){this.uri.addQueryData({__a:1});if(!this.getOption('asynchronous'))this.uri.addQueryData({__s:1});if(Env.fb_isb)this.uri.addQueryData({fb_isb:Env.fb_isb});}this.finallyHandler=async_callback(this.finallyHandler,'final');var uri_str,query;if(this.method=='GET'||this.file){uri_str=this.uri.addQueryData(this.data).toString();query='';}else{uri_str=this.uri.toString();this._setDataHash();query=URI.implodeQuery(this.data);}if(this.getOption('jsonp')||this.getOption('useIframeTransport')){uri_str=this.uri.addQueryData({__a:this.id}).toString();AsyncRequest._JSONPReceivers[this.id]=async_callback(bind(this,'onjsonpresponse'),'json');if(this.getOption('jsonp')){(function(){document.body.appendChild($N('script',{src:uri_str,type:"text/javascript"}));}).bind(this).defer();}else{var style={position:'absolute',top:'-9999999px',width:'80px',height:'80px'};this.transportIframe=$N('iframe',{src:"javascript:''",style:style});document.body.appendChild(this.transportIframe);this.transportIframe.src=uri_str;}return true;}if(this.transport)return false;var transport=null;try{transport=new XMLHttpRequest();}catch(ignored){}if(!transport)try{transport=new ActiveXObject("Msxml2.XMLHTTP");}catch(ignored){}if(!transport)try{transport=new ActiveXObject("Microsoft.XMLHTTP");}catch(ignored){}if(!transport)return false;transport.onreadystatechange=async_callback(bind(this,'onstatechange'),'xhr');if(!isRetry)this.remainingRetries=this.getOption('retries');if(window.send_error_signal||window.ArbiterMonitor)this._sendTimeStamp=this._sendTimeStamp||Date.now();this.transport=transport;try{this.transport.open(this.method,uri_str,this.getOption('asynchronous'));}catch(ex){return false;}var svn_rev=Env.svn_rev;if(svn_rev)this.transport.setRequestHeader('X-SVN-Rev',String(svn_rev));if(this.method=='POST')this.transport.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this.addStatusIndicator();query=this.file||query;this.transport.send(query);if(this.timeout!==null)this.resetTimeout(this.timeout);AsyncRequest._inflightAdd(this);return true;},_displayServerDialog:function(model,is_confirmation){Bootloader.loadComponents('dialog',function(){var dialog=new Dialog(model);if(is_confirmation)dialog.setHandler(this._displayConfirmationHandler.bind(this,dialog));dialog.setCancelHandler(function(){var handler=this.getServerDialogCancelHandler();if(handler)handler.apply(this,arguments);this.finallyHandler.apply(this,arguments);}.bind(this)).setCausalElement(this.relativeTo).setCloseHandler(this.finallyHandler.bind(this)).show();}.bind(this));},_displayConfirmationHandler:function(dialog){this.data.confirmed=1;copyProperties(this.data,dialog.getFormData());this.send();}});module.exports=AsyncRequest;});
__e("legacy:async",["AsyncRequest","AsyncResponse"],function(a,b,c,d){a.AsyncRequest=b('AsyncRequest');a.AsyncResponse=b('AsyncResponse');},3);
__e("AsyncRequestNectarLogging",["string-extensions","AsyncRequest","Env","copyProperties"],function(e,g,h,i,f,d){g("string-extensions");var a=g("AsyncRequest");var b=g("Env");var c=g("copyProperties");c(a.prototype,{setNectarModuleData:function(l){if(this.method=='POST'){var m=b.module;if(l&&m===undefined){var k={fbpage_fan_confirm:1};var n=null;for(var j=l;j&&j!=document.body;j=j.parentNode){if(!j.id||typeof j.id!=='string')continue;if(j.id.startsWith('pagelet_')){m=j.id;break;}if(!n&&k[j.id])n=j.id;}if(m===undefined&&n)m=n;}if(m!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._mod=m;}}},setNectarImpressionId:function(){if(this.method=='POST'){var j=b.impid;if(j!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._impid=j;}}}});});
__e("legacy:async-postlude",["AsyncRequestNectarLogging"],function(a,b,c,d){b('AsyncRequestNectarLogging');},3);
__e("deferUntil",[],function(c,e,f,g,d,b){function a(j,i,n,h,o){var l=i();if(l){j(l);return null;}var m=Date.now();var k=setInterval(function(){l=i();if(!l){if(!n||(n<new Date()-m))return;o&&o();}clearInterval(k);j(l);},20,h);return k;}d.exports=a;});
__e("legacy:function-utils",["FunctionUtils","deferUntil"],function(b,c,d,e){var a=c('FunctionUtils');b.debounce=a.debounce;b.throttle=a.throttle;b.defer_until=c('deferUntil');},3);
__e("XD",["function-extensions","copyProperties","ua","URI","Arbiter"],function(g,i,j,k,h,f){i("function-extensions");var e=i("copyProperties");var l=i("ua");var b=i("URI");var a=i("Arbiter");var d={_callbacks:[],_opts:{autoResize:false,allowShrink:true,channelUrl:null,hideOverflow:false,newResizeMethod:false,resizeTimeout:100,resizeWidth:false,expectResizeAck:false,resizeAckTimeout:6000},_lastResizeAckId:0,_resizeCount:0,_resizeTimestamp:0,init:function(m){this._opts=e(e({},this._opts),m);if(this._opts.autoResize)this._startResizeMonitor();a.subscribe('Connect.Unsafe.resize.ack',function(o,n){if(!n.id)n.id=this._resizeCount;if(n.id>this._lastResizeAckId)this._lastResizeAckId=n.id;}.bind(this));},send:function(n,m){m=m||this._opts.channelUrl;if(!m)return;if(m.substr(0,4)!='http')return;var u=m+'&'+b.implodeQuery(n),q='f'+(Math.random()*(1<<30)).toString(16).replace('.',''),o=document.body.appendChild(document.createElement('div')),t=false;o.style.position='absolute';o.style.top='-10000px';o.style.width='1px';o.style.height='1px';d._callbacks[q]=function(){if(t){(function(){o.parentNode.removeChild(o);}).defer(3000);delete d._callbacks[q];}};if(l.ie()){var r,p=document.createElement('div');r='<iframe onload="XD._callbacks.'+q+'()"></iframe>';p.innerHTML=r;p.firstChild.setAttribute('src',u);r=p.innerHTML;o.innerHTML='<iframe src="javascript:false"></iframe>';t=true;(function(){o.innerHTML=r;}).defer();}else{var s=document.createElement('iframe');s.onload=d._callbacks[q];o.appendChild(s);t=true;s.src=u;}},_computeSize:function(){return {width:this._opts.resizeWidth?this._calcWidth(d.forced_min_width):0,height:this._calcHeight(this._opts.newResizeMethod)};},_calcHeight:function(p){var m=document.body,n=document.documentElement,o=0;if(p){o=Math.max(Math.max(m.offsetHeight,m.scrollHeight)+m.offsetTop,Math.max(n.offsetHeight,n.scrollHeight)+n.offsetTop);}else{if(l.ie()){o=Math.max(m.offsetHeight,m.scrollHeight)+m.offsetTop;}else o=n.offsetHeight+n.offsetTop;if(window.Dialog)o=Math.max(o,Dialog.max_bottom);}return o;},_calcWidth:function(s){var m=document.body,q=document.documentElement,t=0;if(m.offsetWidth<m.scrollWidth){t=m.scrollWidth+m.offsetLeft;}else{var p=m.childNodes;for(var r=0;r<p.length;r++){var n=p[r];var o=n.offsetWidth+n.offsetLeft;if(o>t)t=o;}}if(s)t=Math.max(t,s);if(q.clientLeft>0)t+=(q.clientLeft*2);if(q.clientTop>0)height+=(q.clientTop*2);return t;},_startResizeMonitor:function(){var n,m=document.documentElement;if(this._opts.hideOverflow){m.style.overflow='hidden';document.body.style.overflow='hidden';}setInterval((function(){var r=this._computeSize();var s=Date.now();var o=this._lastResizeAckId<this._resizeCount&&(s-this._resizeTimestamp)>this._opts.resizeAckTimeout;if(!n||(this._opts.expectResizeAck&&o)||(this._opts.allowShrink&&n.width!=r.width)||(!this._opts.allowShrink&&n.width<r.width)||(this._opts.allowShrink&&n.height!=r.height)||(!this._opts.allowShrink&&n.height<r.height)){n=r;this._resizeCount++;this._resizeTimestamp=s;var q={type:'resize',height:r.height,ackData:{id:this._resizeCount}};if(r.width&&r.width!=0)q.width=r.width;try{if(b(document.referrer).isFacebookURI()&&window.parent!=window&&window.name&&window.parent.location&&window.parent.location.toString&&b(window.parent.location).isFacebookURI()){var iframes=window.parent.document.getElementsByTagName('iframe');for(var i=0;i<iframes.length;i=i+1)if(iframes[i].name==window.name){if(this._opts.resizeWidth)iframes[i].style.width=q.width+'px';iframes[i].style.height=q.height+'px';}}this.send(q);}catch(p){this.send(q);}}}).bind(this),this._opts.resizeTimeout);}};var c=e({},d);h.exports.UnverifiedXD=c;h.exports.XD=d;g.UnverifiedXD=c;g.XD=d;});
__e("legacy:connect-xd",["XD"],function(a,b,c,d){a.UnverifiedXD=b('XD').UnverifiedXD;a.XD=b('XD').XD;},3);
__e("legacy:uri",["URI"],function(a,b,c,d){a.URI=b('URI');},3);
WindowComm={_callbacks:{},makeHandler:function(a,c){c=c||'opener';var b='f'+(Math.random()*(1<<30)).toString(16).replace('.','');WindowComm._callbacks[b]=a;return new URI('/connect/window_comm.php').setQueryData({_id:b,_relation:c}).getQualifiedURI().toString();},_recv:function(b){var a=new URI(b).getQueryData();WindowComm._callbacks[a._id](a);}};
__e("Vector",["dom","ua","event-extensions","copyProperties"],function(f,h,i,j,g,e){var b=h("dom");var k=h("ua");var a=h("event-extensions").$E;var d=h("copyProperties");function c(m,n,l){d(this,{x:parseFloat(m),y:parseFloat(n),domain:l||'pure'});}d(c.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(n,o){if(arguments.length==1){if(n.domain!='pure')n=n.convertTo(this.domain);return this.add(n.x,n.y);}var l=parseFloat(n);var m=parseFloat(o);return new c(this.x+l,this.y+m,this.domain);},mul:function(l,m){if(typeof m=="undefined")m=l;return new c(this.x*l,this.y*m,this.domain);},sub:function(l,m){if(arguments.length==1){return this.add(l.mul(-1));}else return this.add(-l,-m);},distanceTo:function(l){return this.sub(l).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(l){if(l!='pure'&&l!='viewport'&&l!='document')return new c(0,0);if(l==this.domain)return new c(this.x,this.y,this.domain);if(l=='pure')return new c(this.x,this.y);if(this.domain=='pure')return new c(0,0);var m=c.getScrollPosition('document');var n=this.x,o=this.y;if(this.domain=='document'){n-=m.x;o-=m.y;}else{n+=m.x;o+=m.y;}return new c(n,o,l);},setElementPosition:function(l){var m=this.convertTo('document');l.style.left=parseInt(m.x)+'px';l.style.top=parseInt(m.y)+'px';return this;},setElementDimensions:function(l){return this.setElementWidth(l).setElementHeight(l);},setElementWidth:function(l){l.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(l){l.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(l){if(l==document.body){window.scrollBy(this.x,this.y);}else{l.scrollLeft+=this.x;l.scrollTop+=this.y;}return this;}});d(c,{getEventPosition:function(m,l){l=l||'document';m=a(m);var n=b.getDocumentScrollElement();var p=m.pageX||(m.clientX+n.scrollLeft);var q=m.pageY||(m.clientY+n.scrollTop);var o=new c(p,q,'document');return o.convertTo(l);},getScrollPosition:function(l){l=l||'document';var m=b.getDocumentScrollElement();var n=m.scrollLeft;var o=m.scrollTop;return new c(n,o,'document').convertTo(l);},getElementPosition:function(n,m){m=m||'document';if(!n)return;if(!('getBoundingClientRect' in n))return new c(0,0,'document');var p=n.getBoundingClientRect(),l=document.documentElement,o=Math.round(p.left)-l.clientLeft,q=Math.round(p.top)-l.clientTop;return new c(o,q,'viewport').convertTo(m);},getElementDimensions:function(l){return new c(l.offsetWidth||0,l.offsetHeight||0);},getViewportDimensions:function(){var l=(window&&window.innerWidth)||(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0;var m=(window&&window.innerHeight)||(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0;return new c(l,m,'viewport');},getDocumentDimensions:function(l){l=l||document;var m=b.getDocumentScrollElement(l);if(m===l.body&&k.firefox())m=l.documentElement;var n=m.scrollWidth||0;var o=m.scrollHeight||0;return new c(n,o,'document');},deserialize:function(m){var l=m.split(',');return new c(l[0],l[1]);}});g.exports=c;});
__e("PopupWindow",["copyProperties","ua","Vector"],function(e,g,h,i,f,d){var c=g("copyProperties");var j=g("ua");var b=g("Vector");var a={_opts:{allowShrink:true,timeout:100},init:function(k){copy_properties(a._opts,k);setInterval(a._resizeCheck,a._opts.timeout);},_resizeCheck:function(){var o=b.getViewportDimensions(),k=a._getDocumentSize(),m=k.y-o.y,n=k.x-o.x;if(n<0)n=0;if(!a._opts.allowShrink&&m<0)m=0;if(m||n)try{if(window.console&&window.console.firebug)console.log('Resizing will not work in firefox with firebug enabled. '+'See https://bugzilla.mozilla.org/show_bug.cgi?id=691693');window.resizeBy(n,m);if(n)window.moveBy(n/-2,0);}catch(l){}},_getDocumentSize:function(){var k=b.getDocumentDimensions();if(window.Dialog&&Dialog.max_bottom&&Dialog.max_bottom>k.y)k.y=Dialog.max_bottom;return k;},open:function(s,l,t){var p=typeof window.screenX!='undefined'?window.screenX:window.screenLeft,q=typeof window.screenY!='undefined'?window.screenY:window.screenTop,o=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth,n=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22),m=parseInt(p+((o-t)/2),10),r=parseInt(q+((n-l)/2.5),10),k=('width='+t+',height='+l+',left='+m+',top='+r);return window.open(s,'_blank',k);}};f.exports=a;});
__e("legacy:popup-resizer",["PopupWindow"],function(a,b,c,d){a.PopupResizer=b('PopupWindow');},3);
ConnectLogin={init:function(a){this.appID=a.appID;this.addToProfile=a.addToProfile;this.oneClick=a.oneClick;this.channelUrl=a.channelUrl;XD.init(a);},login:function(a,c,b){if(this.oneClick&&!c){this._oneClick(a);}else this._openPopup(a,c,b);},logout:function(){XD.send({type:'logout'});},_oneClick:function(a){new AsyncRequest().setURI('/ajax/api/tos.php').setData({app_id:this.appID,grant_perm:1}).setHandler(function(b){ConnectLogin._refreshLoginStatus();a&&a();}).send();},_openPopup:function(c,e,d){d=d||{};var b=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();if(ConnectLogin.appID)ConnectLogin._refreshLoginStatus();c&&c();}),a=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();}),g=new URI('/login.php');g.setQueryData({api_key:this.appID,next:b,channel_url:a,cancel_url:a,req_perms:e,v:'1.0',fbconnect:1,add_to_profile:this.addToProfile,display:'popup'});g.addQueryData(d);var f=this._getSize(d);this._popup=PopupResizer.open(g.toString(),f.height,f.width);},_closePopup:function(){if(this._popup){this._popup.close();this._popup=null;}},_refreshLoginStatus:function(){if(this.channelUrl){XD.send({type:'refreshLoginStatus'});}else window.location.reload();},_getSize:function(a){if(a.social_plugin=='registration'){return {width:640,height:370};}else return {width:610,height:280};}};
__e("legacy:intl-core",["tx","_tx","Intl"],function(c,d,e,f){var g=d('tx');var b=d('_tx');var a=d('Intl');c.tx=g;c._tx=b;c.intl_ends_in_punct=a.endsInPunct;c.intl_phonological_rules=a.phonologicalRules;},3);
__e("legacy:vector",["Vector"],function(a,b,c,d){a.Vector2=b('Vector');},3);
__e("legacy:dom-html",["HTML"],function(a,b,c,d){a.HTML=b('HTML');},3);
__e("legacy:object-core-utils",["isEmpty","copyProperties"],function(b,c,d,e){b.is_empty=c('isEmpty');b.copy_properties=c('copyProperties');function a(f,g){return copy_properties(window[f]||(window[f]={}),g);}b.add_properties=a;},3);
InitialJSLoader=window.InitialJSLoader||{INITIAL_JS_READY:'BOOTLOAD/JSREADY',load:function(a){InitialJSLoader.callback=Bootloader.loadResources(a,InitialJSLoader.callback);},callback:Arbiter.registerCallback(function(){Arbiter.inform(InitialJSLoader.INITIAL_JS_READY,true,Arbiter.BEHAVIOR_STATE);},[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK])};
__e("legacy:util",["Util"],function(a,b,c,d){a.Util=b('Util');},3);
function _onloadHook(){!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_prehooks');_runHooks('onloadhooks');!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_hooks');window.loaded=true;Arbiter.inform('uipage_onload',true,Arbiter.BEHAVIOR_STATE);}function _onafterloadHook(){_runHooks('onafterloadhooks');window.afterloaded=true;}function _runHook(b,c){if(/nocatch/.test(location.search))return b();try{return b();}catch(a){var err=SystemEvents.normalizeError(a);err.event_type=c;err.category='runhook';SystemEvents.informError(err);}}function _runHooks(b){var d=b=='onbeforeleavehooks'||b=='onbeforeunloadhooks';var e=null;do{var a=window[b];if(!d)window[b]=null;if(!a)break;for(var c=0;c<a.length;c++)if(d){e=e||_runHook(a[c],b);}else _runHook(a[c],b);if(d)break;}while(window[b]);if(d&&e)return e;}function keep_window_set_as_loaded(){if(window.loaded==false){window.loaded=true;_runHooks('onloadhooks');}if(window.afterloaded==false){window.afterloaded=true;_runHooks('onafterloadhooks');}}Arbiter.registerCallback(_onloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.registerCallback(_onafterloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,OnloadEvent.ONLOAD_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.subscribe(OnloadEvent.ONBEFOREUNLOAD,function(b,a){a.warn=_runHooks('onbeforeleavehooks')||_runHooks('onbeforeunloadhooks');if(!a.warn){window.loaded=false;window.afterloaded=false;}},Arbiter.SUBSCRIBE_NEW);Arbiter.subscribe(OnloadEvent.ONUNLOAD,function(b,a){_runHooks('onunloadhooks');},Arbiter.SUBSCRIBE_NEW);
var PlatformOptInPopup=function(){};copy_properties(PlatformOptInPopup,{DIALOG_URL:'/connect/uiserver.php',DIALOG_WIDTH:420,DIALOG_HEIGHT:450,APP_ID:127760087237610,open:function(d,c,a){if(!d)d='generic';if(!c)c='opt.in';var b=new URI(PlatformOptInPopup.DIALOG_URL);b.addQueryData({social_plugin:d,method:c,display:'popup',secure:URI.getRequestURI().isSecure(),app_id:PlatformOptInPopup.APP_ID});if(a)b.addQueryData(a);return PopupResizer.open(b.toString(),PlatformOptInPopup.DIALOG_WIDTH,PlatformOptInPopup.DIALOG_HEIGHT);}});
__e("animation",["css"],function(d,f,g,h,e,c){var a=f('css');function b(i){if(i==undefined)return;if(d==this){return new b(i);}else{this.obj=i;this._reset_state();this.queue=[];this.last_attr=null;}}b.resolution=20;b.offset=0;b.prototype._reset_state=function(){this.state={attrs:{},duration:500};};b.prototype.stop=function(){this._reset_state();this.queue=[];return this;};b.prototype._build_container=function(){if(this.container_div){this._refresh_container();return;}if(this.obj.firstChild&&this.obj.firstChild.__animation_refs){this.container_div=this.obj.firstChild;this.container_div.__animation_refs++;this._refresh_container();return;}var j=document.createElement('div');j.style.padding='0px';j.style.margin='0px';j.style.border='0px';j.__animation_refs=1;var i=this.obj.childNodes;while(i.length)j.appendChild(i[0]);this.obj.appendChild(j);this._orig_overflow=this.obj.style.overflow;this.obj.style.overflow='hidden';this.container_div=j;this._refresh_container();};b.prototype._refresh_container=function(){this.container_div.style.height='auto';this.container_div.style.width='auto';this.container_div.style.height=this.container_div.offsetHeight+'px';this.container_div.style.width=this.container_div.offsetWidth+'px';};b.prototype._destroy_container=function(){if(!this.container_div)return;if(!--this.container_div.__animation_refs){var i=this.container_div.childNodes;while(i.length)this.obj.appendChild(i[0]);this.obj.removeChild(this.container_div);}this.container_div=null;this.obj.style.overflow=this._orig_overflow;};b.ATTR_TO=1;b.ATTR_BY=2;b.ATTR_FROM=3;b.prototype._attr=function(i,l,k){i=i.replace(/-[a-z]/gi,function(m){return m.substring(1).toUpperCase();});var j=false;switch(i){case 'background':this._attr('backgroundColor',l,k);return this;case 'margin':l=b.parse_group(l);this._attr('marginBottom',l[0],k);this._attr('marginLeft',l[1],k);this._attr('marginRight',l[2],k);this._attr('marginTop',l[3],k);return this;case 'padding':l=b.parse_group(l);this._attr('paddingBottom',l[0],k);this._attr('paddingLeft',l[1],k);this._attr('paddingRight',l[2],k);this._attr('paddingTop',l[3],k);return this;case 'backgroundColor':case 'borderColor':case 'color':l=b.parse_color(l);break;case 'opacity':l=parseFloat(l,10);break;case 'height':case 'width':if(l=='auto'){j=true;}else l=parseInt(l,10);break;case 'borderWidth':case 'lineHeight':case 'fontSize':case 'marginBottom':case 'marginLeft':case 'marginRight':case 'marginTop':case 'paddingBottom':case 'paddingLeft':case 'paddingRight':case 'paddingTop':case 'bottom':case 'left':case 'right':case 'top':case 'scrollTop':case 'scrollLeft':l=parseInt(l,10);break;default:throw new Error(i+' is not a supported attribute!');}if(this.state.attrs[i]===undefined)this.state.attrs[i]={};if(j)this.state.attrs[i].auto=true;switch(k){case b.ATTR_FROM:this.state.attrs[i].start=l;break;case b.ATTR_BY:this.state.attrs[i].by=true;case b.ATTR_TO:this.state.attrs[i].value=l;break;}};b._get_box_width=function(k){var l=parseInt(a.getStyle(k,'paddingLeft'),10),m=parseInt(a.getStyle(k,'paddingRight'),10),i=parseInt(a.getStyle(k,'borderLeftWidth'),10),j=parseInt(a.getStyle(k,'borderRightWidth'),10);return k.offsetWidth-(l?l:0)-(m?m:0)-(i?i:0)-(j?j:0);};b._get_box_height=function(k){var m=parseInt(a.getStyle(k,'paddingTop'),10),l=parseInt(a.getStyle(k,'paddingBottom'),10),i=parseInt(a.getStyle(k,'borderTopWidth'),10),j=parseInt(a.getStyle(k,'borderBottomWidth'),10);return k.offsetHeight-(m?m:0)-(l?l:0)-(i?i:0)-(j?j:0);};b.prototype.to=function(i,j){if(j===undefined){this._attr(this.last_attr,i,b.ATTR_TO);}else{this._attr(i,j,b.ATTR_TO);this.last_attr=i;}return this;};b.prototype.by=function(i,j){if(j===undefined){this._attr(this.last_attr,i,b.ATTR_BY);}else{this._attr(i,j,b.ATTR_BY);this.last_attr=i;}return this;};b.prototype.from=function(i,j){if(j===undefined){this._attr(this.last_attr,i,b.ATTR_FROM);}else{this._attr(i,j,b.ATTR_FROM);this.last_attr=i;}return this;};b.prototype.duration=function(i){this.state.duration=i?i:0;return this;};b.prototype.checkpoint=function(j,i){if(j===undefined)j=1;this.state.checkpoint=j;this.queue.push(this.state);this._reset_state();this.state.checkpointcb=i;return this;};b.prototype.blind=function(){this.state.blind=true;return this;};b.prototype.hide=function(){this.state.hide=true;return this;};b.prototype.show=function(){this.state.show=true;return this;};b.prototype.ease=function(i){this.state.ease=i;return this;};b.prototype.go=function(){var j=(new Date()).getTime();this.queue.push(this.state);for(var i=0;i<this.queue.length;i++){this.queue[i].start=j-b.offset;if(this.queue[i].checkpoint)j+=this.queue[i].checkpoint*this.queue[i].duration;}b.push(this);return this;};b.prototype._show=function(){a.show(this.obj);};b.prototype._hide=function(){a.hide(this.obj);};b.prototype._frame=function(u){var k=true;var t=false;var w=false;var v;function l(x){return document.documentElement[x]||document.body[x];}for(var m=0;m<this.queue.length;m++){var j=this.queue[m];if(j.start>u){k=false;continue;}if(j.checkpointcb){this._callback(j.checkpointcb,u-j.start);j.checkpointcb=null;}if(j.started===undefined){if(j.show)this._show();for(var i in j.attrs){if(j.attrs[i].start!==undefined)continue;switch(i){case 'backgroundColor':case 'borderColor':case 'color':v=b.parse_color(a.getStyle(this.obj,i=='borderColor'?'borderLeftColor':i));if(j.attrs[i].by){j.attrs[i].value[0]=Math.min(255,Math.max(0,j.attrs[i].value[0]+v[0]));j.attrs[i].value[1]=Math.min(255,Math.max(0,j.attrs[i].value[1]+v[1]));j.attrs[i].value[2]=Math.min(255,Math.max(0,j.attrs[i].value[2]+v[2]));}break;case 'opacity':v=a.getOpacity(this.obj);if(j.attrs[i].by)j.attrs[i].value=Math.min(1,Math.max(0,j.attrs[i].value+v));break;case 'height':v=b._get_box_height(this.obj);if(j.attrs[i].by)j.attrs[i].value+=v;break;case 'width':v=b._get_box_width(this.obj);if(j.attrs[i].by)j.attrs[i].value+=v;break;case 'scrollLeft':case 'scrollTop':v=(this.obj===document.body)?l(i):this.obj[i];if(j.attrs[i].by)j.attrs[i].value+=v;j['last'+i]=v;break;default:v=parseInt(a.getStyle(this.obj,i),10)||0;if(j.attrs[i].by)j.attrs[i].value+=v;break;}j.attrs[i].start=v;}if((j.attrs.height&&j.attrs.height.auto)||(j.attrs.width&&j.attrs.width.auto)){if(ua.firefox()<3)w=true;this._destroy_container();for(var i in {height:1,width:1,fontSize:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,borderBottomWidth:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1})if(j.attrs[i])this.obj.style[i]=j.attrs[i].value+(typeof j.attrs[i].value=='number'?'px':'');if(j.attrs.height&&j.attrs.height.auto)j.attrs.height.value=b._get_box_height(this.obj);if(j.attrs.width&&j.attrs.width.auto)j.attrs.width.value=b._get_box_width(this.obj);}j.started=true;if(j.blind)this._build_container();}var q=(u-j.start)/j.duration;if(q>=1){q=1;if(j.hide)this._hide();}else k=false;var s=j.ease?j.ease(q):q;if(!t&&q!=1&&j.blind)t=true;if(w&&this.obj.parentNode){var r=this.obj.parentNode;var p=this.obj.nextSibling;r.removeChild(this.obj);}for(var i in j.attrs)switch(i){case 'backgroundColor':case 'borderColor':case 'color':this.obj.style[i]='rgb('+b.calc_tween(s,j.attrs[i].start[0],j.attrs[i].value[0],true)+','+b.calc_tween(s,j.attrs[i].start[1],j.attrs[i].value[1],true)+','+b.calc_tween(s,j.attrs[i].start[2],j.attrs[i].value[2],true)+')';break;case 'opacity':a.setStyle(this.obj,'opacity',b.calc_tween(s,j.attrs[i].start,j.attrs[i].value));break;case 'height':case 'width':this.obj.style[i]=s==1&&j.attrs[i].auto?'auto':b.calc_tween(s,j.attrs[i].start,j.attrs[i].value,true)+'px';break;case 'scrollLeft':case 'scrollTop':var n=this.obj===document.body;v=n?l(i):this.obj[i];if(j['last'+i]!==v){delete j.attrs[i];}else{var o=b.calc_tween(s,j.attrs[i].start,j.attrs[i].value,true);if(!n){o=this.obj[i]=o;}else{if(i=='scrollLeft'){d.scrollTo(o,l('scrollTop'));}else d.scrollTo(l('scrollLeft'),o);o=l(i);}j['last'+i]=o;}break;default:this.obj.style[i]=b.calc_tween(s,j.attrs[i].start,j.attrs[i].value,true)+'px';break;}if(q==1){this.queue.splice(m--,1);this._callback(j.ondone,u-j.start-j.duration);}}if(w)r[p?'insertBefore':'appendChild'](this.obj,p);if(!t&&this.container_div)this._destroy_container();return !k;};b.prototype.ondone=function(i){this.state.ondone=i;return this;};b.prototype._callback=function(i,j){if(i){b.offset=j;i.call(this);b.offset=0;}};b.calc_tween=function(i,j,k,l){return (l?parseInt:parseFloat)((k-j)*i+j,10);};b.parse_color=function(i){var j=/^#([a-f0-9]{1,2})([a-f0-9]{1,2})([a-f0-9]{1,2})$/i.exec(i);if(j){return [parseInt(j[1].length==1?j[1]+j[1]:j[1],16),parseInt(j[2].length==1?j[2]+j[2]:j[2],16),parseInt(j[3].length==1?j[3]+j[3]:j[3],16)];}else{var k=/^rgba? *\(([0-9]+), *([0-9]+), *([0-9]+)(?:, *([0-9]+))?\)$/.exec(i);if(k){if(k[4]==='0'){return [255,255,255];}else return [parseInt(k[1],10),parseInt(k[2],10),parseInt(k[3],10)];}else if(i=='transparent'){return [255,255,255];}else throw 'Named color attributes are not supported.';}};b.parse_group=function(i){i=trim(i).split(/ +/);if(i.length==4){return i;}else if(i.length==3){return [i[0],i[1],i[2],i[1]];}else if(i.length==2){return [i[0],i[1],i[0],i[1]];}else return [i[0],i[0],i[0],i[0]];};b.push=function(i){if(!b.active)b.active=[];b.active.push(i);if(b.active.length===1){if(!b.requestAnimationFrame){var j=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame;if(j)b.requestAnimationFrame=j.bind(d);}if(b.requestAnimationFrame){b.requestAnimationFrame(b._animate);}else b.timeout=setInterval(b._animate,b.resolution,false);}if(b.requestAnimationFrame)b._updateEndingTimer();b._animate(Date.now(),true);};b._updateEndingTimer=function(){if(!b.requestAnimationFrame)throw new Error('Ending timer only valid with requestAnimationFrame');var l=0;for(var i=0;i<b.active.length;i++){var n=b.active[i];for(var m=0;m<n.queue.length;m++){var j=n.queue[m].start+n.queue[m].duration;if(j>l)l=j;}}if(b.timeout){clearTimeout(b.timeout);delete b.timeout;}var k=Date.now();if(l>k)b.timeout=setTimeout(b._animate.shield(),l-k,false);};b._animate=function(l,k){l=l||Date.now();for(var j=(k===true)?b.active.length-1:0;j<b.active.length;j++)try{if(!b.active[j]._frame(l))b.active.splice(j--,1);}catch(i){b.active.splice(j--,1);}if(b.active.length===0){if(b.timeout){if(b.requestAnimationFrame){clearTimeout(b.timeout);}else clearInterval(b.timeout);delete b.timeout;}}else if(b.requestAnimationFrame)b.requestAnimationFrame(b._animate);};b.ease={};b.ease.begin=function(i){return Math.sin(Math.PI/2*(i-1))+1;};b.ease.end=function(i){return Math.sin(.5*Math.PI*i);};b.ease.both=function(i){return .5*Math.sin(Math.PI*(i-.5))+.5;};b.prependInsert=function(j,i){b.insert(j,i,DOM.prependContent);};b.appendInsert=function(j,i){b.insert(j,i,DOM.appendContent);};b.insert=function(k,i,j){a.setStyle(i,'opacity',0);j(k,i);b(i).from('opacity',0).to('opacity',1).duration(400).go();};d.animation=e.exports=b;},3);
__e("legacy:event-extensions",["event-extensions"],function(a,b,c,d){b('event-extensions');},3);
__e("legacy:array-utils",["ArrayUtils","hasArrayNature"],function(a,b,c,d){a.$A=b('ArrayUtils').createFrom;a.hasArrayNature=b('hasArrayNature');},3);
WidgetArbiter={_findSiblings:function(){if(WidgetArbiter._siblings)return;WidgetArbiter._siblings=[];for(var b=parent.frames.length-1;b>=0;b--)try{if(parent.frames[b]&&parent.frames[b].Arbiter&&parent.frames[b].Arbiter.inform)WidgetArbiter._siblings.push(parent.frames[b].Arbiter);}catch(a){}},inform:function(){WidgetArbiter._findSiblings();var a=$A(arguments);WidgetArbiter._siblings.each(function(b){b.inform.apply(b,a);});}};
__e("Locale",["css"],function(d,f,g,h,e,c){var a=f("css");var b={isRTL:function(){return 'rtl'===a.getStyle(document.body,'direction');}};e.exports=b;});
__e("legacy:intl-locale",["Locale"],function(a,b,c,d){a.intl_locale_is_rtl=b('Locale').isRTL;},3);
__e("Button",["event-extensions","css","DataStore","dom","Parent"],function(g,i,j,k,h,f){i('event-extensions');var b=i('css');var d=i('DataStore');var c=i('dom');var e=i('Parent');var a=(function(){var m='uiButtonDisabled';var l='uiButtonDepressed';var o='button:blocker';var n='href';function p(u,t){var s=d.get(u,o);if(t){if(s){s.remove();d.remove(u,o);}}else if(!s)d.set(u,o,Event.listen(u,'click',bagof(false),Event.Priority.URGENT));}function q(s){var t=e.byClass(s,'uiButton');if(!t)throw new Error('invalid use case');return t;}function r(s){return c.isNodeOfType(s,'a');}return {getInputElement:function(s){s=q(s);if(r(s))throw new Error('invalid use case');return c.find(s,'input');},isEnabled:function(s){return !b.hasClass(q(s),m);},setEnabled:function(v,s){v=q(v);b.conditionClass(v,m,!s);if(r(v)){var t=v.href;var w=d.get(v,n,'#');if(s){if(!t)v.href=w;}else{if(t&&t!==w)d.set(v,n,t);v.removeAttribute('href');}p(v,s);}else{var u=a.getInputElement(v);u.disabled=!s;p(u,s);}},setDepressed:function(t,s){b.conditionClass(q(t),l,s);},isDepressed:function(s){return b.hasClass(q(s),l);},setLabel:function(t,s){t=q(t);if(r(t)){var u=c.find(t,'span.uiButtonText');c.setContent(u,s);}else a.getInputElement(t).value=s;b.conditionClass(t,'uiButtonNoText',!s);},setIcon:function(t,s){if(!c.isNode(s))return;b.addClass(s,'customimg');t=q(t);var u=c.scry(t,'.img')[0];if(u!=s)if(u){c.replace(u,s);}else c.prependContent(t,s);}};})();g.Button=h.exports=a;},3);
!function(){var b=document.documentElement;var a=function(c){c=c||window.event;var d=c.target||c.srcElement;var g=d.getAttribute('placeholder');if(g){var f=Parent.byClass(d,'focus_target');if('focus'==c.type||'focusin'==c.type){var e=d.value.replace(/\r\n/g,'\n');var h=g.replace(/\r\n/g,'\n');if(e==h&&CSS.hasClass(d,'DOMControl_placeholder')){d.value='';CSS.removeClass(d,'DOMControl_placeholder');}if(f){CSS.addClass(f,'child_is_active');CSS.addClass(f,'child_is_focused');CSS.addClass(f,'child_was_focused');Arbiter.inform('reflow');}}else{if(d.value==''){CSS.addClass(d,'DOMControl_placeholder');d.value=g;f&&CSS.removeClass(f,'child_is_active');d.style.direction='';}f&&CSS.removeClass(f,'child_is_focused');}}};if(b.addEventListener){b.addEventListener('focus',a,true);b.addEventListener('blur',a,true);}else b.onfocusin=b.onfocusout=a;}();
__e("DOMControl",["DataStore","dom-core"],function(e,g,h,i,f,d){var c=g("DataStore");var a=g("dom-core").$;function b(j){this.root=a(j);this.updating=false;c.set(j,'DOMControl',this);}b.prototype={getRoot:function(){return this.root;},beginUpdate:function(){if(this.updating)return false;this.updating=true;return true;},endUpdate:function(){this.updating=false;},update:function(j){if(!this.beginUpdate())return this;this.onupdate(j);this.endUpdate();},onupdate:function(j){}};b.getInstance=function(j){return c.get(j,'DOMControl');};f.exports=b;});
__e("InputSelection",["dom","Input"],function(e,g,h,i,f,d){var a=g("dom");var b=g("Input");var c={get:function(k){if(!document.selection)return {start:k.selectionStart,end:k.selectionEnd};var m=document.selection.createRange();if(m.parentElement()!==k)return {start:0,end:0};var l=k.value.length;if(a.isNodeOfType(k,'input')){return {start:-m.moveStart('character',-l),end:-m.moveEnd('character',-l)};}else{var n=m.duplicate();n.moveToElementText(k);n.setEndPoint('StartToEnd',m);var j=l-n.text.length;n.setEndPoint('StartToStart',m);return {start:l-n.text.length,end:j};}},set:function(m,o,l){if(typeof l=='undefined')l=o;if(document.selection){if(m.tagName=='TEXTAREA'){var j=(m.value.slice(0,o).match(/\r/g)||[]).length;var k=(m.value.slice(o,l).match(/\r/g)||[]).length;o-=j;l-=j+k;}var n=m.createTextRange();n.collapse(true);n.moveStart('character',o);n.moveEnd('character',l-o);n.select();}else{m.selectionStart=o;m.selectionEnd=Math.min(l,m.value.length);b.focus(m);}}};f.exports=c;});
__e("enforceMaxLength",["event-extensions","function-extensions","dom","Input","InputSelection"],function(f,i,j,k,h,e){i("event-extensions");i("function-extensions");var a=i("dom");var b=i("Input");var c=i("InputSelection");var d=function(n,p){var t=b.getValue(n);var o=t.length;var q=o-p;if(q>0){var r;var l;try{r=c.get(n);l=r.end;}catch(m){r=null;l=0;}if(l>=q)o=l;var s=o-q;if(s&&(t.charCodeAt(s-1)&64512)===55296)s--;l=Math.min(l,s);b.setValue(n,t.slice(0,s)+t.slice(o));if(r)c.set(n,Math.min(r.start,l),l);}};var g=function(event){var l=event.getTarget();var m=l.getAttribute&&parseInt(l.getAttribute('maxlength'),10);if(m>0&&a.isNodeOfType(l,['input','textarea']))d.bind(null,l,m).defer();};Event.listen(document.documentElement,{keydown:g,paste:g});h.exports=d;});
__e("Input",["bootloader","css-core","dom","DOMControl"],function(g,j,k,l,i,f){var a=j("bootloader");var b=j("css-core");var c=j("dom");var d=j("DOMControl");var h=function(m){var n=m.getAttribute('maxlength');if(n&&n>0)l(["enforceMaxLength"],function(o){o(m,n);});};var e={focus:function(m){try{m.focus();}catch(n){}},isEmpty:function(m){return !(/\S/).test(m.value||'')||b.hasClass(m,'DOMControl_placeholder');},getValue:function(m){return e.isEmpty(m)?'':m.value;},setValue:function(n,o){b.removeClass(n,'DOMControl_placeholder');n.value=o||'';h(n);var m=d.getInstance(n);m&&m.resetHeight&&m.resetHeight();},setPlaceholder:function(m,n){m.setAttribute('title',n);m.setAttribute('placeholder',n);if(m==document.activeElement)return;if(e.isEmpty(m)){b.conditionClass(m,'DOMControl_placeholder',n);m.value=n||'';}},reset:function(m){var n=m!==document.activeElement?(m.getAttribute('placeholder')||''):'';m.value=n;b.conditionClass(m,'DOMControl_placeholder',n);m.style.height='';},setSubmitOnEnter:function(m,n){b.conditionClass(m,'enter_submit',n);},getSubmitOnEnter:function(m){return b.hasClass(m,'enter_submit');},setMaxLength:function(m,n){if(n>0){m.setAttribute('maxlength',n);h(m);}else m.removeAttribute('maxlength');}};i.exports=e;});
__e("legacy:input-methods",["Input","copyProperties"],function(c,d,e,f){var a=d('Input');var b=d('copyProperties');b(c.Input||(c.Input={}),a);},3);
onloadRegister(function(){Event.listen(document.documentElement,'submit',function(b){var a=b.getTarget().getElementsByTagName('*');for(var c=0;c<a.length;c++)if(a[c].getAttribute('placeholder')&&Input.isEmpty(a[c]))Input.setValue(a[c],'');});});
var ExternalNodeConnectWidget=function(i){copy_properties(this,{widgetID:i.widgetID,widget:$(i.widgetID),viewerID:i.viewer,nodeType:i.nodeType,viewerIsAdmin:i.viewerIsAdmin&&!i.userOptedOut,adminUrl:i.adminUrl,popupOptInParams:{},nodeUri:new URI(i.nodeURL),externalUrl:i.externalURL,pageId:i.pageId,domainId:i.domainId,layout:i.layout,edgeType:i.edgeType,error:i.error,errorURI:new URI('/'),alreadyConnected:i.alreadyConnected,usingConnectLibrary:!!i.channelURL,commentWidgetMarkup:i.commentWidgetMarkup,commentWidgetOpen:false,commentWidgetVisible:false,userProfile:null,connectStoryFbid:0,isAmbiguousText:i.isAmbiguousText,socialBar:i.socialbar,useDisconnectLink:i.useDisconnectLink,showError:i.showError,showConfirm:i.showConfirm,showFaces:i.showFaces,connectText:i.connectText,ref:i.ref,userOptedOut:i.userOptedOut,usingInlineCommenting:i.usingInlineCommenting,mobile:i.mobile,supportCommenting:!i.mobile&&(!!i.channelURL||i.usingInlineCommenting),inlineCommentListenersInitialized:false,inlineCommentFocused:false,forceCommentHooks:i.forceCommentHooks,nux:i.nux,iframeReferer:i.iframeReferer,isBlocked:i.isBlocked,isPersonalized:i.isPersonalized,confirmedConnect:i.confirmedConnect,hasSend:i.send,colorScheme:i.colorScheme,grayOut:i.grayOut});if(this.usingConnectLibrary)UnverifiedXD.init({autoResize:i.autoResize,channelUrl:i.channelURL,resizeWidth:i.autoResize&&i.layout!==ExternalNodeConnectWidget.STANDARD_LAYOUT});this.connectButtonSlider=DOM.scry(this.widget,'div.connect_button_slider');this.connectButtonContainer=null;if(this.connectButtonSlider.length){this.connectButtonSlider=this.connectButtonSlider[0];this.connectButtonContainer=DOM.find(this.connectButtonSlider,'div.connect_button_container');}else this.connectButtonSlider=null;this.connectButton=DOM.find(this.widget,'a.connect_widget_like_button');if(this.grayOut)this.tombstoneCross=DOM.find(this.widget,'div.tombstone_cross');this.connectedMessage=DOM.scry(this.widget,'span.connect_widget_connected_text');this.connectedMessage=this.connectedMessage.length?this.connectedMessage[0]:null;this.notConnectedMessage=DOM.scry(this.widget,'span.connect_widget_not_connected_text');this.notConnectedMessage=this.notConnectedMessage.length?this.notConnectedMessage[0]:null;this.adminSpans=DOM.scry(this.widget,'span.connect_widget_admin_span');if(this.adminSpans.length>0){this.adminLinks=[];for(var a=0;a<this.adminSpans.length;a++)this.adminLinks[a]=DOM.find(this.adminSpans[a],'a.connect_widget_admin_option');}if(this.layout==ExternalNodeConnectWidget.STANDARD_LAYOUT){this.confirmationCell=DOM.find(this.widget,'div.connect_confirmation_cell');this.userActionTextSpan=DOM.find(this.confirmationCell,'span.connect_widget_user_action');this.summaryTextSpan=DOM.find(this.confirmationCell,'span.connect_widget_summary');this.summaryText=DOM.find(this.confirmationCell,'div.connect_widget_text_summary');var j=DOM.scry(this.widget,'div.connect_widget_sample_connections');this.sampleConnections=j.length>0?j[0]:null;if(i.showFaces&&i.viewer>0){var e=DOM.scry(this.widget,'div.connect_widget_logged_in_user');this.loggedInUserPhotoDiv=e.length>0?e[0]:null;}}if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){this.originalButtonWidth=this.computeButtonDimensions().width;this.summaryIncluding=DOM.find(this.widget,'td.connect_widget_simple_including');this.supportCommenting=false;this.usingInlineCommenting=false;}this.setQueryData();if(this.pageId)copy_properties(this.popupOptInParams,{connect_id:this.pageId});this.errorSpans=DOM.scry(this.widget,'span.connect_widget_error_span');if(this.errorSpans.length>0){this.errorLinks=[];for(var b=0;b<this.errorSpans.length;b++)this.errorLinks[b]=DOM.find(this.errorSpans[b],'a.connect_widget_error_text');}this.confirmSpans=DOM.scry(this.widget,'span.connect_widget_confirm_span');if(this.confirmSpans.length>0){this.confirmLinks=[];for(var d=0;d<this.confirmSpans.length;d++)this.confirmLinks[d]=DOM.find(this.confirmSpans[d],'a.connect_widget_confirm_link');}this.unlikeSpans=DOM.scry(this.widget,'span.unlike_span');this.unlikeLinks=[];for(var c=0;c<this.unlikeSpans.length;c++){this.unlikeLinks[c]=DOM.find(this.unlikeSpans[c],'a.connect_widget_unlike_link');Event.listen(this.unlikeLinks[c],'click',this.connectToNodeOnClick.bind(this));}var h=DOM.scry(this.widget,'div.connect_widget_number_cloud');if(h.length==1){this.numberCloud=h[0];this.numberCloudNub=DOM.find(this.widget,'div.connect_widget_number_cloud_nub');this.numberCloudExtension=DOM.find(this.numberCloud,'div.connect_widget_number_cloud_extension');this.sizeNumberCloud();this.numberCloudUnlikeSpan=DOM.find(this.numberCloudExtension,'span.unlike_span');this.numberCloudReminderSpan=DOM.find(this.numberCloudExtension,'span.like_reminder');this.inAnimation=false;this.reminderIsVisible=CSS.hasClass(this.numberCloudUnlikeSpan,'hidden_elem');Event.listen(this.numberCloud,'mouseleave',this.restoreReminderSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseleave',this.restoreReminderSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseenter',this.exposeUnlikeSpan.bind(this));Event.listen(this.numberCloud,'mouseenter',this.exposeUnlikeSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseleave',function(event){this.requiresMouseLeaveEvent=false;}.bind(this));}if(this.usingInlineCommenting&&!this.showFaces){this.shareCommentSpans=DOM.scry(this.widget,'span.connect_widget_share_comment_span');for(var f=0;f<this.shareCommentSpans.length;f++){var k=DOM.find(this.shareCommentSpans[f],'a.connect_widget_share_comment_option');Event.listen(k,'click',function(event){for(var l=0;l<this.shareCommentSpans.length;l++)CSS.addClass(this.shareCommentSpans[l],'hidden_elem');this.presentCommentingOption();}.bind(this));}}if(this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){XD.forced_min_width=this.getButtonCountWidgetWidth();this.numberExcluding=DOM.find(this.widget,'td.connect_widget_button_count_excluding');this.summaryIncluding=DOM.find(this.widget,'td.connect_widget_button_count_including');this.thumbsUpIcon=DOM.find(this.summaryIncluding,'div.thumbs_up');this.undoRegion=DOM.find(this.summaryIncluding,'div.undo');this.originalButtonWidth=this.computeButtonDimensions().width;Event.listen(this.thumbsUpIcon,'mouseenter',function(event){this.undoButton=DOM.find(this.undoRegion,'label.undo_button input');Event.listen(this.undoButton,'click',this.connectToNodeOnClick.bind(this));CSS.addClass(this.thumbsUpIcon,'hidden_elem');CSS.removeClass(this.undoRegion,'hidden_elem');}.bind(this));Event.listen(this.undoRegion,'mouseleave',function(event){CSS.removeClass(this.thumbsUpIcon,'hidden_elem');CSS.addClass(this.undoRegion,'hidden_elem');}.bind(this));}if(!this.isBlocked){Event.listen(this.connectButton,'click',this.primaryLikeButtonOnClick.bind(this));if(this.grayOut)Event.listen(this.tombstoneCross,'click',this.connectToNodeOnClick.bind(this));}if(this.adminLinks)for(var a=0;a<this.adminLinks.length;a++)Event.listen(this.adminLinks[a],'click',this.presentAdminPage.bind(this));if(this.errorLinks)for(var a=0;a<this.errorLinks.length;a++)Event.listen(this.errorLinks[a],'click',this.presentErrorDialog.bind(this));if(this.confirmLinks)for(var g=0;g<this.confirmLinks.length;g++)Event.listen(this.confirmLinks[g],'click',this.presentConfirmDialog.bind(this));if(i.showCaptcha){this.showCaptcha=true;this.connectToNode(true);}if(this.forceCommentHooks)this.setupCommentHooks($(this.forceCommentHooks));this.textInputMarginWithButton=5;this.widthSyncArbiter=Arbiter.subscribe('platform/socialplugins/send/resize',this.syncSendWidgetWidth.bind(this));Arbiter.inform('platform/socialplugins/like/resize',{button_width:this.computeButtonDimensionsWithPadding().width,widget_width:Vector2.getElementDimensions(this.widget).x,layout:this.layout},Arbiter.BEHAVIOR_STATE);Arbiter.subscribe('platform/socialplugins/dialog',function(m,l){if(l.controllerID!==this.widgetID)this.otherCommentWidgetOpen=(l.event=='open');}.bind(this));Arbiter.subscribe('platform/socialplugins/dialog',function(m,l){if(l.controllerID!==this.divID&&l.event=='open')this.closeCommentWidget();}.bind(this));this.subscribeToSync(i);};copy_properties(ExternalNodeConnectWidget,{STANDARD_LAYOUT:'standard',BOX_COUNT_LAYOUT:'box_count',BUTTON_COUNT_LAYOUT:'button_count',SIMPLE_LAYOUT:'simple',COLOR_DARK:0,COLOR_LIGHT:1,OPT_IN_FACEBOOK_APP_ID:'127760087237610',updateLoggedInUser:function(b){var a=ExternalNodeConnectWidget.controllerManagingLogin;a.setLoggedIn(b);a.connectToNode(true);a.userOptedOut=false;delete ExternalNodeConnectWidget.controllerManagingLogin;Arbiter.inform('platform/socialplugins/login',{user:b.user},Arbiter.BEHAVIOR_STATE);WidgetArbiter.inform('platform/socialplugins/login',{user:b.user},Arbiter.BEHAVIOR_STATE);},onCommentWidgetLoaded:function(a){var b=ExternalNodeConnectWidget.self;delete ExternalNodeConnectWidget.self;b.injectCommentWidgetMarkup(a);}});copy_properties(ExternalNodeConnectWidget.prototype,{getSyncEndpointName:function(){},getConnectionEndpointName:function(){},getPluginName:function(){},subscribeToSync:function(a){Arbiter.subscribe('platform/socialplugins/login',function(c,b){if(this.viewerID&&b.user!==this.viewerID)document.location.reload();}.bind(this));Arbiter.subscribe(this.getSyncEndpointName(),function(c,b){if(b.externalUrl==a.externalURL){this.userOptedOut=false;this.updateWidget(b.opts,true);}}.bind(this));},setQueryData:function(){copy_properties(this.popupOptInParams,{protocol:window.location.protocol,external_page_url:this.externalUrl});if(this.nux)copy_properties(this.popupOptInParams,{nux:this.nux,referer:this.iframeReferer});},updateWidget:function(e,d,b){var a=(this.alreadyConnected!=e.nowConnected)||(this.showConfirm!=e.showConfirm);if(!d)Arbiter.inform(this.getConnectionEndpointName(),e,Arbiter.BEHAVIOR_STATE);this.alreadyConnected=e.nowConnected;this.viewerIsAdmin=e.isAdmin;this.showError=e.showError;this.showConfirm=e.showConfirm;this.adminUrl=e.adminUrl;this.userProfile=e.userProfile;this.connectStoryFbid=e.connectStoryFbid;this.error=e.error;if(!e.nowConnected)this.closeCommentWidget();if(a&&!d||b){var c=e.nowConnected?'edgeCreated':'edgeRemoved';UnverifiedXD.send({type:c});}if(a||this.error)this.syncWidgetDisplay();if(!d||b)WidgetArbiter.inform(this.getSyncEndpointName(),{externalUrl:this.externalUrl,opts:e},Arbiter.BEHAVIOR_STATE);},presentOptIn:function(){ExternalNodeConnectWidget.controllerManagingLogin=this;PlatformOptInPopup.open(this.getPluginName(),'opt.inlike',this.popupOptInParams);UnverifiedXD.send({type:'authPrompted'});},setLoggedIn:function(a){this.viewerID=a.user;this.newProfilePic=a.profilePic;this.placeFormUserCheck(a.formUserCheck,a.fbDtsg);},placeFormUserCheck:function(b,a){Env.fb_dtsg=a;if(ge('post_form_id')){DOM.replace($('post_form_id'),HTML(b));}else DOM.appendContent(DOM.find(document,'body'),HTML(b));},syncWidgetWithServer:function(c){var b=c.getPayload();if(b.requires_login){this.updateWidget({nowConnected:false,isAdmin:false},false);this.presentOptIn();return;}var a={nowConnected:b.success&&b.already_connected,isAdmin:b.is_admin,showError:b.show_error,showConfirm:b.show_confirm,adminUrl:b.admin_url,userProfile:b.user_profile,connectStoryFbid:b.story_fbid,error:b.error_info};this.updateWidget(a,!b.success,b.success);if(b.success&&this.showCaptcha){window.opener.location.reload();window.close();}},getButtonCountWidgetWidth:function(){var a=DOM.find(this.widget,'table.connect_widget_interactive_area');var b=CSS.getStyle(a,'width');return parseInt(b,10);},sizeNumberCloud:function(){this.collapsedNumberCloudHeight=this.getCollapsedNumberCloudHeight();this.expandedNumberCloudHeight=this.collapsedNumberCloudHeight+this.getNumberCloudExtensionHeight();if(this.alreadyConnected)CSS.setStyle(this.numberCloud,'height',this.expandedNumberCloudHeight+'px');var a=this.computeButtonDimensionsWithPadding().width;XD.forced_min_width=a;var b=intl_locale_is_rtl();a-=2;CSS.setStyle(this.numberCloud,'width',a+'px');CSS.setStyle(this.numberCloud,'visibility','visible');animation(this.numberCloud).from('opacity',0).to('opacity',1).duration(100).go();},getCollapsedNumberCloudHeight:function(){var b=Vector2.getElementDimensions(this.numberCloud).y;var d=parseInt(CSS.getStyle(this.numberCloud,'paddingTop'),10);var c=parseInt(CSS.getStyle(this.numberCloud,'paddingBottom'),10);var a=parseInt(CSS.getStyle(this.numberCloud,'border'),10);return b-d-c-2;},getNumberCloudExtensionHeight:function(){CSS.addClass(this.numberCloudExtension,'connect_widget_offscreen');if(!this.alreadyConnected)CSS.removeClass(this.numberCloudExtension,'hidden_elem');var a=Vector2.getElementDimensions(this.numberCloudExtension).y;if(!this.alreadyConnected)CSS.addClass(this.numberCloudExtension,'hidden_elem');CSS.removeClass(this.numberCloudExtension,'connect_widget_offscreen');return a;},restoreReminderSpan:function(event){if(this.reminderIsVisible||this.inAnimation)return;this.animateReminderSpanReappearance();},animateReminderSpanReappearance:function(){if(this.reminderIsVisible||this.inAnimation)return;this.inAnimation=true;CSS.addClass(this.numberCloudUnlikeSpan,'hidden_elem');CSS.setStyle(this.numberCloudReminderSpan,'opacity',0);CSS.removeClass(this.numberCloudReminderSpan,'hidden_elem');animation(this.numberCloudReminderSpan).to('opacity',1).duration(100).ondone(function(){this.inAnimation=false;this.reminderIsVisible=true;}.bind(this)).go();},exposeUnlikeSpan:function(event){if(!this.alreadyConnected||this.requiresMouseLeaveEvent||!this.reminderIsVisible||this.inAnimation)return;this.inAnimation=true;CSS.addClass(this.numberCloudReminderSpan,'hidden_elem');CSS.setStyle(this.numberCloudUnlikeSpan,'opacity',0);CSS.removeClass(this.numberCloudUnlikeSpan,'hidden_elem');animation(this.numberCloudUnlikeSpan).to('opacity',1).duration(100).ondone(function(){this.inAnimation=false;this.reminderIsVisible=false;}.bind(this)).go();},conditionallyActivateButton:function(event){this.commentButtonIsActive=this.inlineCommentInput.value.trim().length>0;},updateConnectionWithComment:function(event){Event.kill(event);if(this.commentButtonIsActive){this.postInlineComment();this.resetInlineComment();this.closeInlineComment();}},postInlineComment:function(){this.postUserComment(this.inlineCommentInput.value.trim(),false,'iframe');},resetInlineComment:function(){this.concealCommentButton();var a=this.inlineCommentInput.getAttribute('placeholder');this.inlineCommentInput.value=a;},showInlineComment:function(event){Event.kill(event);if(!this.inlineCommentFlyoutOpen||this.inlineCommentFlyoutVisible||this.showConfirm||this.error)return;this.inlineCommentFlyoutVisible=true;CSS.show(this.inlineCommentFlyout);},hideInlineComment:function(event){if(event)Event.kill(event);if(this.inlineCommentFocused||!this.inlineCommentFlyoutOpen||!this.inlineCommentFlyoutVisible)return;if(event&&DOM.contains(this.inlineCommentFlyout,event.getRelatedTarget()))return;var b=this.inlineCommentInput.value.trim();var a=this.inlineCommentInput.getAttribute('placeholder');if(b.length>0&&b!=a)return;this.inlineCommentFlyoutVisible=false;CSS.hide(this.inlineCommentFlyout);},closeInlineComment:function(){this.inlineCommentFlyoutVisible=false;this.inlineCommentFlyoutOpen=false;CSS.hide(this.inlineCommentFlyout);this.resetInlineComment();},concealCommentButton:function(){CSS.addClass(this.inlineCommentButton,'hidden_elem');CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithoutButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',0);},positionInlineCommentFlyout:function(){CSS.addClass(this.inlineCommentFlyout,'comment_widget_offscreen');CSS.removeClass(this.inlineCommentFlyout,'hidden_elem');var b=0;var a=this.computeButtonDimensions();var e=a.height;var d=this.grayOut?b:b+20;var g=intl_locale_is_rtl()?'right':'left';if(this.showFaces){var k=DOM.scry(this.widget,'span.connect_widget_text')[0];var h=intl_locale_is_rtl()?'paddingRight':'paddingLeft';var l=CSS.getStyle(k,h);d=this.grayOut?b:b+parseInt(l,10);var i=Vector2.getElementDimensions(this.sampleConnections).y;e=i-3;}var j=Vector2.getElementDimensions(this.summaryText).y;if(j>15)e+=2;CSS.setStyle(this.inlineCommentFlyout,g,d+'px');CSS.setStyle(this.inlineCommentFlyout,'top',(-e)+'px');var n=Vector2.getElementPosition(this.widget,'document').x;var m=Vector2.getElementDimensions(this.widget).x;var o=n+m-d-5;CSS.setStyle(this.inlineCommentFlyout,'width',o+'px');CSS.removeClass(this.inlineCommentButton,'hidden_elem');var f=Vector2.getElementDimensions(this.inlineCommentButton).x;CSS.addClass(this.inlineCommentButton,'hidden_elem');var c=(this.inlineCommentClose)?15:0;this.textInputWidthWithoutButton=o-24-c;this.textInputWidthWithButton=this.textInputWidthWithoutButton-f-this.textInputMarginWithButton-1;CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithoutButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',0);CSS.removeClass(this.inlineCommentFlyout,'comment_widget_offscreen');CSS.addClass(this.inlineCommentFlyout,'hidden_elem');},postUserComment:function(a,c,d){var b={href:this.externalUrl,node_type:this.nodeType,edge_type:this.edgeType,page_id:this.pageId,connect_text:this.connectText,story_fbid:this.connectStoryFbid,comment:a,widget_type:d||'xfbml',own_product:c};new AsyncRequest().setURI(this.getCommentAjaxEndpoint()).setData(b).setNectarModuleDataSafe().setNectarImpressionIdSafe().send();this.closeCommentWidget();},closeCommentWidget:function(){if(this.commentWidgetOpen){delete this.inGracePeriod;delete this.commentWidgetIsExpanded;this.commentWidgetVisible=false;this.commentWidgetOpen=false;UnverifiedXD.send({type:'dismissEdgeCommentDialog'});}},presentAdminPage:function(){var a='_blank';window.open(this.adminUrl.toString(),a);},presentErrorDialog:function(){if(!this.error.errorUri)return;var b='_blank';var a='toolbar=0, status=0, width=960, height=300';window.open(this.error.errorUri.toString(),b,a);},presentConfirmDialog:function(){var b='_blank';var a='toolbar=0,status=0,width=450,height=200,scrollbars=0,location=0,menubar=0';if(!window.confirmDialogReturn)window.confirmDialogReturn={};window.confirmDialogReturn[this.widgetID]=this;var c=this.getConfirmURL();window.open(c,b,a);},returnFromConfirmDialog:function(a){if(a){this.showConfirm=null;this.confirmedConnect=a;this.connectToNode(!this.alreadyConnected);}else this.updateWidget({nowConnected:this.alreadyConnected,showConfirm:null,isAdmin:this.viewerIsAdmin},false);},syncWidgetDisplay:function(){var a=this.alreadyConnected;this.setButtonState(a);this.showElementIf(this.connectedMessage,a);this.showElementIf(this.notConnectedMessage,!a);if(this.adminSpans)for(var b=0;b<this.adminSpans.length;b++)this.showElementIf(this.adminSpans[b],this.viewerIsAdmin);if(this.errorSpans)for(var c=0;c<this.errorSpans.length;c++)this.showElementIf(this.errorSpans[c],this.error&&(this.viewerIsAdmin||this.showError));for(var f=0;f<this.confirmSpans.length;f++)this.showElementIf(this.confirmSpans[f],!this.alreadyConnected&&this.showConfirm);for(var d=0;d<this.unlikeSpans.length;d++)this.showElementIf(this.unlikeSpans[d],this.alreadyConnected);if(this.shareCommentSpans)for(var e=0;e<this.shareCommentSpans.length;e++)this.showElementIf(this.shareCommentSpans[e],a);this.showElementIf(this.connectButton,(!this.useDisconnectLink||!a)&&!this.showConfirm);if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT){this.manageBoxCountButtonAnimation(a);}else if(this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){this.manageButtonCountButtonAnimation(a);}else if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){this.manageSimpleButtonAnimation(a);}else this.manageStandardButtonAnimation(a);if(!this.loggedInUserPhotoDiv)return;if(a){this.slideUserPhotoIn(this.loggedInUserPhotoDiv);}else this.slideUserPhotoOut(this.loggedInUserPhotoDiv);},manageStandardButtonAnimation:function(a){if(this.grayOut)return;if(this.alreadyConnected||this.showConfirm){this.hideButton(true);}else this.hideButton(false);},setButtonState:function(a){if(a){CSS.removeClass(this.connectButton,'like_button_no_like');CSS.addClass(this.connectButton,'like_button_like');this.fixIEButtonDoubleLineBug();}else{CSS.addClass(this.connectButton,'like_button_no_like');CSS.removeClass(this.connectButton,'like_button_like');}},fixIEButtonDoubleLineBug:function(){if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&ua.ie()<=7&&!this.hasBeenFixed){var a=this.computeButtonDimensionsWithPadding();CSS.setStyle(this.connectButton,'width',a.width+1);this.hasBeenFixed=true;}},hideButton:function(a){if(this.layout!=='standard')return;if(this.oAnimateBlind)this.oAnimateBlind.stop();this.oAnimateBlind=animation(this.connectButtonSlider).duration(150);var c=1,b=intl_locale_is_rtl(),d=b?'marginRight':'marginLeft',e=b?'marginLeft':'marginRight';if(a){CSS.addClass(this.connectButtonContainer,'hidden');this.oAnimateBlind.ondone(function(){CSS.setStyle(this.connectButtonContainer,d,'2px');CSS.setStyle(this.connectButtonContainer,'visibility','hidden');CSS.addClass(this.confirmationCell,'connect_confirmation_cell_like');CSS.removeClass(this.confirmationCell,'connect_confirmation_cell_no_like');this.oAnimateBlind=null;}.bind(this));}else{CSS.setStyle(this.connectButtonContainer,d,'0px');c=Vector2.getElementDimensions(this.connectButton).x;this.oAnimateBlind.ondone(function(){CSS.setStyle(this.connectButtonSlider,'overflow','visible');CSS.setStyle(this.connectButtonSlider,'width','auto');CSS.removeClass(this.confirmationCell,'connect_confirmation_cell_like');CSS.addClass(this.confirmationCell,'connect_confirmation_cell_no_like');CSS.setStyle(this.connectButtonContainer,'visibility','visible');CSS.removeClass(this.connectButtonContainer,'hidden');this.oAnimateBlind=null;}.bind(this));}this.oAnimateBlind.to('width',c).blind().go();},showElementIf:function(a,b){if(!a)return;if(b){CSS.show(a);}else CSS.hide(a);},slideUserPhotoIn:function(b){if(!CSS.hasClass(b,'connect_widget_user_not_connected'))return;var a=CSS.getStyle(b,'width');CSS.setStyle(b,'width',0);CSS.setStyle(b,'opacity',0);CSS.removeClass(b,'connect_widget_user_not_connected');animation(b).to('width',a).duration(100).checkpoint().to('opacity',1).duration(400).go();},slideUserPhotoOut:function(a){if(CSS.hasClass(a,'connect_widget_user_not_connected'))return;animation(a).to('opacity',0).duration(100).checkpoint(.25).to('width',0).duration(100).ondone(function(){CSS.addClass(a,'connect_widget_user_not_connected');CSS.setStyle(a,'width',null);}).go();},primaryLikeButtonOnClick:function(event){if(this.grayOut&&this.alreadyConnected&&!this.mobile)return;this.connectToNodeOnClick(event);if(this.tombstoneCross&&this.alreadyConnected)DOM.replace(this.tombstoneCross,HTML('<div class="tombstone_cross tombstone_cross_static" />'));setTimeout(function(){this.tombstoneCross=DOM.find(this.widget,'div.tombstone_cross');CSS.removeClass(this.tombstoneCross,'tombstone_cross_static');Event.listen(this.tombstoneCross,'click',this.connectToNodeOnClick.bind(this));}.bind(this),1000);},_clickLocked:false,connectToNodeOnClick:function(event){Event.kill(event);if(!this._clickLocked){this._clickLocked=true;setTimeout(function(){this._clickLocked=false;}.bind(this),1000);if(this.viewerID==0||this.userOptedOut){this.presentOptIn();}else this.connectToNode(!this.alreadyConnected);}},connectToNode:function(d){if(!d){if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT)return;if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&!this.usingConnectLibrary){CSS.addClass(this.userActionTextSpan,'hidden_elem');CSS.removeClass(this.summaryTextSpan,'hidden_elem');CSS.setStyle(this.summaryTextSpan,'opacity',1);}if(this.shareCommentSpans)for(var b=0;b<this.shareCommentSpans.length;b++)CSS.addClass(this.shareCommentSpans[b],'hidden_elem');if(this.commentWidgetOpen){this.closeCommentWidget();}else if(this.inlineCommentFlyoutOpen)this.closeInlineComment();}this.updateWidget({nowConnected:!this.alreadyConnected,isAdmin:this.viewerIsAdmin},true);var a={href:this.externalUrl,node_type:this.nodeType,edge_type:this.edgeType,page_id:this.pageId,layout:this.layout,is_personalized:this.isPersonalized,show_captcha:this.showCaptcha,connect_text:this.connectText,ref:this.ref,now_connected:d,post_form_id:$('post_form_id').value,iframe_referer:this.iframeReferer};if(this.confirmedConnect)a.confirm=1;new AsyncRequest().setURI(this.getAjaxEndpoint()).setHandler(this.syncWidgetWithServer.bind(this)).setData(a).setNectarModuleDataSafe().setNectarImpressionIdSafe().send();if(d){if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT)this.requiresMouseLeaveEvent=true;if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&!this.usingConnectLibrary){CSS.setStyle(this.userActionTextSpan,'opacity',1);CSS.removeClass(this.userActionTextSpan,'hidden_elem');CSS.addClass(this.summaryTextSpan,'hidden_elem');Event.listen(this.widget,'mouseleave',this.transitionBetweenMessages.bind(this));}if(this.shareCommentSpans){for(var c=0;c<this.shareCommentSpans;c++)CSS.removeClass(this.shareCommentSpans[c],'hidden_elem');}else if(this.supportCommenting)this.presentCommentingOption();this.repositionFacepileVertically();}},transitionBetweenMessages:function(event){if(!this.alreadyConnected||CSS.hasClass(this.userActionTextSpan,'hidden_elem'))return;animation(this.userActionTextSpan).to('opacity',0).duration(500).ondone(function(){CSS.addClass(this.userActionTextSpan,'hidden_elem');CSS.setStyle(this.summaryTextSpan,'opacity',0);CSS.removeClass(this.summaryTextSpan,'hidden_elem');animation(this.summaryTextSpan).to('opacity',1).duration(500).ondone(function(){this.repositionFacepileVertically();}.bind(this)).go();this.positionInlineCommentFlyout();}.bind(this)).go();},presentCommentingOption:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.widgetID,event:'open'});if(this.usingConnectLibrary){ExternalNodeConnectWidget.self=this;var a={type:'presentEdgeCommentDialog',masterFrameName:window.name,version:2};if(this.layout==ExternalNodeConnectWidget.BOX_COUNT_LAYOUT){a.preComputedWidthOffset=this.computeButtonDimensionsWithPadding().width;if(!intl_locale_is_rtl())a.preComputedWidthOffset+=8;}if(this.socialBar){a.left=parseInt(CSS.getStyle(document.getElementById('profile'),'width'),10)+1;}else if(this.hasSend&&this.layout==ExternalNodeConnectWidget.STANDARD_LAYOUT)a.preComputedWidthOffset=this.invertedButtons?0:65;UnverifiedXD.send(a);this.commentWidgetOpen=true;this.commentWidgetVisible=true;this.commentWidgetExpanded=true;}else if(this.usingInlineCommenting)if(!this.inlineCommentListenersInitialized){this.unwrapComment();this.initializeInlineCommentListeners();this.openInlineCommentFlyout();this.positionInlineCommentFlyout();this.inlineCommentListenersInitialized=true;}else{this.positionInlineCommentFlyout();this.openInlineCommentFlyout();}},unwrapComment:function(){if(this.unwrapComment.done)return;var b=$('connect-widget-comment-box-markup'),a=ExternalNodeConnectWidget.commentMarkup;b.innerHTML=a;this.unwrapComment.done=true;},initializeInlineCommentListeners:function(){this.inlineCommentFlyout=DOM.find(this.widget,'.connect_widget_comment_box');this.inlineCommentInput=DOM.find(this.inlineCommentFlyout,'.connect_widget_comment_textinput');this.inlineCommentButton=DOM.find(this.inlineCommentFlyout,'.connect_widget_comment_button');this.inlineCommentClose=DOM.scry(this.inlineCommentFlyout,'.connect_widget_comment_close_button');if(this.inlineCommentClose.length>0)this.inlineCommentClose=this.inlineCommentClose[0];this.commentButtonIsActive=false;Event.listen(this.inlineCommentInput,'keyup',this.conditionallyActivateButton.bind(this));Event.listen(this.inlineCommentInput,'focus',function(){this.inlineCommentFocused=true;this.exposeCommentButton();}.bind(this));Event.listen(this.inlineCommentButton,'click',this.updateConnectionWithComment.bind(this));Event.listen(this.inlineCommentInput,'blur',function(){this.inlineCommentFocused=false;this.hideInlineComment();}.bind(this));Event.listen(this.widget,'mouseout',this.hideInlineComment.bind(this));Event.listen(this.widget,'mouseover',this.showInlineComment.bind(this));if(this.inlineCommentClose)Event.listen(this.inlineCommentClose,'click',function(event){for(var a=0;a<this.shareCommentSpans.length;a++)CSS.removeClass(this.shareCommentSpans[a],'hidden_elem');this.closeInlineComment();}.bind(this));},exposeCommentButton:function(event){if(!CSS.hasClass(this.inlineCommentButton,'hidden_elem'))return;CSS.removeClass(this.inlineCommentButton,'hidden_elem');CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',this.textInputMarginWithButton+'px');},openInlineCommentFlyout:function(){CSS.show(this.inlineCommentFlyout);this.inlineCommentFlyoutOpen=true;this.inlineCommentFlyoutVisible=true;},manageBoxCountButtonAnimation:function(a){if(a&&!this.showConfirm){this.animateBoxCountButtonDisappearance();}else this.animateBoxCountButtonReappearance();},animateBoxCountButtonDisappearance:function(){if(this.grayOut)return;CSS.addClass(this.connectButton,'hidden_elem');CSS.setStyle(this.numberCloudExtension,'opacity',0);CSS.removeClass(this.numberCloudExtension,'hidden_elem');CSS.addClass(this.numberCloudNub,'hidden_elem');CSS.addClass(this.numberCloudUnlikeSpan,'hidden_elem');CSS.removeClass(this.numberCloudReminderSpan,'hidden_elem');animation(this.numberCloud).to('height',this.expandedNumberCloudHeight).duration(100).ondone(function(){animation(this.numberCloudExtension).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();},animateBoxCountButtonReappearance:function(){CSS.addClass(this.numberCloudExtension,'hidden_elem');animation(this.numberCloud).to('height',this.collapsedNumberCloudHeight).duration(75).ondone(function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else{CSS.setStyle(this.connectButton,'opacity',0);CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('opacity',0).to('opacity',1).duration(75).ondone(function(){CSS.setStyle(this.numberCloudNub,'opacity',0);CSS.removeClass(this.numberCloudNub,'hidden_elem');animation(this.numberCloudNub).from('opacity',0).to('opacity',1).duration(50).go();}.bind(this)).go();}}.bind(this)).go();},manageButtonCountButtonAnimation:function(a){if(a&&!this.showConfirm){this.animateButtonCountButtonDisappearance();}else this.animateButtonCountButtonReappearance();if(!this.grayOut){CSS.removeClass(this.thumbsUpIcon,'hidden_elem');CSS.addClass(this.undoRegion,'hidden_elem');}},manageSimpleButtonAnimation:function(a){if(this.grayOut)return;if(a&&!this.showConfirm){this.animateSimpleButtonDisappearance();}else this.animateSimpleButtonReappearance();},animateButtonCountButtonDisappearance:function(){if(!this.grayOut)animation(this.connectButton).from('opacity',1).to('opacity',0).from('width',this.originalButtonWidth).to('width','0px').ondone(function(){CSS.addClass(this.connectButton,'hidden_elem');}.bind(this)).duration(100).go();animation(this.numberExcluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.numberExcluding,'hidden_elem');CSS.setStyle(this.summaryIncluding,'opacity',0);CSS.removeClass(this.summaryIncluding,'hidden_elem');animation(this.summaryIncluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();for(var a=0;a<this.confirmSpans.length;a++)CSS.addClass(this.confirmSpans[a],'hidden_elem');if(this.grayOut)CSS.removeClass(this.connectButton,'hidden_elem');},animateSimpleButtonDisappearance:function(){animation(this.connectButton).from('opacity',1).to('opacity',0).from('width',this.originalButtonWidth).to('width','0px').ondone(function(){CSS.addClass(this.connectButton,'hidden_elem');CSS.setStyle(this.summaryIncluding,'opacity',0);CSS.removeClass(this.summaryIncluding,'hidden_elem');animation(this.summaryIncluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).duration(50).go();for(var a=0;a<this.confirmSpans.length;a++)CSS.addClass(this.confirmSpans[a],'hidden_elem');if(this.grayOut)CSS.removeClass(this.connectButton,'hidden_elem');},computeButtonDimensions:function(){var c=CSS.hasClass(this.connectButton,'hidden_elem');if(c){CSS.addClass(this.connectButton,'connect_widget_offscreen');CSS.removeClass(this.connectButton,'hidden_elem');}var a=Vector2.getElementDimensions(this.connectButton);var d=a.x;var b=a.y;var f=parseInt(CSS.getStyle(this.connectButton,'paddingLeft'),10);var g=parseInt(CSS.getStyle(this.connectButton,'paddingRight'),10);var h=parseInt(CSS.getStyle(this.connectButton,'paddingTop'),10);var e=parseInt(CSS.getStyle(this.connectButton,'paddingBottom'),10);if(c){CSS.addClass(this.connectButton,'hidden_elem');CSS.removeClass(this.connectButton,'connect_widget_offscreen');}return {width:d-f-g-2,height:b};},computeButtonDimensionsWithPadding:function(){var c=CSS.hasClass(this.connectButton,'hidden_elem');if(c){CSS.addClass(this.connectButton,'connect_widget_offscreen');CSS.removeClass(this.connectButton,'hidden_elem');}var a=Vector2.getElementDimensions(this.connectButton);var d=a.x;var b=a.y;if(ua.ie())d+=3;if(c){CSS.addClass(this.connectButton,'hidden_elem');CSS.removeClass(this.connectButton,'connect_widget_offscreen');}return {width:d,height:b};},animateButtonCountButtonReappearance:function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else if(!this.grayOut){CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('width','0px').to('width',this.originalButtonWidth).from('opacity',0).to('opacity',1).duration(100).go();}CSS.setStyle(this.summaryIncluding,'opacity',1);animation(this.summaryIncluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.summaryIncluding,'hidden_elem');CSS.setStyle(this.numberExcluding,'opacity',0);CSS.removeClass(this.numberExcluding,'hidden_elem');animation(this.numberExcluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();},animateSimpleButtonReappearance:function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else{CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('width','0px').to('width',this.originalButtonWidth).from('opacity',0).to('opacity',1).duration(100).go();}CSS.setStyle(this.summaryIncluding,'opacity',1);animation(this.summaryIncluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.summaryIncluding,'hidden_elem');}.bind(this)).go();},injectCommentWidgetMarkup:function(a){this.commentDocument=a;this.commentDocument.body.innerHTML=this.commentWidgetMarkup;this.transferCSSStyles();if(this.newProfilePic){var c=DOM.find(this.commentDocument,'img.connect_comment_widget_user_pic');c.src=this.newProfilePic;delete this.newProfilePic;}if(ua.ie()){var f=DOM.scry(this.commentDocument,'.connect_comment_share_preview_pic');if(f.length>0){f=f[0];var e=50;var d=Vector2.getElementDimensions(f);var g=e/d.x;if(g<1){CSS.setStyle(f,'width',e);CSS.setStyle(f,'height',d.y*g);}}}this.setupCommentHooks(this.commentDocument);this.commentWidgetIsExpanded=!this.inlineUnlikeLink;var b=this.getCommentActivatingComponent();b.onmouseout=this.commentDocument.body.onmouseout=this.onCommentMouseOut.bind(this);b.onmouseover=this.commentDocument.body.onmouseover=this.onCommentMouseOver.bind(this);this.inGracePeriod=false;},onCommentMouseOut:function(a){this.mouseOutside=true;return true;},onCommentMouseOver:function(a){this.mouseOutside=false;return true;},setupCommentHooks:function(a){this.placeholderInputRegion=DOM.find(a,'div.connect_comment_widget_placeholder_input_region');this.placeholderInput=DOM.find(this.placeholderInputRegion,'input.connect_comment_widget_placeholder_input');this.fullInputRegion=DOM.find(a,'div.connect_comment_widget_full_input_region');this.fullInputTextarea=DOM.find(this.fullInputRegion,'textarea.connect_comment_widget_full_input_textarea');this.ownProductCheckbox=DOM.scry(a,'input.connect_comment_widget_own_product_checkbox');if(this.ownProductCheckbox.length>0)this.ownProductCheckbox=this.ownProductCheckbox[0];this.widgetButtonRegion=DOM.find(a,'div.connect_comment_widget_button_region');this.postToFacebookButton=DOM.scry(this.widgetButtonRegion,'.connect_comment_widget_post_button input');if(this.postToFacebookButton.length>0){this.postToFacebookButton=this.postToFacebookButton[0];this.postToFacebookButton.onclick=this.updateUserComment.bind(this);}this.closeButton=DOM.scry(this.widgetButtonRegion,'.connect_comment_widget_close_button input');if(this.closeButton.length>0){this.closeButton=this.closeButton[0];this.closeButton.onclick=this.closeCommentWidget.bind(this);}this.inlineUnlikeLink=DOM.scry(a,'a.connect_comment_widget_unlike_link');if(this.inlineUnlikeLink.length>0){this.inlineUnlikeLink=this.inlineUnlikeLink[0];this.inlineUnlikeLink.onclick=this.connectToNodeOnClick.bind(this);}this.defaultInputText=this.placeholderInput.value;this.placeholderInput.onfocus=this.transitionToFullInputMode.bind(this);this.fullInputTextarea.onfocus=this.removePlaceholderText.bind(this);this.fullInputTextarea.onblur=(function(b){this.restorePlaceholderText();if(this.mouseOutside)return this.hideCommentWidget();}).bind(this);if(this.inlineUnlikeLink)this.inlineUnlikeLink.onclick=this.connectToNodeOnClick.bind(this);if(this.closeButton){this.closeButton.onclick=this.closeCommentWidget.bind(this);this.fullInputTextarea.onkeydown=(function(b){b=b||window.event;if(!b)return true;if(b.keyCode==13&&!(b.ctrlKey||b.shiftKey||b.altKey||b.metaKey)){this.updateUserComment();return false;}if(this.didResetOnKeydown)return true;this.removePlaceholderText();this.didResetOnKeydown=true;return true;}).bind(this);this.transitionToFullInputMode();}},getCommentActivatingComponent:function(){if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT||this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){return this.widget;}else if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){return this.widget;}else if(this.grayOut){return DOM.find(this.widget,'table.connect_widget_interactive_area');}else return this.confirmationCell;},showCommentWidget:function(event){if(this.otherCommentWidgetOpen)return false;this.inGracePeriod=true;this.killCloseThread();if(this.commentWidgetOpen&&!this.commentWidgetVisible){this.commentWidgetVisible=true;CSS.show(this.commentDocument.body);UnverifiedXD.send({type:'showEdgeCommentDialog'});}return false;},hideCommentWidget:function(event){if(this.otherCommentWidgetOpen)return false;this.inGracePeriod=false;if(this.commentWidgetOpen&&this.commentWidgetVisible){var a=function(){if(!this.inGracePeriod&&this.shouldHideExpandedWidget()){this.fullInputTextarea.blur();this.commentWidgetVisible=false;if(!this.socialBar)CSS.hide(this.commentDocument.body);UnverifiedXD.send({type:'hideEdgeCommentDialog'});}this.inGracePeriod=false;this.killCloseThread();}.bind(this);this.closeThreadID=setTimeout(a,100);}return false;},shouldHideExpandedWidget:function(){return !this.commentWidgetIsExpanded||this.fullInputTextarea.value===''||this.fullInputTextarea.value===this.defaultInputText;},killCloseThread:function(){if(this.closeThreadID){clearTimeout(this.closeThreadID);delete this.closeThreadID;}},transferCSSStyles:function(){var e=DOM.scry(window.document,'link');var f=DOM.scry(window.document,'style');var d=DOM.find(window.document,'html');var h=DOM.find(this.commentDocument,'html');var g=DOM.find(this.commentDocument,'head');for(var b=0;b<e.length;b++)if(e[b].rel=='stylesheet'){var c=this.commentDocument.createElement('link');c.rel=e[b].rel;c.href=e[b].href;c.type=e[b].type;g.appendChild(c);}for(b=0;b<f.length;b++){var i=this.commentDocument.createElement('style');var a=f[b].innerText||f[b].textContent||f[b].innerHTML;i.setAttribute("type","text/css");g.appendChild(i);if(i.styleSheet){i.styleSheet.cssText=a;}else{var j=this.commentDocument.createTextNode(a);i.appendChild(j);}}h.id=d.id;h.className=d.className;this.commentDocument.body.className=window.document.body.className;},transitionToFullInputMode:function(event){this.commentWidgetIsExpanded=true;CSS.hide(this.placeholderInputRegion);CSS.show(this.fullInputRegion);CSS.show(this.widgetButtonRegion);if(this.closeButton){this.restorePlaceholderText();var b=this.fullInputTextarea;if(document.selection){var a=b.createTextRange();a.collapse(true);a.moveEnd('character',0);a.moveStart('character',0);a.select();}else if(b.setSelectionRange){b.focus();b.setSelectionRange(0,0);}}return false;},removePlaceholderText:function(event){if(CSS.hasClass(this.fullInputTextarea,'connect_comment_widget_disabled')){CSS.removeClass(this.fullInputTextarea,'connect_comment_widget_disabled');this.fullInputTextarea.value='';}return false;},restorePlaceholderText:function(event){if(this.fullInputTextarea.value.trim()==''){this.fullInputTextarea.value=this.defaultInputText;CSS.addClass(this.fullInputTextarea,'connect_comment_widget_disabled');}return false;},updateUserComment:function(event){var b=this.fullInputTextarea.value.trim();var a=this.ownProductCheckbox.checked;if(b===''||b==this.defaultInputText){if(a===false)return false;b='';}this.postUserComment(b,a);return false;},getAjaxEndpoint:function(){return '/ajax/connect/external_node_connect.php';},getCommentAjaxEndpoint:function(){return '/ajax/connect/external_edge_comment.php';},getConfirmURL:function(){var a={href:this.externalUrl,page_id:this.pageId,node_type:this.nodeType,edge_type:this.edgeType,widget_id:this.widgetID};if(this.ref)a.ref=this.ref;return URI('/plugins/like_confirm.php').addQueryData(a).toString();},updateLoggedInUser:function(b,a){ExternalNodeConnectWidget.updateLoggedInUser(b,a);},syncSendWidgetWidth:function(h,b){var a=this.computeButtonDimensionsWithPadding().width;var c=b.button_width-a;if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT&&c>0&&c<=5){CSS.setStyle(this.connectButton,'width',(b.button_width-parseInt(CSS.getStyle(this.connectButton,'paddingLeft'))-parseInt(CSS.getStyle(this.connectButton,'paddingRight'))-parseInt(CSS.getStyle(this.connectButton,'borderLeftWidth'))-parseInt(CSS.getStyle(this.connectButton,'borderRightWidth')))+'px');this.sizeNumberCloud();}if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT){var d=Vector2.getElementDimensions(this.widget).y;CSS.setStyle(this.widget,'height',(d+5)+'px');var e=ua.ie();var f=intl_locale_is_rtl();var g=f?'right':'left';if(e&&e<9){CSS.setStyle(this.connectButton,'position','absolute');CSS.setStyle(this.connectButton,g,-(b.button_width+10)+'px');}else{CSS.setStyle(this.connectButton,'position','fixed');CSS.setStyle(this.connectButton,g,'0px');}if(e&&this.connectButtonSlider){CSS.setStyle(this.connectButtonSlider,g,b.button_width+'px');if(e<=7)this.fixIEButtonDoubleLineBug();}CSS.setStyle(this.confirmationCell,'position','absolute');CSS.setStyle(this.confirmationCell,g,(b.button_width+a+5)+'px');CSS.setStyle(this.confirmationCell,'top','5px');if(this.sampleConnections){CSS.setStyle(this.sampleConnections,'position','fixed');CSS.setStyle(this.sampleConnections,g,'0');}this.invertedButtons=true;this.repositionFacepileVertically();}},repositionFacepileVertically:function(){if(this.invertedButtons&&this.sampleConnections){var a=Vector2.getElementDimensions(this.summaryText).y;CSS.setStyle(this.sampleConnections,'margin-top',(5+a+5)+'px');}}});
var ExternalPageLikeWidget=function(a){a.edgeType='like';this.parent.construct(this,a);this.unactionLink=DOM.scry(this.widget,'span.unlike_link')[0];if(this.unactionLink)Event.listen(this.unactionLink,'click',this.connectToNodeOnClick.bind(this));this.hasShowedInsights=false;this.showInsights();};Class.extend(ExternalPageLikeWidget,'ExternalNodeConnectWidget');ExternalPageLikeWidget.LIKE_EDGE_TYPE=0;ExternalPageLikeWidget.RECOMMEND_EDGE_TYPE=1;copy_properties(ExternalPageLikeWidget.prototype,{getSyncEndpointName:function(){var a=this.connectText?this.connectText:'like';if(a==ExternalPageLikeWidget.RECOMMEND_EDGE_TYPE)a='like';return 'platform/'+a+'/sync';},getConnectionEndpointName:function(){return 'platform/like/connection';},getPluginName:function(){return 'like';},presentInsightsPage:function(){var a;a='/insights/?inline_link=true&sk=';if(this.pageId){a+='po_'+this.pageId;}else a+='lo_'+this.domainId;window.open(a,'_blank');},showInsights:function(){if(this.hasShowedInsights||(!this.pageId&&!this.domainId))return;var b=DOM.scry(this.widget,'a.connect_widget_insights_link');if(b)for(var a=0;a<b.length;a++){CSS.show(b[a].parentNode);Event.listen(b[a],'click',this.presentInsightsPage.bind(this));}this.hasShowedInsights=true;},repositionFacepileVertically:function(){this.showInsights();this.parent.repositionFacepileVertically();}});
function SendButton(b){var a=$(b.divID);copy_properties(this,{button:DOM.find(a,'a.btnLink'),channel:b.channel,div:a,divID:b.divID,loggedIn:!!b.userID,nodeImageURL:b.nodeImageURL,nodeTitle:b.nodeTitle,nodeURL:b.nodeURL,nodeSummary:b.nodeSummary,error:b.error,initFormOpen:b.initFormOpen,extended_social_context:b.extended_social_context,likeButtonLayout:b.likeButtonLayout});this.init();}copy_properties(SendButton.prototype,{init:function(){this.formIsOpen=false;this.formIsShown=false;this.pendingFormShow=false;Arbiter.subscribe('platform/socialplugins/send/sent',function(b,a){if(a.controllerID===this.divID)this.closeForm();}.bind(this),Arbiter.SUBSCRIBE_NEW);Arbiter.subscribe('platform/socialplugins/send/cancel',function(b,a){if(a.controllerID===this.divID)this.hideForm();}.bind(this),Arbiter.SUBSCRIBE_NEW);this.buttonWidth=Vector2.getElementDimensions(this.button).x;this.widthSyncArbiter=Arbiter.subscribe('platform/socialplugins/like/resize',this.syncLikeWidgetWidth.bind(this));Arbiter.inform('platform/socialplugins/send/resize',{button_width:this.buttonWidth},Arbiter.BEHAVIOR_STATE);Arbiter.subscribe('platform/socialplugins/dialog',function(b,a){if(a.controllerID!==this.divID&&a.event=='open')this.closeForm();}.bind(this));UnverifiedXD.init({channelUrl:this.channel,autoResize:true,resizeWidth:true});Event.listen(this.button,'click',this.toggleFormVisibility.bind(this));if(this.initFormOpen)onafterloadRegister(this.toggleFormVisibility.bind(this));},syncLikeWidgetWidth:function(d,a){var b=a.button_width-this.buttonWidth;if(a.layout==='box_count'&&b>0&&b<=5)CSS.setStyle(this.div,'width',(a.button_width-parseInt(CSS.getStyle(this.button,'paddingLeft'))-parseInt(CSS.getStyle(this.button,'paddingRight'))-parseInt(CSS.getStyle(this.button,'borderLeftWidth'))-parseInt(CSS.getStyle(this.button,'borderRightWidth')))+'px');if(a.layout==='standard'){var c=intl_locale_is_rtl()?'right':'left';CSS.setStyle(this.div,'position','absolute');CSS.setStyle(this.div,c,(a.button_width+5)+'px');this.invertedButtons=true;}this.likeWidgetWidth=a.widget_width;this.likeButtonWidth=a.button_width;},toggleFormVisibility:function(a){if(!this.loggedIn){a.kill();PlatformOptInPopup.open('send');return;}if(!this.formIsOpen){this.openForm();}else if(this.formIsShown){this.hideForm();}else this.showForm();},hideForm:function(){if(this.formIsShown){this.formIsShown=false;UnverifiedXD.send({type:'hideEdgeCommentDialog'});CSS.removeClass(this.div,'fbSendButtonSelected');}},showForm:function(){if(!this.formIsShown){CSS.addClass(this.div,'fbSendButtonSelected');this.formIsShown=true;UnverifiedXD.send({type:'showEdgeCommentDialog'});}},closeForm:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.divID,event:'close'});if(this.formIsOpen){this.formIsOpen=this.formIsShown=false;UnverifiedXD.send({type:'dismissEdgeCommentDialog'});CSS.removeClass(this.div,'fbSendButtonSelected');}return this;},openForm:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.divID,event:'open'});if(!this.formIsOpen){CSS.addClass(this.div,'fbSendButtonSelected');this.formIsOpen=this.formIsShown=true;var a={type:'presentEdgeCommentDialog',nodeImageURL:this.nodeImageURL,nodeTitle:this.nodeTitle,nodeURL:this.nodeURL,nodeSummary:this.nodeSummary,controllerID:this.divID,error:this.error,widget_type:'send',extended_social_context:this.extended_social_context};if(this.likeButtonLayout=='button_count'){a.preComputedWidthOffset=this.likeWidgetWidth?this.likeWidgetWidth+10:91;}else if(this.likeButtonLayout=='box_count'){a.preComputedHeightOffset=65;a.preComputedWidthOffset=this.buttonWidth?this.buttonWidth+7:60;a.siderender=true;}else if(this.likeButtonLayout=='simple'){a.preComputedWidthOffset=100;}else if(this.likeButtonLayout=='standard'&&this.invertedButtons)a.preComputedWidthOffset=this.likeButtonWidth?this.likeButtonWidth+5:69;UnverifiedXD.send(a);}return this;}});
__e("legacy:cookie",["Cookie"],function(b,c,d,e){var a=c('Cookie');b.getCookie=a.get;b.setCookie=a.set;b.clearCookie=a.clear;},3);